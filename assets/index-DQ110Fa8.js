var n1=Object.defineProperty;var i1=(r,e,t)=>e in r?n1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Tp=(r,e,t)=>i1(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();var Qc={exports:{}},Io={},Jc={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function r1(){if(Rp)return Se;Rp=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=m&&T[m]||T["@@iterator"],typeof T=="function"?T:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function C(T,N,re){this.props=T,this.context=N,this.refs=w,this.updater=re||x}C.prototype.isReactComponent={},C.prototype.setState=function(T,N){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,N,"setState")},C.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function I(){}I.prototype=C.prototype;function R(T,N,re){this.props=T,this.context=N,this.refs=w,this.updater=re||x}var D=R.prototype=new I;D.constructor=R,E(D,C.prototype),D.isPureReactComponent=!0;var k=Array.isArray,P=Object.prototype.hasOwnProperty,X={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function U(T,N,re){var z,ue={},he=null,_e=null;if(N!=null)for(z in N.ref!==void 0&&(_e=N.ref),N.key!==void 0&&(he=""+N.key),N)P.call(N,z)&&!V.hasOwnProperty(z)&&(ue[z]=N[z]);var xe=arguments.length-2;if(xe===1)ue.children=re;else if(1<xe){for(var Te=Array(xe),Ge=0;Ge<xe;Ge++)Te[Ge]=arguments[Ge+2];ue.children=Te}if(T&&T.defaultProps)for(z in xe=T.defaultProps,xe)ue[z]===void 0&&(ue[z]=xe[z]);return{$$typeof:r,type:T,key:he,ref:_e,props:ue,_owner:X.current}}function b(T,N){return{$$typeof:r,type:T.type,key:N,ref:T.ref,props:T.props,_owner:T._owner}}function B(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function ie(T){var N={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(re){return N[re]})}var $=/\/+/g;function te(T,N){return typeof T=="object"&&T!==null&&T.key!=null?ie(""+T.key):N.toString(36)}function J(T,N,re,z,ue){var he=typeof T;(he==="undefined"||he==="boolean")&&(T=null);var _e=!1;if(T===null)_e=!0;else switch(he){case"string":case"number":_e=!0;break;case"object":switch(T.$$typeof){case r:case e:_e=!0}}if(_e)return _e=T,ue=ue(_e),T=z===""?"."+te(_e,0):z,k(ue)?(re="",T!=null&&(re=T.replace($,"$&/")+"/"),J(ue,N,re,"",function(Ge){return Ge})):ue!=null&&(B(ue)&&(ue=b(ue,re+(!ue.key||_e&&_e.key===ue.key?"":(""+ue.key).replace($,"$&/")+"/")+T)),N.push(ue)),1;if(_e=0,z=z===""?".":z+":",k(T))for(var xe=0;xe<T.length;xe++){he=T[xe];var Te=z+te(he,xe);_e+=J(he,N,re,Te,ue)}else if(Te=y(T),typeof Te=="function")for(T=Te.call(T),xe=0;!(he=T.next()).done;)he=he.value,Te=z+te(he,xe++),_e+=J(he,N,re,Te,ue);else if(he==="object")throw N=String(T),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return _e}function ee(T,N,re){if(T==null)return T;var z=[],ue=0;return J(T,z,"","",function(he){return N.call(re,he,ue++)}),z}function ne(T){if(T._status===-1){var N=T._result;N=N(),N.then(function(re){(T._status===0||T._status===-1)&&(T._status=1,T._result=re)},function(re){(T._status===0||T._status===-1)&&(T._status=2,T._result=re)}),T._status===-1&&(T._status=0,T._result=N)}if(T._status===1)return T._result.default;throw T._result}var Z={current:null},W={transition:null},q={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:W,ReactCurrentOwner:X};function G(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:ee,forEach:function(T,N,re){ee(T,function(){N.apply(this,arguments)},re)},count:function(T){var N=0;return ee(T,function(){N++}),N},toArray:function(T){return ee(T,function(N){return N})||[]},only:function(T){if(!B(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Se.Component=C,Se.Fragment=t,Se.Profiler=s,Se.PureComponent=R,Se.StrictMode=n,Se.Suspense=h,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Se.act=G,Se.cloneElement=function(T,N,re){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var z=E({},T.props),ue=T.key,he=T.ref,_e=T._owner;if(N!=null){if(N.ref!==void 0&&(he=N.ref,_e=X.current),N.key!==void 0&&(ue=""+N.key),T.type&&T.type.defaultProps)var xe=T.type.defaultProps;for(Te in N)P.call(N,Te)&&!V.hasOwnProperty(Te)&&(z[Te]=N[Te]===void 0&&xe!==void 0?xe[Te]:N[Te])}var Te=arguments.length-2;if(Te===1)z.children=re;else if(1<Te){xe=Array(Te);for(var Ge=0;Ge<Te;Ge++)xe[Ge]=arguments[Ge+2];z.children=xe}return{$$typeof:r,type:T.type,key:ue,ref:he,props:z,_owner:_e}},Se.createContext=function(T){return T={$$typeof:a,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:l,_context:T},T.Consumer=T},Se.createElement=U,Se.createFactory=function(T){var N=U.bind(null,T);return N.type=T,N},Se.createRef=function(){return{current:null}},Se.forwardRef=function(T){return{$$typeof:c,render:T}},Se.isValidElement=B,Se.lazy=function(T){return{$$typeof:p,_payload:{_status:-1,_result:T},_init:ne}},Se.memo=function(T,N){return{$$typeof:g,type:T,compare:N===void 0?null:N}},Se.startTransition=function(T){var N=W.transition;W.transition={};try{T()}finally{W.transition=N}},Se.unstable_act=G,Se.useCallback=function(T,N){return Z.current.useCallback(T,N)},Se.useContext=function(T){return Z.current.useContext(T)},Se.useDebugValue=function(){},Se.useDeferredValue=function(T){return Z.current.useDeferredValue(T)},Se.useEffect=function(T,N){return Z.current.useEffect(T,N)},Se.useId=function(){return Z.current.useId()},Se.useImperativeHandle=function(T,N,re){return Z.current.useImperativeHandle(T,N,re)},Se.useInsertionEffect=function(T,N){return Z.current.useInsertionEffect(T,N)},Se.useLayoutEffect=function(T,N){return Z.current.useLayoutEffect(T,N)},Se.useMemo=function(T,N){return Z.current.useMemo(T,N)},Se.useReducer=function(T,N,re){return Z.current.useReducer(T,N,re)},Se.useRef=function(T){return Z.current.useRef(T)},Se.useState=function(T){return Z.current.useState(T)},Se.useSyncExternalStore=function(T,N,re){return Z.current.useSyncExternalStore(T,N,re)},Se.useTransition=function(){return Z.current.useTransition()},Se.version="18.3.1",Se}var Ip;function Qh(){return Ip||(Ip=1,Jc.exports=r1()),Jc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp;function s1(){if(Lp)return Io;Lp=1;var r=Qh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(c,h,g){var p,m={},y=null,x=null;g!==void 0&&(y=""+g),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(x=h.ref);for(p in h)n.call(h,p)&&!l.hasOwnProperty(p)&&(m[p]=h[p]);if(c&&c.defaultProps)for(p in h=c.defaultProps,h)m[p]===void 0&&(m[p]=h[p]);return{$$typeof:e,type:c,key:y,ref:x,props:m,_owner:s.current}}return Io.Fragment=t,Io.jsx=a,Io.jsxs=a,Io}var kp;function o1(){return kp||(kp=1,Qc.exports=s1()),Qc.exports}var ve=o1(),Wn=Qh(),ga={},eh={exports:{}},zt={},th={exports:{}},nh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp;function l1(){return Mp||(Mp=1,function(r){function e(W,q){var G=W.length;W.push(q);e:for(;0<G;){var T=G-1>>>1,N=W[T];if(0<s(N,q))W[T]=q,W[G]=N,G=T;else break e}}function t(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var q=W[0],G=W.pop();if(G!==q){W[0]=G;e:for(var T=0,N=W.length,re=N>>>1;T<re;){var z=2*(T+1)-1,ue=W[z],he=z+1,_e=W[he];if(0>s(ue,G))he<N&&0>s(_e,ue)?(W[T]=_e,W[he]=G,T=he):(W[T]=ue,W[z]=G,T=z);else if(he<N&&0>s(_e,G))W[T]=_e,W[he]=G,T=he;else break e}}return q}function s(W,q){var G=W.sortIndex-q.sortIndex;return G!==0?G:W.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();r.unstable_now=function(){return a.now()-c}}var h=[],g=[],p=1,m=null,y=3,x=!1,E=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(W){for(var q=t(g);q!==null;){if(q.callback===null)n(g);else if(q.startTime<=W)n(g),q.sortIndex=q.expirationTime,e(h,q);else break;q=t(g)}}function k(W){if(w=!1,D(W),!E)if(t(h)!==null)E=!0,ne(P);else{var q=t(g);q!==null&&Z(k,q.startTime-W)}}function P(W,q){E=!1,w&&(w=!1,I(U),U=-1),x=!0;var G=y;try{for(D(q),m=t(h);m!==null&&(!(m.expirationTime>q)||W&&!ie());){var T=m.callback;if(typeof T=="function"){m.callback=null,y=m.priorityLevel;var N=T(m.expirationTime<=q);q=r.unstable_now(),typeof N=="function"?m.callback=N:m===t(h)&&n(h),D(q)}else n(h);m=t(h)}if(m!==null)var re=!0;else{var z=t(g);z!==null&&Z(k,z.startTime-q),re=!1}return re}finally{m=null,y=G,x=!1}}var X=!1,V=null,U=-1,b=5,B=-1;function ie(){return!(r.unstable_now()-B<b)}function $(){if(V!==null){var W=r.unstable_now();B=W;var q=!0;try{q=V(!0,W)}finally{q?te():(X=!1,V=null)}}else X=!1}var te;if(typeof R=="function")te=function(){R($)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ee=J.port2;J.port1.onmessage=$,te=function(){ee.postMessage(null)}}else te=function(){C($,0)};function ne(W){V=W,X||(X=!0,te())}function Z(W,q){U=C(function(){W(r.unstable_now())},q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){E||x||(E=!0,ne(P))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(W){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var G=y;y=q;try{return W()}finally{y=G}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var G=y;y=W;try{return q()}finally{y=G}},r.unstable_scheduleCallback=function(W,q,G){var T=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?T+G:T):G=T,W){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=G+N,W={id:p++,callback:q,priorityLevel:W,startTime:G,expirationTime:N,sortIndex:-1},G>T?(W.sortIndex=G,e(g,W),t(h)===null&&W===t(g)&&(w?(I(U),U=-1):w=!0,Z(k,G-T))):(W.sortIndex=N,e(h,W),E||x||(E=!0,ne(P))),W},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(W){var q=y;return function(){var G=y;y=q;try{return W.apply(this,arguments)}finally{y=G}}}}(nh)),nh}var Pp;function a1(){return Pp||(Pp=1,th.exports=l1()),th.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap;function u1(){if(Ap)return zt;Ap=1;var r=Qh(),e=a1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function l(i,o){a(i,o),a(i+"Capture",o)}function a(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function y(i){return h.call(m,i)?!0:h.call(p,i)?!1:g.test(i)?m[i]=!0:(p[i]=!0,!1)}function x(i,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function E(i,o,u,d){if(o===null||typeof o>"u"||x(i,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function w(i,o,u,d,f,_,v){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=_,this.removeEmptyString=v}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new w(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new w(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new w(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new w(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new w(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new w(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new w(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new w(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new w(i,5,!1,i.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function R(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(I,R);C[o]=new w(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(I,R);C[o]=new w(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(I,R);C[o]=new w(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new w(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new w(i,1,!1,i.toLowerCase(),null,!0,!0)});function D(i,o,u,d){var f=C.hasOwnProperty(o)?C[o]:null;(f!==null?f.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(E(o,u,f,d)&&(u=null),d||f===null?y(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):f.mustUseProperty?i[f.propertyName]=u===null?f.type===3?!1:"":u:(o=f.attributeName,d=f.attributeNamespace,u===null?i.removeAttribute(o):(f=f.type,u=f===3||f===4&&u===!0?"":""+u,d?i.setAttributeNS(d,o,u):i.setAttribute(o,u))))}var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),X=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),ie=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),W=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var G=Object.assign,T;function N(i){if(T===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);T=o&&o[1]||""}return`
`+T+i}var re=!1;function z(i,o){if(!i||re)return"";re=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(O){var d=O}Reflect.construct(i,[],o)}else{try{o.call()}catch(O){d=O}i.call(o.prototype)}else{try{throw Error()}catch(O){d=O}i()}}catch(O){if(O&&d&&typeof O.stack=="string"){for(var f=O.stack.split(`
`),_=d.stack.split(`
`),v=f.length-1,S=_.length-1;1<=v&&0<=S&&f[v]!==_[S];)S--;for(;1<=v&&0<=S;v--,S--)if(f[v]!==_[S]){if(v!==1||S!==1)do if(v--,S--,0>S||f[v]!==_[S]){var L=`
`+f[v].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=v&&0<=S);break}}}finally{re=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?N(i):""}function ue(i){switch(i.tag){case 5:return N(i.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return i=z(i.type,!1),i;case 11:return i=z(i.type.render,!1),i;case 1:return i=z(i.type,!0),i;default:return""}}function he(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case V:return"Fragment";case X:return"Portal";case b:return"Profiler";case U:return"StrictMode";case te:return"Suspense";case J:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ie:return(i.displayName||"Context")+".Consumer";case B:return(i._context.displayName||"Context")+".Provider";case $:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ee:return o=i.displayName||null,o!==null?o:he(i.type)||"Memo";case ne:o=i._payload,i=i._init;try{return he(i(o))}catch{}}return null}function _e(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(o);case 8:return o===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function xe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Te(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ge(i){var o=Te(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,_=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return f.call(this)},set:function(v){d=""+v,_.call(this,v)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(v){d=""+v},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ct(i){i._valueTracker||(i._valueTracker=Ge(i))}function An(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return i&&(d=Te(i)?i.checked?"true":"false":i.value),i=d,i!==u?(o.setValue(i),!0):!1}function gn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function $n(i,o){var u=o.checked;return G({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Dn(i,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=xe(o.value!=null?o.value:u),i._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Qt(i,o){o=o.checked,o!=null&&D(i,"checked",o,!1)}function gt(i,o){Qt(i,o);var u=xe(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Fn(i,o.type,u):o.hasOwnProperty("defaultValue")&&Fn(i,o.type,xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Yt(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Fn(i,o,u){(o!=="number"||gn(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Jt=Array.isArray;function en(i,o,u,d){if(i=i.options,o){o={};for(var f=0;f<u.length;f++)o["$"+u[f]]=!0;for(u=0;u<i.length;u++)f=o.hasOwnProperty("$"+i[u].value),i[u].selected!==f&&(i[u].selected=f),f&&d&&(i[u].defaultSelected=!0)}else{for(u=""+xe(u),o=null,f=0;f<i.length;f++){if(i[f].value===u){i[f].selected=!0,d&&(i[f].defaultSelected=!0);return}o!==null||i[f].disabled||(o=i[f])}o!==null&&(o.selected=!0)}}function pn(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function qn(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Jt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:xe(u)}}function Qn(i,o){var u=xe(o.value),d=xe(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),d!=null&&(i.defaultValue=""+d)}function He(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Nr(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lr(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Nr(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Jn,ar=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,f){MSApp.execUnsafeLocalFunction(function(){return i(o,u,d,f)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Jn=Jn||document.createElement("div"),Jn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Jn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ur(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ll=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(i){ll.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),xi[o]=xi[i]})});function zr(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||xi.hasOwnProperty(i)&&xi[i]?(""+o).trim():o+"px"}function al(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,f=zr(u,o[u],d);u==="float"&&(u="cssFloat"),d?i.setProperty(u,f):i[u]=f}}var mu=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gr(i,o){if(o){if(mu[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ur(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=null;function Xr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var bs=null,On=null,tn=null;function wi(i){if(i=ho(i)){if(typeof bs!="function")throw Error(t(280));var o=i.stateNode;o&&(o=kl(o),bs(i.stateNode,i.type,o))}}function Ci(i){On?tn?tn.push(i):tn=[i]:On=i}function Bs(){if(On){var i=On,o=tn;if(tn=On=null,wi(i),o)for(i=0;i<o.length;i++)wi(o[i])}}function Ys(i,o){return i(o)}function St(){}var _n=!1;function Tt(i,o,u){if(_n)return i(o,u);_n=!0;try{return Ys(i,o,u)}finally{_n=!1,(On!==null||tn!==null)&&(St(),Bs())}}function pt(i,o){var u=i.stateNode;if(u===null)return null;var d=kl(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var _t=!1;if(c)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){_t=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{_t=!1}function mn(i,o,u,d,f,_,v,S,L){var O=Array.prototype.slice.call(arguments,3);try{o.apply(u,O)}catch(K){this.onError(K)}}var Ue=!1,Qe=null,Pt=!1,Vs=null,c0={onError:function(i){Ue=!0,Qe=i}};function h0(i,o,u,d,f,_,v,S,L){Ue=!1,Qe=null,mn.apply(c0,arguments)}function d0(i,o,u,d,f,_,v,S,L){if(h0.apply(this,arguments),Ue){if(Ue){var O=Qe;Ue=!1,Qe=null}else throw Error(t(198));Pt||(Pt=!0,Vs=O)}}function hr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Kd(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Zd(i){if(hr(i)!==i)throw Error(t(188))}function f0(i){var o=i.alternate;if(!o){if(o=hr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,d=o;;){var f=u.return;if(f===null)break;var _=f.alternate;if(_===null){if(d=f.return,d!==null){u=d;continue}break}if(f.child===_.child){for(_=f.child;_;){if(_===u)return Zd(f),i;if(_===d)return Zd(f),o;_=_.sibling}throw Error(t(188))}if(u.return!==d.return)u=f,d=_;else{for(var v=!1,S=f.child;S;){if(S===u){v=!0,u=f,d=_;break}if(S===d){v=!0,d=f,u=_;break}S=S.sibling}if(!v){for(S=_.child;S;){if(S===u){v=!0,u=_,d=f;break}if(S===d){v=!0,d=_,u=f;break}S=S.sibling}if(!v)throw Error(t(189))}}if(u.alternate!==d)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Hd(i){return i=f0(i),i!==null?$d(i):null}function $d(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=$d(i);if(o!==null)return o;i=i.sibling}return null}var qd=e.unstable_scheduleCallback,Qd=e.unstable_cancelCallback,g0=e.unstable_shouldYield,p0=e.unstable_requestPaint,$e=e.unstable_now,_0=e.unstable_getCurrentPriorityLevel,yu=e.unstable_ImmediatePriority,Jd=e.unstable_UserBlockingPriority,ul=e.unstable_NormalPriority,m0=e.unstable_LowPriority,ef=e.unstable_IdlePriority,cl=null,Nn=null;function y0(i){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(cl,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:x0,E0=Math.log,v0=Math.LN2;function x0(i){return i>>>=0,i===0?32:31-(E0(i)/v0|0)|0}var hl=64,dl=4194304;function Ks(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function fl(i,o){var u=i.pendingLanes;if(u===0)return 0;var d=0,f=i.suspendedLanes,_=i.pingedLanes,v=u&268435455;if(v!==0){var S=v&~f;S!==0?d=Ks(S):(_&=v,_!==0&&(d=Ks(_)))}else v=u&~f,v!==0?d=Ks(v):_!==0&&(d=Ks(_));if(d===0)return 0;if(o!==0&&o!==d&&!(o&f)&&(f=d&-d,_=o&-o,f>=_||f===16&&(_&4194240)!==0))return o;if(d&4&&(d|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)u=31-yn(o),f=1<<u,d|=i[u],o&=~f;return d}function w0(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function C0(i,o){for(var u=i.suspendedLanes,d=i.pingedLanes,f=i.expirationTimes,_=i.pendingLanes;0<_;){var v=31-yn(_),S=1<<v,L=f[v];L===-1?(!(S&u)||S&d)&&(f[v]=w0(S,o)):L<=o&&(i.expiredLanes|=S),_&=~S}}function Eu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function tf(){var i=hl;return hl<<=1,!(hl&4194240)&&(hl=64),i}function vu(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Zs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-yn(o),i[o]=u}function S0(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<u;){var f=31-yn(u),_=1<<f;o[f]=0,d[f]=-1,i[f]=-1,u&=~_}}function xu(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var d=31-yn(u),f=1<<d;f&o|i[d]&o&&(i[d]|=o),u&=~f}}var Ne=0;function nf(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var rf,wu,sf,of,lf,Cu=!1,gl=[],Si=null,Ti=null,Ri=null,Hs=new Map,$s=new Map,Ii=[],T0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function af(i,o){switch(i){case"focusin":case"focusout":Si=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Hs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":$s.delete(o.pointerId)}}function qs(i,o,u,d,f,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:_,targetContainers:[f]},o!==null&&(o=ho(o),o!==null&&wu(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,f!==null&&o.indexOf(f)===-1&&o.push(f),i)}function R0(i,o,u,d,f){switch(o){case"focusin":return Si=qs(Si,i,o,u,d,f),!0;case"dragenter":return Ti=qs(Ti,i,o,u,d,f),!0;case"mouseover":return Ri=qs(Ri,i,o,u,d,f),!0;case"pointerover":var _=f.pointerId;return Hs.set(_,qs(Hs.get(_)||null,i,o,u,d,f)),!0;case"gotpointercapture":return _=f.pointerId,$s.set(_,qs($s.get(_)||null,i,o,u,d,f)),!0}return!1}function uf(i){var o=dr(i.target);if(o!==null){var u=hr(o);if(u!==null){if(o=u.tag,o===13){if(o=Kd(u),o!==null){i.blockedOn=o,lf(i.priority,function(){sf(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function pl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Tu(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);cr=d,u.target.dispatchEvent(d),cr=null}else return o=ho(u),o!==null&&wu(o),i.blockedOn=u,!1;o.shift()}return!0}function cf(i,o,u){pl(i)&&u.delete(o)}function I0(){Cu=!1,Si!==null&&pl(Si)&&(Si=null),Ti!==null&&pl(Ti)&&(Ti=null),Ri!==null&&pl(Ri)&&(Ri=null),Hs.forEach(cf),$s.forEach(cf)}function Qs(i,o){i.blockedOn===o&&(i.blockedOn=null,Cu||(Cu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,I0)))}function Js(i){function o(f){return Qs(f,i)}if(0<gl.length){Qs(gl[0],i);for(var u=1;u<gl.length;u++){var d=gl[u];d.blockedOn===i&&(d.blockedOn=null)}}for(Si!==null&&Qs(Si,i),Ti!==null&&Qs(Ti,i),Ri!==null&&Qs(Ri,i),Hs.forEach(o),$s.forEach(o),u=0;u<Ii.length;u++)d=Ii[u],d.blockedOn===i&&(d.blockedOn=null);for(;0<Ii.length&&(u=Ii[0],u.blockedOn===null);)uf(u),u.blockedOn===null&&Ii.shift()}var Wr=k.ReactCurrentBatchConfig,_l=!0;function L0(i,o,u,d){var f=Ne,_=Wr.transition;Wr.transition=null;try{Ne=1,Su(i,o,u,d)}finally{Ne=f,Wr.transition=_}}function k0(i,o,u,d){var f=Ne,_=Wr.transition;Wr.transition=null;try{Ne=4,Su(i,o,u,d)}finally{Ne=f,Wr.transition=_}}function Su(i,o,u,d){if(_l){var f=Tu(i,o,u,d);if(f===null)ju(i,o,d,ml,u),af(i,d);else if(R0(f,i,o,u,d))d.stopPropagation();else if(af(i,d),o&4&&-1<T0.indexOf(i)){for(;f!==null;){var _=ho(f);if(_!==null&&rf(_),_=Tu(i,o,u,d),_===null&&ju(i,o,d,ml,u),_===f)break;f=_}f!==null&&d.stopPropagation()}else ju(i,o,d,null,u)}}var ml=null;function Tu(i,o,u,d){if(ml=null,i=Xr(d),i=dr(i),i!==null)if(o=hr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Kd(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ml=i,null}function hf(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_0()){case yu:return 1;case Jd:return 4;case ul:case m0:return 16;case ef:return 536870912;default:return 16}default:return 16}}var Li=null,Ru=null,yl=null;function df(){if(yl)return yl;var i,o=Ru,u=o.length,d,f="value"in Li?Li.value:Li.textContent,_=f.length;for(i=0;i<u&&o[i]===f[i];i++);var v=u-i;for(d=1;d<=v&&o[u-d]===f[_-d];d++);return yl=f.slice(i,1<d?1-d:void 0)}function El(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function vl(){return!0}function ff(){return!1}function Vt(i){function o(u,d,f,_,v){this._reactName=u,this._targetInst=f,this.type=d,this.nativeEvent=_,this.target=v,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(u=i[S],this[S]=u?u(_):_[S]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?vl:ff,this.isPropagationStopped=ff,this}return G(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=vl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=vl)},persist:function(){},isPersistent:vl}),o}var jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iu=Vt(jr),eo=G({},jr,{view:0,detail:0}),M0=Vt(eo),Lu,ku,to,xl=G({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==to&&(to&&i.type==="mousemove"?(Lu=i.screenX-to.screenX,ku=i.screenY-to.screenY):ku=Lu=0,to=i),Lu)},movementY:function(i){return"movementY"in i?i.movementY:ku}}),gf=Vt(xl),P0=G({},xl,{dataTransfer:0}),A0=Vt(P0),D0=G({},eo,{relatedTarget:0}),Mu=Vt(D0),F0=G({},jr,{animationName:0,elapsedTime:0,pseudoElement:0}),O0=Vt(F0),N0=G({},jr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),z0=Vt(N0),G0=G({},jr,{data:0}),pf=Vt(G0),U0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j0(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=W0[i])?!!o[i]:!1}function Pu(){return j0}var b0=G({},eo,{key:function(i){if(i.key){var o=U0[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=El(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?X0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pu,charCode:function(i){return i.type==="keypress"?El(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?El(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),B0=Vt(b0),Y0=G({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_f=Vt(Y0),V0=G({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pu}),K0=Vt(V0),Z0=G({},jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),H0=Vt(Z0),$0=G({},xl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),q0=Vt($0),Q0=[9,13,27,32],Au=c&&"CompositionEvent"in window,no=null;c&&"documentMode"in document&&(no=document.documentMode);var J0=c&&"TextEvent"in window&&!no,mf=c&&(!Au||no&&8<no&&11>=no),yf=" ",Ef=!1;function vf(i,o){switch(i){case"keyup":return Q0.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var br=!1;function ey(i,o){switch(i){case"compositionend":return xf(o);case"keypress":return o.which!==32?null:(Ef=!0,yf);case"textInput":return i=o.data,i===yf&&Ef?null:i;default:return null}}function ty(i,o){if(br)return i==="compositionend"||!Au&&vf(i,o)?(i=df(),yl=Ru=Li=null,br=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return mf&&o.locale!=="ko"?null:o.data;default:return null}}var ny={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!ny[i.type]:o==="textarea"}function Cf(i,o,u,d){Ci(d),o=Rl(o,"onChange"),0<o.length&&(u=new Iu("onChange","change",null,u,d),i.push({event:u,listeners:o}))}var io=null,ro=null;function iy(i){Wf(i,0)}function wl(i){var o=Zr(i);if(An(o))return i}function ry(i,o){if(i==="change")return o}var Sf=!1;if(c){var Du;if(c){var Fu="oninput"in document;if(!Fu){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),Fu=typeof Tf.oninput=="function"}Du=Fu}else Du=!1;Sf=Du&&(!document.documentMode||9<document.documentMode)}function Rf(){io&&(io.detachEvent("onpropertychange",If),ro=io=null)}function If(i){if(i.propertyName==="value"&&wl(ro)){var o=[];Cf(o,ro,i,Xr(i)),Tt(iy,o)}}function sy(i,o,u){i==="focusin"?(Rf(),io=o,ro=u,io.attachEvent("onpropertychange",If)):i==="focusout"&&Rf()}function oy(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return wl(ro)}function ly(i,o){if(i==="click")return wl(o)}function ay(i,o){if(i==="input"||i==="change")return wl(o)}function uy(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var En=typeof Object.is=="function"?Object.is:uy;function so(i,o){if(En(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var f=u[d];if(!h.call(o,f)||!En(i[f],o[f]))return!1}return!0}function Lf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function kf(i,o){var u=Lf(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=o&&d>=o)return{node:u,offset:o-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Lf(u)}}function Mf(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Mf(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Pf(){for(var i=window,o=gn();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=gn(i.document)}return o}function Ou(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function cy(i){var o=Pf(),u=i.focusedElem,d=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Mf(u.ownerDocument.documentElement,u)){if(d!==null&&Ou(u)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var f=u.textContent.length,_=Math.min(d.start,f);d=d.end===void 0?_:Math.min(d.end,f),!i.extend&&_>d&&(f=d,d=_,_=f),f=kf(u,_);var v=kf(u,d);f&&v&&(i.rangeCount!==1||i.anchorNode!==f.node||i.anchorOffset!==f.offset||i.focusNode!==v.node||i.focusOffset!==v.offset)&&(o=o.createRange(),o.setStart(f.node,f.offset),i.removeAllRanges(),_>d?(i.addRange(o),i.extend(v.node,v.offset)):(o.setEnd(v.node,v.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var hy=c&&"documentMode"in document&&11>=document.documentMode,Br=null,Nu=null,oo=null,zu=!1;function Af(i,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;zu||Br==null||Br!==gn(d)||(d=Br,"selectionStart"in d&&Ou(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),oo&&so(oo,d)||(oo=d,d=Rl(Nu,"onSelect"),0<d.length&&(o=new Iu("onSelect","select",null,o,u),i.push({event:o,listeners:d}),o.target=Br)))}function Cl(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Yr={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionend:Cl("Transition","TransitionEnd")},Gu={},Df={};c&&(Df=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function Sl(i){if(Gu[i])return Gu[i];if(!Yr[i])return i;var o=Yr[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Df)return Gu[i]=o[u];return i}var Ff=Sl("animationend"),Of=Sl("animationiteration"),Nf=Sl("animationstart"),zf=Sl("transitionend"),Gf=new Map,Uf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(i,o){Gf.set(i,o),l(o,[i])}for(var Uu=0;Uu<Uf.length;Uu++){var Xu=Uf[Uu],dy=Xu.toLowerCase(),fy=Xu[0].toUpperCase()+Xu.slice(1);ki(dy,"on"+fy)}ki(Ff,"onAnimationEnd"),ki(Of,"onAnimationIteration"),ki(Nf,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(zf,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gy=new Set("cancel close invalid load scroll toggle".split(" ").concat(lo));function Xf(i,o,u){var d=i.type||"unknown-event";i.currentTarget=u,d0(d,o,void 0,i),i.currentTarget=null}function Wf(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],f=d.event;d=d.listeners;e:{var _=void 0;if(o)for(var v=d.length-1;0<=v;v--){var S=d[v],L=S.instance,O=S.currentTarget;if(S=S.listener,L!==_&&f.isPropagationStopped())break e;Xf(f,S,O),_=L}else for(v=0;v<d.length;v++){if(S=d[v],L=S.instance,O=S.currentTarget,S=S.listener,L!==_&&f.isPropagationStopped())break e;Xf(f,S,O),_=L}}}if(Pt)throw i=Vs,Pt=!1,Vs=null,i}function je(i,o){var u=o[Zu];u===void 0&&(u=o[Zu]=new Set);var d=i+"__bubble";u.has(d)||(jf(o,i,2,!1),u.add(d))}function Wu(i,o,u){var d=0;o&&(d|=4),jf(u,i,d,o)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function ao(i){if(!i[Tl]){i[Tl]=!0,n.forEach(function(u){u!=="selectionchange"&&(gy.has(u)||Wu(u,!1,i),Wu(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Tl]||(o[Tl]=!0,Wu("selectionchange",!1,o))}}function jf(i,o,u,d){switch(hf(o)){case 1:var f=L0;break;case 4:f=k0;break;default:f=Su}u=f.bind(null,o,u,i),f=void 0,!_t||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(f=!0),d?f!==void 0?i.addEventListener(o,u,{capture:!0,passive:f}):i.addEventListener(o,u,!0):f!==void 0?i.addEventListener(o,u,{passive:f}):i.addEventListener(o,u,!1)}function ju(i,o,u,d,f){var _=d;if(!(o&1)&&!(o&2)&&d!==null)e:for(;;){if(d===null)return;var v=d.tag;if(v===3||v===4){var S=d.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(v===4)for(v=d.return;v!==null;){var L=v.tag;if((L===3||L===4)&&(L=v.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;v=v.return}for(;S!==null;){if(v=dr(S),v===null)return;if(L=v.tag,L===5||L===6){d=_=v;continue e}S=S.parentNode}}d=d.return}Tt(function(){var O=_,K=Xr(u),H=[];e:{var Y=Gf.get(i);if(Y!==void 0){var se=Iu,ae=i;switch(i){case"keypress":if(El(u)===0)break e;case"keydown":case"keyup":se=B0;break;case"focusin":ae="focus",se=Mu;break;case"focusout":ae="blur",se=Mu;break;case"beforeblur":case"afterblur":se=Mu;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=A0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=K0;break;case Ff:case Of:case Nf:se=O0;break;case zf:se=H0;break;case"scroll":se=M0;break;case"wheel":se=q0;break;case"copy":case"cut":case"paste":se=z0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=_f}var ce=(o&4)!==0,qe=!ce&&i==="scroll",A=ce?Y!==null?Y+"Capture":null:Y;ce=[];for(var M=O,F;M!==null;){F=M;var Q=F.stateNode;if(F.tag===5&&Q!==null&&(F=Q,A!==null&&(Q=pt(M,A),Q!=null&&ce.push(uo(M,Q,F)))),qe)break;M=M.return}0<ce.length&&(Y=new se(Y,ae,null,u,K),H.push({event:Y,listeners:ce}))}}if(!(o&7)){e:{if(Y=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",Y&&u!==cr&&(ae=u.relatedTarget||u.fromElement)&&(dr(ae)||ae[ei]))break e;if((se||Y)&&(Y=K.window===K?K:(Y=K.ownerDocument)?Y.defaultView||Y.parentWindow:window,se?(ae=u.relatedTarget||u.toElement,se=O,ae=ae?dr(ae):null,ae!==null&&(qe=hr(ae),ae!==qe||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(se=null,ae=O),se!==ae)){if(ce=gf,Q="onMouseLeave",A="onMouseEnter",M="mouse",(i==="pointerout"||i==="pointerover")&&(ce=_f,Q="onPointerLeave",A="onPointerEnter",M="pointer"),qe=se==null?Y:Zr(se),F=ae==null?Y:Zr(ae),Y=new ce(Q,M+"leave",se,u,K),Y.target=qe,Y.relatedTarget=F,Q=null,dr(K)===O&&(ce=new ce(A,M+"enter",ae,u,K),ce.target=F,ce.relatedTarget=qe,Q=ce),qe=Q,se&&ae)t:{for(ce=se,A=ae,M=0,F=ce;F;F=Vr(F))M++;for(F=0,Q=A;Q;Q=Vr(Q))F++;for(;0<M-F;)ce=Vr(ce),M--;for(;0<F-M;)A=Vr(A),F--;for(;M--;){if(ce===A||A!==null&&ce===A.alternate)break t;ce=Vr(ce),A=Vr(A)}ce=null}else ce=null;se!==null&&bf(H,Y,se,ce,!1),ae!==null&&qe!==null&&bf(H,qe,ae,ce,!0)}}e:{if(Y=O?Zr(O):window,se=Y.nodeName&&Y.nodeName.toLowerCase(),se==="select"||se==="input"&&Y.type==="file")var de=ry;else if(wf(Y))if(Sf)de=ay;else{de=oy;var ge=sy}else(se=Y.nodeName)&&se.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(de=ly);if(de&&(de=de(i,O))){Cf(H,de,u,K);break e}ge&&ge(i,Y,O),i==="focusout"&&(ge=Y._wrapperState)&&ge.controlled&&Y.type==="number"&&Fn(Y,"number",Y.value)}switch(ge=O?Zr(O):window,i){case"focusin":(wf(ge)||ge.contentEditable==="true")&&(Br=ge,Nu=O,oo=null);break;case"focusout":oo=Nu=Br=null;break;case"mousedown":zu=!0;break;case"contextmenu":case"mouseup":case"dragend":zu=!1,Af(H,u,K);break;case"selectionchange":if(hy)break;case"keydown":case"keyup":Af(H,u,K)}var pe;if(Au)e:{switch(i){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else br?vf(i,u)&&(me="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(me="onCompositionStart");me&&(mf&&u.locale!=="ko"&&(br||me!=="onCompositionStart"?me==="onCompositionEnd"&&br&&(pe=df()):(Li=K,Ru="value"in Li?Li.value:Li.textContent,br=!0)),ge=Rl(O,me),0<ge.length&&(me=new pf(me,i,null,u,K),H.push({event:me,listeners:ge}),pe?me.data=pe:(pe=xf(u),pe!==null&&(me.data=pe)))),(pe=J0?ey(i,u):ty(i,u))&&(O=Rl(O,"onBeforeInput"),0<O.length&&(K=new pf("onBeforeInput","beforeinput",null,u,K),H.push({event:K,listeners:O}),K.data=pe))}Wf(H,o)})}function uo(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Rl(i,o){for(var u=o+"Capture",d=[];i!==null;){var f=i,_=f.stateNode;f.tag===5&&_!==null&&(f=_,_=pt(i,u),_!=null&&d.unshift(uo(i,_,f)),_=pt(i,o),_!=null&&d.push(uo(i,_,f))),i=i.return}return d}function Vr(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function bf(i,o,u,d,f){for(var _=o._reactName,v=[];u!==null&&u!==d;){var S=u,L=S.alternate,O=S.stateNode;if(L!==null&&L===d)break;S.tag===5&&O!==null&&(S=O,f?(L=pt(u,_),L!=null&&v.unshift(uo(u,L,S))):f||(L=pt(u,_),L!=null&&v.push(uo(u,L,S)))),u=u.return}v.length!==0&&i.push({event:o,listeners:v})}var py=/\r\n?/g,_y=/\u0000|\uFFFD/g;function Bf(i){return(typeof i=="string"?i:""+i).replace(py,`
`).replace(_y,"")}function Il(i,o,u){if(o=Bf(o),Bf(i)!==o&&u)throw Error(t(425))}function Ll(){}var bu=null,Bu=null;function Yu(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Vu=typeof setTimeout=="function"?setTimeout:void 0,my=typeof clearTimeout=="function"?clearTimeout:void 0,Yf=typeof Promise=="function"?Promise:void 0,yy=typeof queueMicrotask=="function"?queueMicrotask:typeof Yf<"u"?function(i){return Yf.resolve(null).then(i).catch(Ey)}:Vu;function Ey(i){setTimeout(function(){throw i})}function Ku(i,o){var u=o,d=0;do{var f=u.nextSibling;if(i.removeChild(u),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(d===0){i.removeChild(f),Js(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=f}while(u);Js(o)}function Mi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Vf(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Kr=Math.random().toString(36).slice(2),zn="__reactFiber$"+Kr,co="__reactProps$"+Kr,ei="__reactContainer$"+Kr,Zu="__reactEvents$"+Kr,vy="__reactListeners$"+Kr,xy="__reactHandles$"+Kr;function dr(i){var o=i[zn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ei]||u[zn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Vf(i);i!==null;){if(u=i[zn])return u;i=Vf(i)}return o}i=u,u=i.parentNode}return null}function ho(i){return i=i[zn]||i[ei],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Zr(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function kl(i){return i[co]||null}var Hu=[],Hr=-1;function Pi(i){return{current:i}}function be(i){0>Hr||(i.current=Hu[Hr],Hu[Hr]=null,Hr--)}function We(i,o){Hr++,Hu[Hr]=i.current,i.current=o}var Ai={},mt=Pi(Ai),At=Pi(!1),fr=Ai;function $r(i,o){var u=i.type.contextTypes;if(!u)return Ai;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var f={},_;for(_ in u)f[_]=o[_];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=f),f}function Dt(i){return i=i.childContextTypes,i!=null}function Ml(){be(At),be(mt)}function Kf(i,o,u){if(mt.current!==Ai)throw Error(t(168));We(mt,o),We(At,u)}function Zf(i,o,u){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var f in d)if(!(f in o))throw Error(t(108,_e(i)||"Unknown",f));return G({},u,d)}function Pl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ai,fr=mt.current,We(mt,i),We(At,At.current),!0}function Hf(i,o,u){var d=i.stateNode;if(!d)throw Error(t(169));u?(i=Zf(i,o,fr),d.__reactInternalMemoizedMergedChildContext=i,be(At),be(mt),We(mt,i)):be(At),We(At,u)}var ti=null,Al=!1,$u=!1;function $f(i){ti===null?ti=[i]:ti.push(i)}function wy(i){Al=!0,$f(i)}function Di(){if(!$u&&ti!==null){$u=!0;var i=0,o=Ne;try{var u=ti;for(Ne=1;i<u.length;i++){var d=u[i];do d=d(!0);while(d!==null)}ti=null,Al=!1}catch(f){throw ti!==null&&(ti=ti.slice(i+1)),qd(yu,Di),f}finally{Ne=o,$u=!1}}return null}var qr=[],Qr=0,Dl=null,Fl=0,nn=[],rn=0,gr=null,ni=1,ii="";function pr(i,o){qr[Qr++]=Fl,qr[Qr++]=Dl,Dl=i,Fl=o}function qf(i,o,u){nn[rn++]=ni,nn[rn++]=ii,nn[rn++]=gr,gr=i;var d=ni;i=ii;var f=32-yn(d)-1;d&=~(1<<f),u+=1;var _=32-yn(o)+f;if(30<_){var v=f-f%5;_=(d&(1<<v)-1).toString(32),d>>=v,f-=v,ni=1<<32-yn(o)+f|u<<f|d,ii=_+i}else ni=1<<_|u<<f|d,ii=i}function qu(i){i.return!==null&&(pr(i,1),qf(i,1,0))}function Qu(i){for(;i===Dl;)Dl=qr[--Qr],qr[Qr]=null,Fl=qr[--Qr],qr[Qr]=null;for(;i===gr;)gr=nn[--rn],nn[rn]=null,ii=nn[--rn],nn[rn]=null,ni=nn[--rn],nn[rn]=null}var Kt=null,Zt=null,Be=!1,vn=null;function Qf(i,o){var u=an(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Jf(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Kt=i,Zt=Mi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Kt=i,Zt=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=gr!==null?{id:ni,overflow:ii}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=an(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Kt=i,Zt=null,!0):!1;default:return!1}}function Ju(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ec(i){if(Be){var o=Zt;if(o){var u=o;if(!Jf(i,o)){if(Ju(i))throw Error(t(418));o=Mi(u.nextSibling);var d=Kt;o&&Jf(i,o)?Qf(d,u):(i.flags=i.flags&-4097|2,Be=!1,Kt=i)}}else{if(Ju(i))throw Error(t(418));i.flags=i.flags&-4097|2,Be=!1,Kt=i}}}function eg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Kt=i}function Ol(i){if(i!==Kt)return!1;if(!Be)return eg(i),Be=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Yu(i.type,i.memoizedProps)),o&&(o=Zt)){if(Ju(i))throw tg(),Error(t(418));for(;o;)Qf(i,o),o=Mi(o.nextSibling)}if(eg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Zt=Mi(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Zt=null}}else Zt=Kt?Mi(i.stateNode.nextSibling):null;return!0}function tg(){for(var i=Zt;i;)i=Mi(i.nextSibling)}function Jr(){Zt=Kt=null,Be=!1}function tc(i){vn===null?vn=[i]:vn.push(i)}var Cy=k.ReactCurrentBatchConfig;function fo(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var d=u.stateNode}if(!d)throw Error(t(147,i));var f=d,_=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(v){var S=f.refs;v===null?delete S[_]:S[_]=v},o._stringRef=_,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Nl(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function ng(i){var o=i._init;return o(i._payload)}function ig(i){function o(A,M){if(i){var F=A.deletions;F===null?(A.deletions=[M],A.flags|=16):F.push(M)}}function u(A,M){if(!i)return null;for(;M!==null;)o(A,M),M=M.sibling;return null}function d(A,M){for(A=new Map;M!==null;)M.key!==null?A.set(M.key,M):A.set(M.index,M),M=M.sibling;return A}function f(A,M){return A=Wi(A,M),A.index=0,A.sibling=null,A}function _(A,M,F){return A.index=F,i?(F=A.alternate,F!==null?(F=F.index,F<M?(A.flags|=2,M):F):(A.flags|=2,M)):(A.flags|=1048576,M)}function v(A){return i&&A.alternate===null&&(A.flags|=2),A}function S(A,M,F,Q){return M===null||M.tag!==6?(M=Vc(F,A.mode,Q),M.return=A,M):(M=f(M,F),M.return=A,M)}function L(A,M,F,Q){var de=F.type;return de===V?K(A,M,F.props.children,Q,F.key):M!==null&&(M.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ne&&ng(de)===M.type)?(Q=f(M,F.props),Q.ref=fo(A,M,F),Q.return=A,Q):(Q=oa(F.type,F.key,F.props,null,A.mode,Q),Q.ref=fo(A,M,F),Q.return=A,Q)}function O(A,M,F,Q){return M===null||M.tag!==4||M.stateNode.containerInfo!==F.containerInfo||M.stateNode.implementation!==F.implementation?(M=Kc(F,A.mode,Q),M.return=A,M):(M=f(M,F.children||[]),M.return=A,M)}function K(A,M,F,Q,de){return M===null||M.tag!==7?(M=Cr(F,A.mode,Q,de),M.return=A,M):(M=f(M,F),M.return=A,M)}function H(A,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Vc(""+M,A.mode,F),M.return=A,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case P:return F=oa(M.type,M.key,M.props,null,A.mode,F),F.ref=fo(A,null,M),F.return=A,F;case X:return M=Kc(M,A.mode,F),M.return=A,M;case ne:var Q=M._init;return H(A,Q(M._payload),F)}if(Jt(M)||q(M))return M=Cr(M,A.mode,F,null),M.return=A,M;Nl(A,M)}return null}function Y(A,M,F,Q){var de=M!==null?M.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return de!==null?null:S(A,M,""+F,Q);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case P:return F.key===de?L(A,M,F,Q):null;case X:return F.key===de?O(A,M,F,Q):null;case ne:return de=F._init,Y(A,M,de(F._payload),Q)}if(Jt(F)||q(F))return de!==null?null:K(A,M,F,Q,null);Nl(A,F)}return null}function se(A,M,F,Q,de){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return A=A.get(F)||null,S(M,A,""+Q,de);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case P:return A=A.get(Q.key===null?F:Q.key)||null,L(M,A,Q,de);case X:return A=A.get(Q.key===null?F:Q.key)||null,O(M,A,Q,de);case ne:var ge=Q._init;return se(A,M,F,ge(Q._payload),de)}if(Jt(Q)||q(Q))return A=A.get(F)||null,K(M,A,Q,de,null);Nl(M,Q)}return null}function ae(A,M,F,Q){for(var de=null,ge=null,pe=M,me=M=0,ot=null;pe!==null&&me<F.length;me++){pe.index>me?(ot=pe,pe=null):ot=pe.sibling;var Me=Y(A,pe,F[me],Q);if(Me===null){pe===null&&(pe=ot);break}i&&pe&&Me.alternate===null&&o(A,pe),M=_(Me,M,me),ge===null?de=Me:ge.sibling=Me,ge=Me,pe=ot}if(me===F.length)return u(A,pe),Be&&pr(A,me),de;if(pe===null){for(;me<F.length;me++)pe=H(A,F[me],Q),pe!==null&&(M=_(pe,M,me),ge===null?de=pe:ge.sibling=pe,ge=pe);return Be&&pr(A,me),de}for(pe=d(A,pe);me<F.length;me++)ot=se(pe,A,me,F[me],Q),ot!==null&&(i&&ot.alternate!==null&&pe.delete(ot.key===null?me:ot.key),M=_(ot,M,me),ge===null?de=ot:ge.sibling=ot,ge=ot);return i&&pe.forEach(function(ji){return o(A,ji)}),Be&&pr(A,me),de}function ce(A,M,F,Q){var de=q(F);if(typeof de!="function")throw Error(t(150));if(F=de.call(F),F==null)throw Error(t(151));for(var ge=de=null,pe=M,me=M=0,ot=null,Me=F.next();pe!==null&&!Me.done;me++,Me=F.next()){pe.index>me?(ot=pe,pe=null):ot=pe.sibling;var ji=Y(A,pe,Me.value,Q);if(ji===null){pe===null&&(pe=ot);break}i&&pe&&ji.alternate===null&&o(A,pe),M=_(ji,M,me),ge===null?de=ji:ge.sibling=ji,ge=ji,pe=ot}if(Me.done)return u(A,pe),Be&&pr(A,me),de;if(pe===null){for(;!Me.done;me++,Me=F.next())Me=H(A,Me.value,Q),Me!==null&&(M=_(Me,M,me),ge===null?de=Me:ge.sibling=Me,ge=Me);return Be&&pr(A,me),de}for(pe=d(A,pe);!Me.done;me++,Me=F.next())Me=se(pe,A,me,Me.value,Q),Me!==null&&(i&&Me.alternate!==null&&pe.delete(Me.key===null?me:Me.key),M=_(Me,M,me),ge===null?de=Me:ge.sibling=Me,ge=Me);return i&&pe.forEach(function(t1){return o(A,t1)}),Be&&pr(A,me),de}function qe(A,M,F,Q){if(typeof F=="object"&&F!==null&&F.type===V&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case P:e:{for(var de=F.key,ge=M;ge!==null;){if(ge.key===de){if(de=F.type,de===V){if(ge.tag===7){u(A,ge.sibling),M=f(ge,F.props.children),M.return=A,A=M;break e}}else if(ge.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ne&&ng(de)===ge.type){u(A,ge.sibling),M=f(ge,F.props),M.ref=fo(A,ge,F),M.return=A,A=M;break e}u(A,ge);break}else o(A,ge);ge=ge.sibling}F.type===V?(M=Cr(F.props.children,A.mode,Q,F.key),M.return=A,A=M):(Q=oa(F.type,F.key,F.props,null,A.mode,Q),Q.ref=fo(A,M,F),Q.return=A,A=Q)}return v(A);case X:e:{for(ge=F.key;M!==null;){if(M.key===ge)if(M.tag===4&&M.stateNode.containerInfo===F.containerInfo&&M.stateNode.implementation===F.implementation){u(A,M.sibling),M=f(M,F.children||[]),M.return=A,A=M;break e}else{u(A,M);break}else o(A,M);M=M.sibling}M=Kc(F,A.mode,Q),M.return=A,A=M}return v(A);case ne:return ge=F._init,qe(A,M,ge(F._payload),Q)}if(Jt(F))return ae(A,M,F,Q);if(q(F))return ce(A,M,F,Q);Nl(A,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,M!==null&&M.tag===6?(u(A,M.sibling),M=f(M,F),M.return=A,A=M):(u(A,M),M=Vc(F,A.mode,Q),M.return=A,A=M),v(A)):u(A,M)}return qe}var es=ig(!0),rg=ig(!1),zl=Pi(null),Gl=null,ts=null,nc=null;function ic(){nc=ts=Gl=null}function rc(i){var o=zl.current;be(zl),i._currentValue=o}function sc(i,o,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===u)break;i=i.return}}function ns(i,o){Gl=i,nc=ts=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Ft=!0),i.firstContext=null)}function sn(i){var o=i._currentValue;if(nc!==i)if(i={context:i,memoizedValue:o,next:null},ts===null){if(Gl===null)throw Error(t(308));ts=i,Gl.dependencies={lanes:0,firstContext:i}}else ts=ts.next=i;return o}var _r=null;function oc(i){_r===null?_r=[i]:_r.push(i)}function sg(i,o,u,d){var f=o.interleaved;return f===null?(u.next=u,oc(o)):(u.next=f.next,f.next=u),o.interleaved=u,ri(i,d)}function ri(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Fi=!1;function lc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function og(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function si(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Oi(i,o,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,Le&2){var f=d.pending;return f===null?o.next=o:(o.next=f.next,f.next=o),d.pending=o,ri(i,u)}return f=d.interleaved,f===null?(o.next=o,oc(d)):(o.next=f.next,f.next=o),d.interleaved=o,ri(i,u)}function Ul(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,xu(i,u)}}function lg(i,o){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var f=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var v={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?f=_=v:_=_.next=v,u=u.next}while(u!==null);_===null?f=_=o:_=_.next=o}else f=_=o;u={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:_,shared:d.shared,effects:d.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Xl(i,o,u,d){var f=i.updateQueue;Fi=!1;var _=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var L=S,O=L.next;L.next=null,v===null?_=O:v.next=O,v=L;var K=i.alternate;K!==null&&(K=K.updateQueue,S=K.lastBaseUpdate,S!==v&&(S===null?K.firstBaseUpdate=O:S.next=O,K.lastBaseUpdate=L))}if(_!==null){var H=f.baseState;v=0,K=O=L=null,S=_;do{var Y=S.lane,se=S.eventTime;if((d&Y)===Y){K!==null&&(K=K.next={eventTime:se,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ae=i,ce=S;switch(Y=o,se=u,ce.tag){case 1:if(ae=ce.payload,typeof ae=="function"){H=ae.call(se,H,Y);break e}H=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ce.payload,Y=typeof ae=="function"?ae.call(se,H,Y):ae,Y==null)break e;H=G({},H,Y);break e;case 2:Fi=!0}}S.callback!==null&&S.lane!==0&&(i.flags|=64,Y=f.effects,Y===null?f.effects=[S]:Y.push(S))}else se={eventTime:se,lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},K===null?(O=K=se,L=H):K=K.next=se,v|=Y;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(K===null&&(L=H),f.baseState=L,f.firstBaseUpdate=O,f.lastBaseUpdate=K,o=f.shared.interleaved,o!==null){f=o;do v|=f.lane,f=f.next;while(f!==o)}else _===null&&(f.shared.lanes=0);Er|=v,i.lanes=v,i.memoizedState=H}}function ag(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],f=d.callback;if(f!==null){if(d.callback=null,d=u,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var go={},Gn=Pi(go),po=Pi(go),_o=Pi(go);function mr(i){if(i===go)throw Error(t(174));return i}function ac(i,o){switch(We(_o,o),We(po,i),We(Gn,go),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lr(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=lr(o,i)}be(Gn),We(Gn,o)}function is(){be(Gn),be(po),be(_o)}function ug(i){mr(_o.current);var o=mr(Gn.current),u=lr(o,i.type);o!==u&&(We(po,i),We(Gn,u))}function uc(i){po.current===i&&(be(Gn),be(po))}var Ye=Pi(0);function Wl(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var cc=[];function hc(){for(var i=0;i<cc.length;i++)cc[i]._workInProgressVersionPrimary=null;cc.length=0}var jl=k.ReactCurrentDispatcher,dc=k.ReactCurrentBatchConfig,yr=0,Ve=null,tt=null,rt=null,bl=!1,mo=!1,yo=0,Sy=0;function yt(){throw Error(t(321))}function fc(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!En(i[u],o[u]))return!1;return!0}function gc(i,o,u,d,f,_){if(yr=_,Ve=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,jl.current=i===null||i.memoizedState===null?Ly:ky,i=u(d,f),mo){_=0;do{if(mo=!1,yo=0,25<=_)throw Error(t(301));_+=1,rt=tt=null,o.updateQueue=null,jl.current=My,i=u(d,f)}while(mo)}if(jl.current=Vl,o=tt!==null&&tt.next!==null,yr=0,rt=tt=Ve=null,bl=!1,o)throw Error(t(300));return i}function pc(){var i=yo!==0;return yo=0,i}function Un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Ve.memoizedState=rt=i:rt=rt.next=i,rt}function on(){if(tt===null){var i=Ve.alternate;i=i!==null?i.memoizedState:null}else i=tt.next;var o=rt===null?Ve.memoizedState:rt.next;if(o!==null)rt=o,tt=i;else{if(i===null)throw Error(t(310));tt=i,i={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},rt===null?Ve.memoizedState=rt=i:rt=rt.next=i}return rt}function Eo(i,o){return typeof o=="function"?o(i):o}function _c(i){var o=on(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=tt,f=d.baseQueue,_=u.pending;if(_!==null){if(f!==null){var v=f.next;f.next=_.next,_.next=v}d.baseQueue=f=_,u.pending=null}if(f!==null){_=f.next,d=d.baseState;var S=v=null,L=null,O=_;do{var K=O.lane;if((yr&K)===K)L!==null&&(L=L.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),d=O.hasEagerState?O.eagerState:i(d,O.action);else{var H={lane:K,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};L===null?(S=L=H,v=d):L=L.next=H,Ve.lanes|=K,Er|=K}O=O.next}while(O!==null&&O!==_);L===null?v=d:L.next=S,En(d,o.memoizedState)||(Ft=!0),o.memoizedState=d,o.baseState=v,o.baseQueue=L,u.lastRenderedState=d}if(i=u.interleaved,i!==null){f=i;do _=f.lane,Ve.lanes|=_,Er|=_,f=f.next;while(f!==i)}else f===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function mc(i){var o=on(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=u.dispatch,f=u.pending,_=o.memoizedState;if(f!==null){u.pending=null;var v=f=f.next;do _=i(_,v.action),v=v.next;while(v!==f);En(_,o.memoizedState)||(Ft=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,d]}function cg(){}function hg(i,o){var u=Ve,d=on(),f=o(),_=!En(d.memoizedState,f);if(_&&(d.memoizedState=f,Ft=!0),d=d.queue,yc(gg.bind(null,u,d,i),[i]),d.getSnapshot!==o||_||rt!==null&&rt.memoizedState.tag&1){if(u.flags|=2048,vo(9,fg.bind(null,u,d,f,o),void 0,null),st===null)throw Error(t(349));yr&30||dg(u,o,f)}return f}function dg(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ve.updateQueue,o===null?(o={lastEffect:null,stores:null},Ve.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function fg(i,o,u,d){o.value=u,o.getSnapshot=d,pg(o)&&_g(i)}function gg(i,o,u){return u(function(){pg(o)&&_g(i)})}function pg(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!En(i,u)}catch{return!0}}function _g(i){var o=ri(i,1);o!==null&&Sn(o,i,1,-1)}function mg(i){var o=Un();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:i},o.queue=i,i=i.dispatch=Iy.bind(null,Ve,i),[o.memoizedState,i]}function vo(i,o,u,d){return i={tag:i,create:o,destroy:u,deps:d,next:null},o=Ve.updateQueue,o===null?(o={lastEffect:null,stores:null},Ve.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,o.lastEffect=i)),i}function yg(){return on().memoizedState}function Bl(i,o,u,d){var f=Un();Ve.flags|=i,f.memoizedState=vo(1|o,u,void 0,d===void 0?null:d)}function Yl(i,o,u,d){var f=on();d=d===void 0?null:d;var _=void 0;if(tt!==null){var v=tt.memoizedState;if(_=v.destroy,d!==null&&fc(d,v.deps)){f.memoizedState=vo(o,u,_,d);return}}Ve.flags|=i,f.memoizedState=vo(1|o,u,_,d)}function Eg(i,o){return Bl(8390656,8,i,o)}function yc(i,o){return Yl(2048,8,i,o)}function vg(i,o){return Yl(4,2,i,o)}function xg(i,o){return Yl(4,4,i,o)}function wg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Cg(i,o,u){return u=u!=null?u.concat([i]):null,Yl(4,4,wg.bind(null,o,i),u)}function Ec(){}function Sg(i,o){var u=on();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&fc(o,d[1])?d[0]:(u.memoizedState=[i,o],i)}function Tg(i,o){var u=on();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&fc(o,d[1])?d[0]:(i=i(),u.memoizedState=[i,o],i)}function Rg(i,o,u){return yr&21?(En(u,o)||(u=tf(),Ve.lanes|=u,Er|=u,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Ft=!0),i.memoizedState=u)}function Ty(i,o){var u=Ne;Ne=u!==0&&4>u?u:4,i(!0);var d=dc.transition;dc.transition={};try{i(!1),o()}finally{Ne=u,dc.transition=d}}function Ig(){return on().memoizedState}function Ry(i,o,u){var d=Ui(i);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},Lg(i))kg(o,u);else if(u=sg(i,o,u,d),u!==null){var f=Lt();Sn(u,i,d,f),Mg(u,o,d)}}function Iy(i,o,u){var d=Ui(i),f={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(Lg(i))kg(o,f);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var v=o.lastRenderedState,S=_(v,u);if(f.hasEagerState=!0,f.eagerState=S,En(S,v)){var L=o.interleaved;L===null?(f.next=f,oc(o)):(f.next=L.next,L.next=f),o.interleaved=f;return}}catch{}finally{}u=sg(i,o,f,d),u!==null&&(f=Lt(),Sn(u,i,d,f),Mg(u,o,d))}}function Lg(i){var o=i.alternate;return i===Ve||o!==null&&o===Ve}function kg(i,o){mo=bl=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Mg(i,o,u){if(u&4194240){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,xu(i,u)}}var Vl={readContext:sn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Ly={readContext:sn,useCallback:function(i,o){return Un().memoizedState=[i,o===void 0?null:o],i},useContext:sn,useEffect:Eg,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Bl(4194308,4,wg.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Bl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Bl(4,2,i,o)},useMemo:function(i,o){var u=Un();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var d=Un();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=Ry.bind(null,Ve,i),[d.memoizedState,i]},useRef:function(i){var o=Un();return i={current:i},o.memoizedState=i},useState:mg,useDebugValue:Ec,useDeferredValue:function(i){return Un().memoizedState=i},useTransition:function(){var i=mg(!1),o=i[0];return i=Ty.bind(null,i[1]),Un().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var d=Ve,f=Un();if(Be){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),st===null)throw Error(t(349));yr&30||dg(d,o,u)}f.memoizedState=u;var _={value:u,getSnapshot:o};return f.queue=_,Eg(gg.bind(null,d,_,i),[i]),d.flags|=2048,vo(9,fg.bind(null,d,_,u,o),void 0,null),u},useId:function(){var i=Un(),o=st.identifierPrefix;if(Be){var u=ii,d=ni;u=(d&~(1<<32-yn(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=yo++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=Sy++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},ky={readContext:sn,useCallback:Sg,useContext:sn,useEffect:yc,useImperativeHandle:Cg,useInsertionEffect:vg,useLayoutEffect:xg,useMemo:Tg,useReducer:_c,useRef:yg,useState:function(){return _c(Eo)},useDebugValue:Ec,useDeferredValue:function(i){var o=on();return Rg(o,tt.memoizedState,i)},useTransition:function(){var i=_c(Eo)[0],o=on().memoizedState;return[i,o]},useMutableSource:cg,useSyncExternalStore:hg,useId:Ig,unstable_isNewReconciler:!1},My={readContext:sn,useCallback:Sg,useContext:sn,useEffect:yc,useImperativeHandle:Cg,useInsertionEffect:vg,useLayoutEffect:xg,useMemo:Tg,useReducer:mc,useRef:yg,useState:function(){return mc(Eo)},useDebugValue:Ec,useDeferredValue:function(i){var o=on();return tt===null?o.memoizedState=i:Rg(o,tt.memoizedState,i)},useTransition:function(){var i=mc(Eo)[0],o=on().memoizedState;return[i,o]},useMutableSource:cg,useSyncExternalStore:hg,useId:Ig,unstable_isNewReconciler:!1};function xn(i,o){if(i&&i.defaultProps){o=G({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function vc(i,o,u,d){o=i.memoizedState,u=u(d,o),u=u==null?o:G({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Kl={isMounted:function(i){return(i=i._reactInternals)?hr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var d=Lt(),f=Ui(i),_=si(d,f);_.payload=o,u!=null&&(_.callback=u),o=Oi(i,_,f),o!==null&&(Sn(o,i,f,d),Ul(o,i,f))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var d=Lt(),f=Ui(i),_=si(d,f);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=Oi(i,_,f),o!==null&&(Sn(o,i,f,d),Ul(o,i,f))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Lt(),d=Ui(i),f=si(u,d);f.tag=2,o!=null&&(f.callback=o),o=Oi(i,f,d),o!==null&&(Sn(o,i,d,u),Ul(o,i,d))}};function Pg(i,o,u,d,f,_,v){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,_,v):o.prototype&&o.prototype.isPureReactComponent?!so(u,d)||!so(f,_):!0}function Ag(i,o,u){var d=!1,f=Ai,_=o.contextType;return typeof _=="object"&&_!==null?_=sn(_):(f=Dt(o)?fr:mt.current,d=o.contextTypes,_=(d=d!=null)?$r(i,f):Ai),o=new o(u,_),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Kl,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=f,i.__reactInternalMemoizedMaskedChildContext=_),o}function Dg(i,o,u,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==i&&Kl.enqueueReplaceState(o,o.state,null)}function xc(i,o,u,d){var f=i.stateNode;f.props=u,f.state=i.memoizedState,f.refs={},lc(i);var _=o.contextType;typeof _=="object"&&_!==null?f.context=sn(_):(_=Dt(o)?fr:mt.current,f.context=$r(i,_)),f.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(vc(i,o,_,u),f.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(o=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),o!==f.state&&Kl.enqueueReplaceState(f,f.state,null),Xl(i,u,f,d),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308)}function rs(i,o){try{var u="",d=o;do u+=ue(d),d=d.return;while(d);var f=u}catch(_){f=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:o,stack:f,digest:null}}function wc(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Cc(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var Py=typeof WeakMap=="function"?WeakMap:Map;function Fg(i,o,u){u=si(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){ea||(ea=!0,Gc=d),Cc(i,o)},u}function Og(i,o,u){u=si(-1,u),u.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;u.payload=function(){return d(f)},u.callback=function(){Cc(i,o)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){Cc(i,o),typeof d!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var v=o.stack;this.componentDidCatch(o.value,{componentStack:v!==null?v:""})}),u}function Ng(i,o,u){var d=i.pingCache;if(d===null){d=i.pingCache=new Py;var f=new Set;d.set(o,f)}else f=d.get(o),f===void 0&&(f=new Set,d.set(o,f));f.has(u)||(f.add(u),i=Yy.bind(null,i,o,u),o.then(i,i))}function zg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Gg(i,o,u,d,f){return i.mode&1?(i.flags|=65536,i.lanes=f,i):(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=si(-1,1),o.tag=2,Oi(u,o,1))),u.lanes|=1),i)}var Ay=k.ReactCurrentOwner,Ft=!1;function It(i,o,u,d){o.child=i===null?rg(o,null,u,d):es(o,i.child,u,d)}function Ug(i,o,u,d,f){u=u.render;var _=o.ref;return ns(o,f),d=gc(i,o,u,d,_,f),u=pc(),i!==null&&!Ft?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~f,oi(i,o,f)):(Be&&u&&qu(o),o.flags|=1,It(i,o,d,f),o.child)}function Xg(i,o,u,d,f){if(i===null){var _=u.type;return typeof _=="function"&&!Yc(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=_,Wg(i,o,_,d,f)):(i=oa(u.type,null,d,o,o.mode,f),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!(i.lanes&f)){var v=_.memoizedProps;if(u=u.compare,u=u!==null?u:so,u(v,d)&&i.ref===o.ref)return oi(i,o,f)}return o.flags|=1,i=Wi(_,d),i.ref=o.ref,i.return=o,o.child=i}function Wg(i,o,u,d,f){if(i!==null){var _=i.memoizedProps;if(so(_,d)&&i.ref===o.ref)if(Ft=!1,o.pendingProps=d=_,(i.lanes&f)!==0)i.flags&131072&&(Ft=!0);else return o.lanes=i.lanes,oi(i,o,f)}return Sc(i,o,u,d,f)}function jg(i,o,u){var d=o.pendingProps,f=d.children,_=i!==null?i.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(os,Ht),Ht|=u;else{if(!(u&1073741824))return i=_!==null?_.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,We(os,Ht),Ht|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=_!==null?_.baseLanes:u,We(os,Ht),Ht|=d}else _!==null?(d=_.baseLanes|u,o.memoizedState=null):d=u,We(os,Ht),Ht|=d;return It(i,o,f,u),o.child}function bg(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Sc(i,o,u,d,f){var _=Dt(u)?fr:mt.current;return _=$r(o,_),ns(o,f),u=gc(i,o,u,d,_,f),d=pc(),i!==null&&!Ft?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~f,oi(i,o,f)):(Be&&d&&qu(o),o.flags|=1,It(i,o,u,f),o.child)}function Bg(i,o,u,d,f){if(Dt(u)){var _=!0;Pl(o)}else _=!1;if(ns(o,f),o.stateNode===null)Hl(i,o),Ag(o,u,d),xc(o,u,d,f),d=!0;else if(i===null){var v=o.stateNode,S=o.memoizedProps;v.props=S;var L=v.context,O=u.contextType;typeof O=="object"&&O!==null?O=sn(O):(O=Dt(u)?fr:mt.current,O=$r(o,O));var K=u.getDerivedStateFromProps,H=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function";H||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==d||L!==O)&&Dg(o,v,d,O),Fi=!1;var Y=o.memoizedState;v.state=Y,Xl(o,d,v,f),L=o.memoizedState,S!==d||Y!==L||At.current||Fi?(typeof K=="function"&&(vc(o,u,K,d),L=o.memoizedState),(S=Fi||Pg(o,u,S,d,Y,L,O))?(H||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=L),v.props=d,v.state=L,v.context=O,d=S):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{v=o.stateNode,og(i,o),S=o.memoizedProps,O=o.type===o.elementType?S:xn(o.type,S),v.props=O,H=o.pendingProps,Y=v.context,L=u.contextType,typeof L=="object"&&L!==null?L=sn(L):(L=Dt(u)?fr:mt.current,L=$r(o,L));var se=u.getDerivedStateFromProps;(K=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==H||Y!==L)&&Dg(o,v,d,L),Fi=!1,Y=o.memoizedState,v.state=Y,Xl(o,d,v,f);var ae=o.memoizedState;S!==H||Y!==ae||At.current||Fi?(typeof se=="function"&&(vc(o,u,se,d),ae=o.memoizedState),(O=Fi||Pg(o,u,O,d,Y,ae,L)||!1)?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ae,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ae,L)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ae),v.props=d,v.state=ae,v.context=L,d=O):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),d=!1)}return Tc(i,o,u,d,_,f)}function Tc(i,o,u,d,f,_){bg(i,o);var v=(o.flags&128)!==0;if(!d&&!v)return f&&Hf(o,u,!1),oi(i,o,_);d=o.stateNode,Ay.current=o;var S=v&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&v?(o.child=es(o,i.child,null,_),o.child=es(o,null,S,_)):It(i,o,S,_),o.memoizedState=d.state,f&&Hf(o,u,!0),o.child}function Yg(i){var o=i.stateNode;o.pendingContext?Kf(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Kf(i,o.context,!1),ac(i,o.containerInfo)}function Vg(i,o,u,d,f){return Jr(),tc(f),o.flags|=256,It(i,o,u,d),o.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function Ic(i){return{baseLanes:i,cachePool:null,transitions:null}}function Kg(i,o,u){var d=o.pendingProps,f=Ye.current,_=!1,v=(o.flags&128)!==0,S;if((S=v)||(S=i!==null&&i.memoizedState===null?!1:(f&2)!==0),S?(_=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(f|=1),We(Ye,f&1),i===null)return ec(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(v=d.children,i=d.fallback,_?(d=o.mode,_=o.child,v={mode:"hidden",children:v},!(d&1)&&_!==null?(_.childLanes=0,_.pendingProps=v):_=la(v,d,0,null),i=Cr(i,d,u,null),_.return=o,i.return=o,_.sibling=i,o.child=_,o.child.memoizedState=Ic(u),o.memoizedState=Rc,i):Lc(o,v));if(f=i.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return Dy(i,o,v,d,S,f,u);if(_){_=d.fallback,v=o.mode,f=i.child,S=f.sibling;var L={mode:"hidden",children:d.children};return!(v&1)&&o.child!==f?(d=o.child,d.childLanes=0,d.pendingProps=L,o.deletions=null):(d=Wi(f,L),d.subtreeFlags=f.subtreeFlags&14680064),S!==null?_=Wi(S,_):(_=Cr(_,v,u,null),_.flags|=2),_.return=o,d.return=o,d.sibling=_,o.child=d,d=_,_=o.child,v=i.child.memoizedState,v=v===null?Ic(u):{baseLanes:v.baseLanes|u,cachePool:null,transitions:v.transitions},_.memoizedState=v,_.childLanes=i.childLanes&~u,o.memoizedState=Rc,d}return _=i.child,i=_.sibling,d=Wi(_,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=u),d.return=o,d.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=d,o.memoizedState=null,d}function Lc(i,o){return o=la({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Zl(i,o,u,d){return d!==null&&tc(d),es(o,i.child,null,u),i=Lc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Dy(i,o,u,d,f,_,v){if(u)return o.flags&256?(o.flags&=-257,d=wc(Error(t(422))),Zl(i,o,v,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(_=d.fallback,f=o.mode,d=la({mode:"visible",children:d.children},f,0,null),_=Cr(_,f,v,null),_.flags|=2,d.return=o,_.return=o,d.sibling=_,o.child=d,o.mode&1&&es(o,i.child,null,v),o.child.memoizedState=Ic(v),o.memoizedState=Rc,_);if(!(o.mode&1))return Zl(i,o,v,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var S=d.dgst;return d=S,_=Error(t(419)),d=wc(_,d,void 0),Zl(i,o,v,d)}if(S=(v&i.childLanes)!==0,Ft||S){if(d=st,d!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(d.suspendedLanes|v)?0:f,f!==0&&f!==_.retryLane&&(_.retryLane=f,ri(i,f),Sn(d,i,f,-1))}return Bc(),d=wc(Error(t(421))),Zl(i,o,v,d)}return f.data==="$?"?(o.flags|=128,o.child=i.child,o=Vy.bind(null,i),f._reactRetry=o,null):(i=_.treeContext,Zt=Mi(f.nextSibling),Kt=o,Be=!0,vn=null,i!==null&&(nn[rn++]=ni,nn[rn++]=ii,nn[rn++]=gr,ni=i.id,ii=i.overflow,gr=o),o=Lc(o,d.children),o.flags|=4096,o)}function Zg(i,o,u){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),sc(i.return,o,u)}function kc(i,o,u,d,f){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:f}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=u,_.tailMode=f)}function Hg(i,o,u){var d=o.pendingProps,f=d.revealOrder,_=d.tail;if(It(i,o,d.children,u),d=Ye.current,d&2)d=d&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Zg(i,u,o);else if(i.tag===19)Zg(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(We(Ye,d),!(o.mode&1))o.memoizedState=null;else switch(f){case"forwards":for(u=o.child,f=null;u!==null;)i=u.alternate,i!==null&&Wl(i)===null&&(f=u),u=u.sibling;u=f,u===null?(f=o.child,o.child=null):(f=u.sibling,u.sibling=null),kc(o,!1,f,u,_);break;case"backwards":for(u=null,f=o.child,o.child=null;f!==null;){if(i=f.alternate,i!==null&&Wl(i)===null){o.child=f;break}i=f.sibling,f.sibling=u,u=f,f=i}kc(o,!0,u,null,_);break;case"together":kc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Hl(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function oi(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Er|=o.lanes,!(u&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Wi(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Wi(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function Fy(i,o,u){switch(o.tag){case 3:Yg(o),Jr();break;case 5:ug(o);break;case 1:Dt(o.type)&&Pl(o);break;case 4:ac(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,f=o.memoizedProps.value;We(zl,d._currentValue),d._currentValue=f;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(We(Ye,Ye.current&1),o.flags|=128,null):u&o.child.childLanes?Kg(i,o,u):(We(Ye,Ye.current&1),i=oi(i,o,u),i!==null?i.sibling:null);We(Ye,Ye.current&1);break;case 19:if(d=(u&o.childLanes)!==0,i.flags&128){if(d)return Hg(i,o,u);o.flags|=128}if(f=o.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),We(Ye,Ye.current),d)break;return null;case 22:case 23:return o.lanes=0,jg(i,o,u)}return oi(i,o,u)}var $g,Mc,qg,Qg;$g=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Mc=function(){},qg=function(i,o,u,d){var f=i.memoizedProps;if(f!==d){i=o.stateNode,mr(Gn.current);var _=null;switch(u){case"input":f=$n(i,f),d=$n(i,d),_=[];break;case"select":f=G({},f,{value:void 0}),d=G({},d,{value:void 0}),_=[];break;case"textarea":f=pn(i,f),d=pn(i,d),_=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=Ll)}Gr(u,d);var v;u=null;for(O in f)if(!d.hasOwnProperty(O)&&f.hasOwnProperty(O)&&f[O]!=null)if(O==="style"){var S=f[O];for(v in S)S.hasOwnProperty(v)&&(u||(u={}),u[v]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(s.hasOwnProperty(O)?_||(_=[]):(_=_||[]).push(O,null));for(O in d){var L=d[O];if(S=f!=null?f[O]:void 0,d.hasOwnProperty(O)&&L!==S&&(L!=null||S!=null))if(O==="style")if(S){for(v in S)!S.hasOwnProperty(v)||L&&L.hasOwnProperty(v)||(u||(u={}),u[v]="");for(v in L)L.hasOwnProperty(v)&&S[v]!==L[v]&&(u||(u={}),u[v]=L[v])}else u||(_||(_=[]),_.push(O,u)),u=L;else O==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,S=S?S.__html:void 0,L!=null&&S!==L&&(_=_||[]).push(O,L)):O==="children"?typeof L!="string"&&typeof L!="number"||(_=_||[]).push(O,""+L):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(s.hasOwnProperty(O)?(L!=null&&O==="onScroll"&&je("scroll",i),_||S===L||(_=[])):(_=_||[]).push(O,L))}u&&(_=_||[]).push("style",u);var O=_;(o.updateQueue=O)&&(o.flags|=4)}},Qg=function(i,o,u,d){u!==d&&(o.flags|=4)};function xo(i,o){if(!Be)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Et(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(o)for(var f=i.child;f!==null;)u|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)u|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=d,i.childLanes=u,o}function Oy(i,o,u){var d=o.pendingProps;switch(Qu(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Dt(o.type)&&Ml(),Et(o),null;case 3:return d=o.stateNode,is(),be(At),be(mt),hc(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Ol(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,vn!==null&&(Wc(vn),vn=null))),Mc(i,o),Et(o),null;case 5:uc(o);var f=mr(_o.current);if(u=o.type,i!==null&&o.stateNode!=null)qg(i,o,u,d,f),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return Et(o),null}if(i=mr(Gn.current),Ol(o)){d=o.stateNode,u=o.type;var _=o.memoizedProps;switch(d[zn]=o,d[co]=_,i=(o.mode&1)!==0,u){case"dialog":je("cancel",d),je("close",d);break;case"iframe":case"object":case"embed":je("load",d);break;case"video":case"audio":for(f=0;f<lo.length;f++)je(lo[f],d);break;case"source":je("error",d);break;case"img":case"image":case"link":je("error",d),je("load",d);break;case"details":je("toggle",d);break;case"input":Dn(d,_),je("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!_.multiple},je("invalid",d);break;case"textarea":qn(d,_),je("invalid",d)}Gr(u,_),f=null;for(var v in _)if(_.hasOwnProperty(v)){var S=_[v];v==="children"?typeof S=="string"?d.textContent!==S&&(_.suppressHydrationWarning!==!0&&Il(d.textContent,S,i),f=["children",S]):typeof S=="number"&&d.textContent!==""+S&&(_.suppressHydrationWarning!==!0&&Il(d.textContent,S,i),f=["children",""+S]):s.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&je("scroll",d)}switch(u){case"input":Ct(d),Yt(d,_,!0);break;case"textarea":Ct(d),He(d);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(d.onclick=Ll)}d=f,o.updateQueue=d,d!==null&&(o.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Nr(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=v.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=v.createElement(u,{is:d.is}):(i=v.createElement(u),u==="select"&&(v=i,d.multiple?v.multiple=!0:d.size&&(v.size=d.size))):i=v.createElementNS(i,u),i[zn]=o,i[co]=d,$g(i,o,!1,!1),o.stateNode=i;e:{switch(v=Ur(u,d),u){case"dialog":je("cancel",i),je("close",i),f=d;break;case"iframe":case"object":case"embed":je("load",i),f=d;break;case"video":case"audio":for(f=0;f<lo.length;f++)je(lo[f],i);f=d;break;case"source":je("error",i),f=d;break;case"img":case"image":case"link":je("error",i),je("load",i),f=d;break;case"details":je("toggle",i),f=d;break;case"input":Dn(i,d),f=$n(i,d),je("invalid",i);break;case"option":f=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},f=G({},d,{value:void 0}),je("invalid",i);break;case"textarea":qn(i,d),f=pn(i,d),je("invalid",i);break;default:f=d}Gr(u,f),S=f;for(_ in S)if(S.hasOwnProperty(_)){var L=S[_];_==="style"?al(i,L):_==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&ar(i,L)):_==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&ur(i,L):typeof L=="number"&&ur(i,""+L):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?L!=null&&_==="onScroll"&&je("scroll",i):L!=null&&D(i,_,L,v))}switch(u){case"input":Ct(i),Yt(i,d,!1);break;case"textarea":Ct(i),He(i);break;case"option":d.value!=null&&i.setAttribute("value",""+xe(d.value));break;case"select":i.multiple=!!d.multiple,_=d.value,_!=null?en(i,!!d.multiple,_,!1):d.defaultValue!=null&&en(i,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(i.onclick=Ll)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Et(o),null;case 6:if(i&&o.stateNode!=null)Qg(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(u=mr(_o.current),mr(Gn.current),Ol(o)){if(d=o.stateNode,u=o.memoizedProps,d[zn]=o,(_=d.nodeValue!==u)&&(i=Kt,i!==null))switch(i.tag){case 3:Il(d.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Il(d.nodeValue,u,(i.mode&1)!==0)}_&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[zn]=o,o.stateNode=d}return Et(o),null;case 13:if(be(Ye),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Be&&Zt!==null&&o.mode&1&&!(o.flags&128))tg(),Jr(),o.flags|=98560,_=!1;else if(_=Ol(o),d!==null&&d.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[zn]=o}else Jr(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Et(o),_=!1}else vn!==null&&(Wc(vn),vn=null),_=!0;if(!_)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(i===null||Ye.current&1?nt===0&&(nt=3):Bc())),o.updateQueue!==null&&(o.flags|=4),Et(o),null);case 4:return is(),Mc(i,o),i===null&&ao(o.stateNode.containerInfo),Et(o),null;case 10:return rc(o.type._context),Et(o),null;case 17:return Dt(o.type)&&Ml(),Et(o),null;case 19:if(be(Ye),_=o.memoizedState,_===null)return Et(o),null;if(d=(o.flags&128)!==0,v=_.rendering,v===null)if(d)xo(_,!1);else{if(nt!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(v=Wl(i),v!==null){for(o.flags|=128,xo(_,!1),d=v.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)_=u,i=d,_.flags&=14680066,v=_.alternate,v===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=v.childLanes,_.lanes=v.lanes,_.child=v.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=v.memoizedProps,_.memoizedState=v.memoizedState,_.updateQueue=v.updateQueue,_.type=v.type,i=v.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return We(Ye,Ye.current&1|2),o.child}i=i.sibling}_.tail!==null&&$e()>ls&&(o.flags|=128,d=!0,xo(_,!1),o.lanes=4194304)}else{if(!d)if(i=Wl(v),i!==null){if(o.flags|=128,d=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),xo(_,!0),_.tail===null&&_.tailMode==="hidden"&&!v.alternate&&!Be)return Et(o),null}else 2*$e()-_.renderingStartTime>ls&&u!==1073741824&&(o.flags|=128,d=!0,xo(_,!1),o.lanes=4194304);_.isBackwards?(v.sibling=o.child,o.child=v):(u=_.last,u!==null?u.sibling=v:o.child=v,_.last=v)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=$e(),o.sibling=null,u=Ye.current,We(Ye,d?u&1|2:u&1),o):(Et(o),null);case 22:case 23:return bc(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?Ht&1073741824&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Ny(i,o){switch(Qu(o),o.tag){case 1:return Dt(o.type)&&Ml(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return is(),be(At),be(mt),hc(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return uc(o),null;case 13:if(be(Ye),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Jr()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return be(Ye),null;case 4:return is(),null;case 10:return rc(o.type._context),null;case 22:case 23:return bc(),null;case 24:return null;default:return null}}var $l=!1,vt=!1,zy=typeof WeakSet=="function"?WeakSet:Set,le=null;function ss(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){Ze(i,o,d)}else u.current=null}function Pc(i,o,u){try{u()}catch(d){Ze(i,o,d)}}var Jg=!1;function Gy(i,o){if(bu=_l,i=Pf(),Ou(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var f=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var v=0,S=-1,L=-1,O=0,K=0,H=i,Y=null;t:for(;;){for(var se;H!==u||f!==0&&H.nodeType!==3||(S=v+f),H!==_||d!==0&&H.nodeType!==3||(L=v+d),H.nodeType===3&&(v+=H.nodeValue.length),(se=H.firstChild)!==null;)Y=H,H=se;for(;;){if(H===i)break t;if(Y===u&&++O===f&&(S=v),Y===_&&++K===d&&(L=v),(se=H.nextSibling)!==null)break;H=Y,Y=H.parentNode}H=se}u=S===-1||L===-1?null:{start:S,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(Bu={focusedElem:i,selectionRange:u},_l=!1,le=o;le!==null;)if(o=le,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,le=i;else for(;le!==null;){o=le;try{var ae=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ce=ae.memoizedProps,qe=ae.memoizedState,A=o.stateNode,M=A.getSnapshotBeforeUpdate(o.elementType===o.type?ce:xn(o.type,ce),qe);A.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var F=o.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Q){Ze(o,o.return,Q)}if(i=o.sibling,i!==null){i.return=o.return,le=i;break}le=o.return}return ae=Jg,Jg=!1,ae}function wo(i,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&i)===i){var _=f.destroy;f.destroy=void 0,_!==void 0&&Pc(o,u,_)}f=f.next}while(f!==d)}}function ql(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function Ac(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function ep(i){var o=i.alternate;o!==null&&(i.alternate=null,ep(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[zn],delete o[co],delete o[Zu],delete o[vy],delete o[xy])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function tp(i){return i.tag===5||i.tag===3||i.tag===4}function np(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||tp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Dc(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ll));else if(d!==4&&(i=i.child,i!==null))for(Dc(i,o,u),i=i.sibling;i!==null;)Dc(i,o,u),i=i.sibling}function Fc(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Fc(i,o,u),i=i.sibling;i!==null;)Fc(i,o,u),i=i.sibling}var ct=null,wn=!1;function Ni(i,o,u){for(u=u.child;u!==null;)ip(i,o,u),u=u.sibling}function ip(i,o,u){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(cl,u)}catch{}switch(u.tag){case 5:vt||ss(u,o);case 6:var d=ct,f=wn;ct=null,Ni(i,o,u),ct=d,wn=f,ct!==null&&(wn?(i=ct,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):ct.removeChild(u.stateNode));break;case 18:ct!==null&&(wn?(i=ct,u=u.stateNode,i.nodeType===8?Ku(i.parentNode,u):i.nodeType===1&&Ku(i,u),Js(i)):Ku(ct,u.stateNode));break;case 4:d=ct,f=wn,ct=u.stateNode.containerInfo,wn=!0,Ni(i,o,u),ct=d,wn=f;break;case 0:case 11:case 14:case 15:if(!vt&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var _=f,v=_.destroy;_=_.tag,v!==void 0&&(_&2||_&4)&&Pc(u,o,v),f=f.next}while(f!==d)}Ni(i,o,u);break;case 1:if(!vt&&(ss(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(S){Ze(u,o,S)}Ni(i,o,u);break;case 21:Ni(i,o,u);break;case 22:u.mode&1?(vt=(d=vt)||u.memoizedState!==null,Ni(i,o,u),vt=d):Ni(i,o,u);break;default:Ni(i,o,u)}}function rp(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new zy),o.forEach(function(d){var f=Ky.bind(null,i,d);u.has(d)||(u.add(d),d.then(f,f))})}}function Cn(i,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var f=u[d];try{var _=i,v=o,S=v;e:for(;S!==null;){switch(S.tag){case 5:ct=S.stateNode,wn=!1;break e;case 3:ct=S.stateNode.containerInfo,wn=!0;break e;case 4:ct=S.stateNode.containerInfo,wn=!0;break e}S=S.return}if(ct===null)throw Error(t(160));ip(_,v,f),ct=null,wn=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch(O){Ze(f,o,O)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)sp(o,i),o=o.sibling}function sp(i,o){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Cn(o,i),Xn(i),d&4){try{wo(3,i,i.return),ql(3,i)}catch(ce){Ze(i,i.return,ce)}try{wo(5,i,i.return)}catch(ce){Ze(i,i.return,ce)}}break;case 1:Cn(o,i),Xn(i),d&512&&u!==null&&ss(u,u.return);break;case 5:if(Cn(o,i),Xn(i),d&512&&u!==null&&ss(u,u.return),i.flags&32){var f=i.stateNode;try{ur(f,"")}catch(ce){Ze(i,i.return,ce)}}if(d&4&&(f=i.stateNode,f!=null)){var _=i.memoizedProps,v=u!==null?u.memoizedProps:_,S=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{S==="input"&&_.type==="radio"&&_.name!=null&&Qt(f,_),Ur(S,v);var O=Ur(S,_);for(v=0;v<L.length;v+=2){var K=L[v],H=L[v+1];K==="style"?al(f,H):K==="dangerouslySetInnerHTML"?ar(f,H):K==="children"?ur(f,H):D(f,K,H,O)}switch(S){case"input":gt(f,_);break;case"textarea":Qn(f,_);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!_.multiple;var se=_.value;se!=null?en(f,!!_.multiple,se,!1):Y!==!!_.multiple&&(_.defaultValue!=null?en(f,!!_.multiple,_.defaultValue,!0):en(f,!!_.multiple,_.multiple?[]:"",!1))}f[co]=_}catch(ce){Ze(i,i.return,ce)}}break;case 6:if(Cn(o,i),Xn(i),d&4){if(i.stateNode===null)throw Error(t(162));f=i.stateNode,_=i.memoizedProps;try{f.nodeValue=_}catch(ce){Ze(i,i.return,ce)}}break;case 3:if(Cn(o,i),Xn(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Js(o.containerInfo)}catch(ce){Ze(i,i.return,ce)}break;case 4:Cn(o,i),Xn(i);break;case 13:Cn(o,i),Xn(i),f=i.child,f.flags&8192&&(_=f.memoizedState!==null,f.stateNode.isHidden=_,!_||f.alternate!==null&&f.alternate.memoizedState!==null||(zc=$e())),d&4&&rp(i);break;case 22:if(K=u!==null&&u.memoizedState!==null,i.mode&1?(vt=(O=vt)||K,Cn(o,i),vt=O):Cn(o,i),Xn(i),d&8192){if(O=i.memoizedState!==null,(i.stateNode.isHidden=O)&&!K&&i.mode&1)for(le=i,K=i.child;K!==null;){for(H=le=K;le!==null;){switch(Y=le,se=Y.child,Y.tag){case 0:case 11:case 14:case 15:wo(4,Y,Y.return);break;case 1:ss(Y,Y.return);var ae=Y.stateNode;if(typeof ae.componentWillUnmount=="function"){d=Y,u=Y.return;try{o=d,ae.props=o.memoizedProps,ae.state=o.memoizedState,ae.componentWillUnmount()}catch(ce){Ze(d,u,ce)}}break;case 5:ss(Y,Y.return);break;case 22:if(Y.memoizedState!==null){ap(H);continue}}se!==null?(se.return=Y,le=se):ap(H)}K=K.sibling}e:for(K=null,H=i;;){if(H.tag===5){if(K===null){K=H;try{f=H.stateNode,O?(_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(S=H.stateNode,L=H.memoizedProps.style,v=L!=null&&L.hasOwnProperty("display")?L.display:null,S.style.display=zr("display",v))}catch(ce){Ze(i,i.return,ce)}}}else if(H.tag===6){if(K===null)try{H.stateNode.nodeValue=O?"":H.memoizedProps}catch(ce){Ze(i,i.return,ce)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===i)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===i)break e;for(;H.sibling===null;){if(H.return===null||H.return===i)break e;K===H&&(K=null),H=H.return}K===H&&(K=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:Cn(o,i),Xn(i),d&4&&rp(i);break;case 21:break;default:Cn(o,i),Xn(i)}}function Xn(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(tp(u)){var d=u;break e}u=u.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(ur(f,""),d.flags&=-33);var _=np(i);Fc(i,_,f);break;case 3:case 4:var v=d.stateNode.containerInfo,S=np(i);Dc(i,S,v);break;default:throw Error(t(161))}}catch(L){Ze(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Uy(i,o,u){le=i,op(i)}function op(i,o,u){for(var d=(i.mode&1)!==0;le!==null;){var f=le,_=f.child;if(f.tag===22&&d){var v=f.memoizedState!==null||$l;if(!v){var S=f.alternate,L=S!==null&&S.memoizedState!==null||vt;S=$l;var O=vt;if($l=v,(vt=L)&&!O)for(le=f;le!==null;)v=le,L=v.child,v.tag===22&&v.memoizedState!==null?up(f):L!==null?(L.return=v,le=L):up(f);for(;_!==null;)le=_,op(_),_=_.sibling;le=f,$l=S,vt=O}lp(i)}else f.subtreeFlags&8772&&_!==null?(_.return=f,le=_):lp(i)}}function lp(i){for(;le!==null;){var o=le;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:vt||ql(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!vt)if(u===null)d.componentDidMount();else{var f=o.elementType===o.type?u.memoizedProps:xn(o.type,u.memoizedProps);d.componentDidUpdate(f,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&ag(o,_,d);break;case 3:var v=o.updateQueue;if(v!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}ag(o,v,u)}break;case 5:var S=o.stateNode;if(u===null&&o.flags&4){u=S;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var O=o.alternate;if(O!==null){var K=O.memoizedState;if(K!==null){var H=K.dehydrated;H!==null&&Js(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}vt||o.flags&512&&Ac(o)}catch(Y){Ze(o,o.return,Y)}}if(o===i){le=null;break}if(u=o.sibling,u!==null){u.return=o.return,le=u;break}le=o.return}}function ap(i){for(;le!==null;){var o=le;if(o===i){le=null;break}var u=o.sibling;if(u!==null){u.return=o.return,le=u;break}le=o.return}}function up(i){for(;le!==null;){var o=le;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{ql(4,o)}catch(L){Ze(o,u,L)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var f=o.return;try{d.componentDidMount()}catch(L){Ze(o,f,L)}}var _=o.return;try{Ac(o)}catch(L){Ze(o,_,L)}break;case 5:var v=o.return;try{Ac(o)}catch(L){Ze(o,v,L)}}}catch(L){Ze(o,o.return,L)}if(o===i){le=null;break}var S=o.sibling;if(S!==null){S.return=o.return,le=S;break}le=o.return}}var Xy=Math.ceil,Ql=k.ReactCurrentDispatcher,Oc=k.ReactCurrentOwner,ln=k.ReactCurrentBatchConfig,Le=0,st=null,Je=null,ht=0,Ht=0,os=Pi(0),nt=0,Co=null,Er=0,Jl=0,Nc=0,So=null,Ot=null,zc=0,ls=1/0,li=null,ea=!1,Gc=null,zi=null,ta=!1,Gi=null,na=0,To=0,Uc=null,ia=-1,ra=0;function Lt(){return Le&6?$e():ia!==-1?ia:ia=$e()}function Ui(i){return i.mode&1?Le&2&&ht!==0?ht&-ht:Cy.transition!==null?(ra===0&&(ra=tf()),ra):(i=Ne,i!==0||(i=window.event,i=i===void 0?16:hf(i.type)),i):1}function Sn(i,o,u,d){if(50<To)throw To=0,Uc=null,Error(t(185));Zs(i,u,d),(!(Le&2)||i!==st)&&(i===st&&(!(Le&2)&&(Jl|=u),nt===4&&Xi(i,ht)),Nt(i,d),u===1&&Le===0&&!(o.mode&1)&&(ls=$e()+500,Al&&Di()))}function Nt(i,o){var u=i.callbackNode;C0(i,o);var d=fl(i,i===st?ht:0);if(d===0)u!==null&&Qd(u),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(u!=null&&Qd(u),o===1)i.tag===0?wy(hp.bind(null,i)):$f(hp.bind(null,i)),yy(function(){!(Le&6)&&Di()}),u=null;else{switch(nf(d)){case 1:u=yu;break;case 4:u=Jd;break;case 16:u=ul;break;case 536870912:u=ef;break;default:u=ul}u=Ep(u,cp.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function cp(i,o){if(ia=-1,ra=0,Le&6)throw Error(t(327));var u=i.callbackNode;if(as()&&i.callbackNode!==u)return null;var d=fl(i,i===st?ht:0);if(d===0)return null;if(d&30||d&i.expiredLanes||o)o=sa(i,d);else{o=d;var f=Le;Le|=2;var _=fp();(st!==i||ht!==o)&&(li=null,ls=$e()+500,xr(i,o));do try{by();break}catch(S){dp(i,S)}while(!0);ic(),Ql.current=_,Le=f,Je!==null?o=0:(st=null,ht=0,o=nt)}if(o!==0){if(o===2&&(f=Eu(i),f!==0&&(d=f,o=Xc(i,f))),o===1)throw u=Co,xr(i,0),Xi(i,d),Nt(i,$e()),u;if(o===6)Xi(i,d);else{if(f=i.current.alternate,!(d&30)&&!Wy(f)&&(o=sa(i,d),o===2&&(_=Eu(i),_!==0&&(d=_,o=Xc(i,_))),o===1))throw u=Co,xr(i,0),Xi(i,d),Nt(i,$e()),u;switch(i.finishedWork=f,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:wr(i,Ot,li);break;case 3:if(Xi(i,d),(d&130023424)===d&&(o=zc+500-$e(),10<o)){if(fl(i,0)!==0)break;if(f=i.suspendedLanes,(f&d)!==d){Lt(),i.pingedLanes|=i.suspendedLanes&f;break}i.timeoutHandle=Vu(wr.bind(null,i,Ot,li),o);break}wr(i,Ot,li);break;case 4:if(Xi(i,d),(d&4194240)===d)break;for(o=i.eventTimes,f=-1;0<d;){var v=31-yn(d);_=1<<v,v=o[v],v>f&&(f=v),d&=~_}if(d=f,d=$e()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Xy(d/1960))-d,10<d){i.timeoutHandle=Vu(wr.bind(null,i,Ot,li),d);break}wr(i,Ot,li);break;case 5:wr(i,Ot,li);break;default:throw Error(t(329))}}}return Nt(i,$e()),i.callbackNode===u?cp.bind(null,i):null}function Xc(i,o){var u=So;return i.current.memoizedState.isDehydrated&&(xr(i,o).flags|=256),i=sa(i,o),i!==2&&(o=Ot,Ot=u,o!==null&&Wc(o)),i}function Wc(i){Ot===null?Ot=i:Ot.push.apply(Ot,i)}function Wy(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var f=u[d],_=f.getSnapshot;f=f.value;try{if(!En(_(),f))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Xi(i,o){for(o&=~Nc,o&=~Jl,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-yn(o),d=1<<u;i[u]=-1,o&=~d}}function hp(i){if(Le&6)throw Error(t(327));as();var o=fl(i,0);if(!(o&1))return Nt(i,$e()),null;var u=sa(i,o);if(i.tag!==0&&u===2){var d=Eu(i);d!==0&&(o=d,u=Xc(i,d))}if(u===1)throw u=Co,xr(i,0),Xi(i,o),Nt(i,$e()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,wr(i,Ot,li),Nt(i,$e()),null}function jc(i,o){var u=Le;Le|=1;try{return i(o)}finally{Le=u,Le===0&&(ls=$e()+500,Al&&Di())}}function vr(i){Gi!==null&&Gi.tag===0&&!(Le&6)&&as();var o=Le;Le|=1;var u=ln.transition,d=Ne;try{if(ln.transition=null,Ne=1,i)return i()}finally{Ne=d,ln.transition=u,Le=o,!(Le&6)&&Di()}}function bc(){Ht=os.current,be(os)}function xr(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,my(u)),Je!==null)for(u=Je.return;u!==null;){var d=u;switch(Qu(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Ml();break;case 3:is(),be(At),be(mt),hc();break;case 5:uc(d);break;case 4:is();break;case 13:be(Ye);break;case 19:be(Ye);break;case 10:rc(d.type._context);break;case 22:case 23:bc()}u=u.return}if(st=i,Je=i=Wi(i.current,null),ht=Ht=o,nt=0,Co=null,Nc=Jl=Er=0,Ot=So=null,_r!==null){for(o=0;o<_r.length;o++)if(u=_r[o],d=u.interleaved,d!==null){u.interleaved=null;var f=d.next,_=u.pending;if(_!==null){var v=_.next;_.next=f,d.next=v}u.pending=d}_r=null}return i}function dp(i,o){do{var u=Je;try{if(ic(),jl.current=Vl,bl){for(var d=Ve.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}bl=!1}if(yr=0,rt=tt=Ve=null,mo=!1,yo=0,Oc.current=null,u===null||u.return===null){nt=1,Co=o,Je=null;break}e:{var _=i,v=u.return,S=u,L=o;if(o=ht,S.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var O=L,K=S,H=K.tag;if(!(K.mode&1)&&(H===0||H===11||H===15)){var Y=K.alternate;Y?(K.updateQueue=Y.updateQueue,K.memoizedState=Y.memoizedState,K.lanes=Y.lanes):(K.updateQueue=null,K.memoizedState=null)}var se=zg(v);if(se!==null){se.flags&=-257,Gg(se,v,S,_,o),se.mode&1&&Ng(_,O,o),o=se,L=O;var ae=o.updateQueue;if(ae===null){var ce=new Set;ce.add(L),o.updateQueue=ce}else ae.add(L);break e}else{if(!(o&1)){Ng(_,O,o),Bc();break e}L=Error(t(426))}}else if(Be&&S.mode&1){var qe=zg(v);if(qe!==null){!(qe.flags&65536)&&(qe.flags|=256),Gg(qe,v,S,_,o),tc(rs(L,S));break e}}_=L=rs(L,S),nt!==4&&(nt=2),So===null?So=[_]:So.push(_),_=v;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var A=Fg(_,L,o);lg(_,A);break e;case 1:S=L;var M=_.type,F=_.stateNode;if(!(_.flags&128)&&(typeof M.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(zi===null||!zi.has(F)))){_.flags|=65536,o&=-o,_.lanes|=o;var Q=Og(_,S,o);lg(_,Q);break e}}_=_.return}while(_!==null)}pp(u)}catch(de){o=de,Je===u&&u!==null&&(Je=u=u.return);continue}break}while(!0)}function fp(){var i=Ql.current;return Ql.current=Vl,i===null?Vl:i}function Bc(){(nt===0||nt===3||nt===2)&&(nt=4),st===null||!(Er&268435455)&&!(Jl&268435455)||Xi(st,ht)}function sa(i,o){var u=Le;Le|=2;var d=fp();(st!==i||ht!==o)&&(li=null,xr(i,o));do try{jy();break}catch(f){dp(i,f)}while(!0);if(ic(),Le=u,Ql.current=d,Je!==null)throw Error(t(261));return st=null,ht=0,nt}function jy(){for(;Je!==null;)gp(Je)}function by(){for(;Je!==null&&!g0();)gp(Je)}function gp(i){var o=yp(i.alternate,i,Ht);i.memoizedProps=i.pendingProps,o===null?pp(i):Je=o,Oc.current=null}function pp(i){var o=i;do{var u=o.alternate;if(i=o.return,o.flags&32768){if(u=Ny(u,o),u!==null){u.flags&=32767,Je=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{nt=6,Je=null;return}}else if(u=Oy(u,o,Ht),u!==null){Je=u;return}if(o=o.sibling,o!==null){Je=o;return}Je=o=i}while(o!==null);nt===0&&(nt=5)}function wr(i,o,u){var d=Ne,f=ln.transition;try{ln.transition=null,Ne=1,By(i,o,u,d)}finally{ln.transition=f,Ne=d}return null}function By(i,o,u,d){do as();while(Gi!==null);if(Le&6)throw Error(t(327));u=i.finishedWork;var f=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=u.lanes|u.childLanes;if(S0(i,_),i===st&&(Je=st=null,ht=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||ta||(ta=!0,Ep(ul,function(){return as(),null})),_=(u.flags&15990)!==0,u.subtreeFlags&15990||_){_=ln.transition,ln.transition=null;var v=Ne;Ne=1;var S=Le;Le|=4,Oc.current=null,Gy(i,u),sp(u,i),cy(Bu),_l=!!bu,Bu=bu=null,i.current=u,Uy(u),p0(),Le=S,Ne=v,ln.transition=_}else i.current=u;if(ta&&(ta=!1,Gi=i,na=f),_=i.pendingLanes,_===0&&(zi=null),y0(u.stateNode),Nt(i,$e()),o!==null)for(d=i.onRecoverableError,u=0;u<o.length;u++)f=o[u],d(f.value,{componentStack:f.stack,digest:f.digest});if(ea)throw ea=!1,i=Gc,Gc=null,i;return na&1&&i.tag!==0&&as(),_=i.pendingLanes,_&1?i===Uc?To++:(To=0,Uc=i):To=0,Di(),null}function as(){if(Gi!==null){var i=nf(na),o=ln.transition,u=Ne;try{if(ln.transition=null,Ne=16>i?16:i,Gi===null)var d=!1;else{if(i=Gi,Gi=null,na=0,Le&6)throw Error(t(331));var f=Le;for(Le|=4,le=i.current;le!==null;){var _=le,v=_.child;if(le.flags&16){var S=_.deletions;if(S!==null){for(var L=0;L<S.length;L++){var O=S[L];for(le=O;le!==null;){var K=le;switch(K.tag){case 0:case 11:case 15:wo(8,K,_)}var H=K.child;if(H!==null)H.return=K,le=H;else for(;le!==null;){K=le;var Y=K.sibling,se=K.return;if(ep(K),K===O){le=null;break}if(Y!==null){Y.return=se,le=Y;break}le=se}}}var ae=_.alternate;if(ae!==null){var ce=ae.child;if(ce!==null){ae.child=null;do{var qe=ce.sibling;ce.sibling=null,ce=qe}while(ce!==null)}}le=_}}if(_.subtreeFlags&2064&&v!==null)v.return=_,le=v;else e:for(;le!==null;){if(_=le,_.flags&2048)switch(_.tag){case 0:case 11:case 15:wo(9,_,_.return)}var A=_.sibling;if(A!==null){A.return=_.return,le=A;break e}le=_.return}}var M=i.current;for(le=M;le!==null;){v=le;var F=v.child;if(v.subtreeFlags&2064&&F!==null)F.return=v,le=F;else e:for(v=M;le!==null;){if(S=le,S.flags&2048)try{switch(S.tag){case 0:case 11:case 15:ql(9,S)}}catch(de){Ze(S,S.return,de)}if(S===v){le=null;break e}var Q=S.sibling;if(Q!==null){Q.return=S.return,le=Q;break e}le=S.return}}if(Le=f,Di(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(cl,i)}catch{}d=!0}return d}finally{Ne=u,ln.transition=o}}return!1}function _p(i,o,u){o=rs(u,o),o=Fg(i,o,1),i=Oi(i,o,1),o=Lt(),i!==null&&(Zs(i,1,o),Nt(i,o))}function Ze(i,o,u){if(i.tag===3)_p(i,i,u);else for(;o!==null;){if(o.tag===3){_p(o,i,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(zi===null||!zi.has(d))){i=rs(u,i),i=Og(o,i,1),o=Oi(o,i,1),i=Lt(),o!==null&&(Zs(o,1,i),Nt(o,i));break}}o=o.return}}function Yy(i,o,u){var d=i.pingCache;d!==null&&d.delete(o),o=Lt(),i.pingedLanes|=i.suspendedLanes&u,st===i&&(ht&u)===u&&(nt===4||nt===3&&(ht&130023424)===ht&&500>$e()-zc?xr(i,0):Nc|=u),Nt(i,o)}function mp(i,o){o===0&&(i.mode&1?(o=dl,dl<<=1,!(dl&130023424)&&(dl=4194304)):o=1);var u=Lt();i=ri(i,o),i!==null&&(Zs(i,o,u),Nt(i,u))}function Vy(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),mp(i,u)}function Ky(i,o){var u=0;switch(i.tag){case 13:var d=i.stateNode,f=i.memoizedState;f!==null&&(u=f.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),mp(i,u)}var yp;yp=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||At.current)Ft=!0;else{if(!(i.lanes&u)&&!(o.flags&128))return Ft=!1,Fy(i,o,u);Ft=!!(i.flags&131072)}else Ft=!1,Be&&o.flags&1048576&&qf(o,Fl,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Hl(i,o),i=o.pendingProps;var f=$r(o,mt.current);ns(o,u),f=gc(null,o,d,i,f,u);var _=pc();return o.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Dt(d)?(_=!0,Pl(o)):_=!1,o.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,lc(o),f.updater=Kl,o.stateNode=f,f._reactInternals=o,xc(o,d,i,u),o=Tc(null,o,d,!0,_,u)):(o.tag=0,Be&&_&&qu(o),It(null,o,f,u),o=o.child),o;case 16:d=o.elementType;e:{switch(Hl(i,o),i=o.pendingProps,f=d._init,d=f(d._payload),o.type=d,f=o.tag=Hy(d),i=xn(d,i),f){case 0:o=Sc(null,o,d,i,u);break e;case 1:o=Bg(null,o,d,i,u);break e;case 11:o=Ug(null,o,d,i,u);break e;case 14:o=Xg(null,o,d,xn(d.type,i),u);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:xn(d,f),Sc(i,o,d,f,u);case 1:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:xn(d,f),Bg(i,o,d,f,u);case 3:e:{if(Yg(o),i===null)throw Error(t(387));d=o.pendingProps,_=o.memoizedState,f=_.element,og(i,o),Xl(o,d,null,u);var v=o.memoizedState;if(d=v.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){f=rs(Error(t(423)),o),o=Vg(i,o,d,u,f);break e}else if(d!==f){f=rs(Error(t(424)),o),o=Vg(i,o,d,u,f);break e}else for(Zt=Mi(o.stateNode.containerInfo.firstChild),Kt=o,Be=!0,vn=null,u=rg(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Jr(),d===f){o=oi(i,o,u);break e}It(i,o,d,u)}o=o.child}return o;case 5:return ug(o),i===null&&ec(o),d=o.type,f=o.pendingProps,_=i!==null?i.memoizedProps:null,v=f.children,Yu(d,f)?v=null:_!==null&&Yu(d,_)&&(o.flags|=32),bg(i,o),It(i,o,v,u),o.child;case 6:return i===null&&ec(o),null;case 13:return Kg(i,o,u);case 4:return ac(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=es(o,null,d,u):It(i,o,d,u),o.child;case 11:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:xn(d,f),Ug(i,o,d,f,u);case 7:return It(i,o,o.pendingProps,u),o.child;case 8:return It(i,o,o.pendingProps.children,u),o.child;case 12:return It(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,f=o.pendingProps,_=o.memoizedProps,v=f.value,We(zl,d._currentValue),d._currentValue=v,_!==null)if(En(_.value,v)){if(_.children===f.children&&!At.current){o=oi(i,o,u);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var S=_.dependencies;if(S!==null){v=_.child;for(var L=S.firstContext;L!==null;){if(L.context===d){if(_.tag===1){L=si(-1,u&-u),L.tag=2;var O=_.updateQueue;if(O!==null){O=O.shared;var K=O.pending;K===null?L.next=L:(L.next=K.next,K.next=L),O.pending=L}}_.lanes|=u,L=_.alternate,L!==null&&(L.lanes|=u),sc(_.return,u,o),S.lanes|=u;break}L=L.next}}else if(_.tag===10)v=_.type===o.type?null:_.child;else if(_.tag===18){if(v=_.return,v===null)throw Error(t(341));v.lanes|=u,S=v.alternate,S!==null&&(S.lanes|=u),sc(v,u,o),v=_.sibling}else v=_.child;if(v!==null)v.return=_;else for(v=_;v!==null;){if(v===o){v=null;break}if(_=v.sibling,_!==null){_.return=v.return,v=_;break}v=v.return}_=v}It(i,o,f.children,u),o=o.child}return o;case 9:return f=o.type,d=o.pendingProps.children,ns(o,u),f=sn(f),d=d(f),o.flags|=1,It(i,o,d,u),o.child;case 14:return d=o.type,f=xn(d,o.pendingProps),f=xn(d.type,f),Xg(i,o,d,f,u);case 15:return Wg(i,o,o.type,o.pendingProps,u);case 17:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:xn(d,f),Hl(i,o),o.tag=1,Dt(d)?(i=!0,Pl(o)):i=!1,ns(o,u),Ag(o,d,f),xc(o,d,f,u),Tc(null,o,d,!0,i,u);case 19:return Hg(i,o,u);case 22:return jg(i,o,u)}throw Error(t(156,o.tag))};function Ep(i,o){return qd(i,o)}function Zy(i,o,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(i,o,u,d){return new Zy(i,o,u,d)}function Yc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Hy(i){if(typeof i=="function")return Yc(i)?1:0;if(i!=null){if(i=i.$$typeof,i===$)return 11;if(i===ee)return 14}return 2}function Wi(i,o){var u=i.alternate;return u===null?(u=an(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function oa(i,o,u,d,f,_){var v=2;if(d=i,typeof i=="function")Yc(i)&&(v=1);else if(typeof i=="string")v=5;else e:switch(i){case V:return Cr(u.children,f,_,o);case U:v=8,f|=8;break;case b:return i=an(12,u,o,f|2),i.elementType=b,i.lanes=_,i;case te:return i=an(13,u,o,f),i.elementType=te,i.lanes=_,i;case J:return i=an(19,u,o,f),i.elementType=J,i.lanes=_,i;case Z:return la(u,f,_,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:v=10;break e;case ie:v=9;break e;case $:v=11;break e;case ee:v=14;break e;case ne:v=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=an(v,u,o,f),o.elementType=i,o.type=d,o.lanes=_,o}function Cr(i,o,u,d){return i=an(7,i,d,o),i.lanes=u,i}function la(i,o,u,d){return i=an(22,i,d,o),i.elementType=Z,i.lanes=u,i.stateNode={isHidden:!1},i}function Vc(i,o,u){return i=an(6,i,null,o),i.lanes=u,i}function Kc(i,o,u){return o=an(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function $y(i,o,u,d,f){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vu(0),this.expirationTimes=vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vu(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Zc(i,o,u,d,f,_,v,S,L){return i=new $y(i,o,u,S,L),o===1?(o=1,_===!0&&(o|=8)):o=0,_=an(3,null,null,o),i.current=_,_.stateNode=i,_.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},lc(_),i}function qy(i,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:d==null?null:""+d,children:i,containerInfo:o,implementation:u}}function vp(i){if(!i)return Ai;i=i._reactInternals;e:{if(hr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Dt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Dt(u))return Zf(i,u,o)}return o}function xp(i,o,u,d,f,_,v,S,L){return i=Zc(u,d,!0,i,f,_,v,S,L),i.context=vp(null),u=i.current,d=Lt(),f=Ui(u),_=si(d,f),_.callback=o??null,Oi(u,_,f),i.current.lanes=f,Zs(i,f,d),Nt(i,d),i}function aa(i,o,u,d){var f=o.current,_=Lt(),v=Ui(f);return u=vp(u),o.context===null?o.context=u:o.pendingContext=u,o=si(_,v),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=Oi(f,o,v),i!==null&&(Sn(i,f,v,_),Ul(i,f,v)),v}function ua(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function wp(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Hc(i,o){wp(i,o),(i=i.alternate)&&wp(i,o)}var Cp=typeof reportError=="function"?reportError:function(i){console.error(i)};function $c(i){this._internalRoot=i}ca.prototype.render=$c.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));aa(i,o,null,null)},ca.prototype.unmount=$c.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;vr(function(){aa(null,i,null,null)}),o[ei]=null}};function ca(i){this._internalRoot=i}ca.prototype.unstable_scheduleHydration=function(i){if(i){var o=of();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Ii.length&&o!==0&&o<Ii[u].priority;u++);Ii.splice(u,0,i),u===0&&uf(i)}};function qc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ha(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Sp(){}function Qy(i,o,u,d,f){if(f){if(typeof d=="function"){var _=d;d=function(){var O=ua(v);_.call(O)}}var v=xp(o,d,i,0,null,!1,!1,"",Sp);return i._reactRootContainer=v,i[ei]=v.current,ao(i.nodeType===8?i.parentNode:i),vr(),v}for(;f=i.lastChild;)i.removeChild(f);if(typeof d=="function"){var S=d;d=function(){var O=ua(L);S.call(O)}}var L=Zc(i,0,!1,null,null,!1,!1,"",Sp);return i._reactRootContainer=L,i[ei]=L.current,ao(i.nodeType===8?i.parentNode:i),vr(function(){aa(o,L,u,d)}),L}function da(i,o,u,d,f){var _=u._reactRootContainer;if(_){var v=_;if(typeof f=="function"){var S=f;f=function(){var L=ua(v);S.call(L)}}aa(o,v,i,f)}else v=Qy(u,o,i,f,d);return ua(v)}rf=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ks(o.pendingLanes);u!==0&&(xu(o,u|1),Nt(o,$e()),!(Le&6)&&(ls=$e()+500,Di()))}break;case 13:vr(function(){var d=ri(i,1);if(d!==null){var f=Lt();Sn(d,i,1,f)}}),Hc(i,1)}},wu=function(i){if(i.tag===13){var o=ri(i,134217728);if(o!==null){var u=Lt();Sn(o,i,134217728,u)}Hc(i,134217728)}},sf=function(i){if(i.tag===13){var o=Ui(i),u=ri(i,o);if(u!==null){var d=Lt();Sn(u,i,o,d)}Hc(i,o)}},of=function(){return Ne},lf=function(i,o){var u=Ne;try{return Ne=i,o()}finally{Ne=u}},bs=function(i,o,u){switch(o){case"input":if(gt(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==i&&d.form===i.form){var f=kl(d);if(!f)throw Error(t(90));An(d),gt(d,f)}}}break;case"textarea":Qn(i,u);break;case"select":o=u.value,o!=null&&en(i,!!u.multiple,o,!1)}},Ys=jc,St=vr;var Jy={usingClientEntryPoint:!1,Events:[ho,Zr,kl,Ci,Bs,jc]},Ro={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e1={bundleType:Ro.bundleType,version:Ro.version,rendererPackageName:Ro.rendererPackageName,rendererConfig:Ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Hd(i),i===null?null:i.stateNode},findFiberByHostInstance:Ro.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fa.isDisabled&&fa.supportsFiber)try{cl=fa.inject(e1),Nn=fa}catch{}}return zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jy,zt.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qc(o))throw Error(t(200));return qy(i,o,null,u)},zt.createRoot=function(i,o){if(!qc(i))throw Error(t(299));var u=!1,d="",f=Cp;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(f=o.onRecoverableError)),o=Zc(i,1,!1,null,null,u,!1,d,f),i[ei]=o.current,ao(i.nodeType===8?i.parentNode:i),new $c(o)},zt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Hd(o),i=i===null?null:i.stateNode,i},zt.flushSync=function(i){return vr(i)},zt.hydrate=function(i,o,u){if(!ha(o))throw Error(t(200));return da(null,i,o,!0,u)},zt.hydrateRoot=function(i,o,u){if(!qc(i))throw Error(t(405));var d=u!=null&&u.hydratedSources||null,f=!1,_="",v=Cp;if(u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(v=u.onRecoverableError)),o=xp(o,null,i,1,u??null,f,!1,_,v),i[ei]=o.current,ao(i),d)for(i=0;i<d.length;i++)u=d[i],f=u._getVersion,f=f(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,f]:o.mutableSourceEagerHydrationData.push(u,f);return new ca(o)},zt.render=function(i,o,u){if(!ha(o))throw Error(t(200));return da(null,i,o,!1,u)},zt.unmountComponentAtNode=function(i){if(!ha(i))throw Error(t(40));return i._reactRootContainer?(vr(function(){da(null,null,i,!1,function(){i._reactRootContainer=null,i[ei]=null})}),!0):!1},zt.unstable_batchedUpdates=jc,zt.unstable_renderSubtreeIntoContainer=function(i,o,u,d){if(!ha(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return da(i,o,u,!1,d)},zt.version="18.3.1-next-f1338f8080-20240426",zt}var Dp;function c1(){if(Dp)return eh.exports;Dp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),eh.exports=u1(),eh.exports}var Fp;function h1(){if(Fp)return ga;Fp=1;var r=c1();return ga.createRoot=r.createRoot,ga.hydrateRoot=r.hydrateRoot,ga}var d1=h1();class Zn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Ms={PROPERTYCHANGE:"propertychange"};class Za{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function f1(r,e,t){let n,s;t=t||Ji;let l=0,a=r.length,c=!1;for(;l<a;)n=l+(a-l>>1),s=+t(r[n],e),s<0?l=n+1:(a=n,c=!s);return c?l:~l}function Ji(r,e){return r>e?1:r<e?-1:0}function g1(r,e){return r<e?1:r>e?-1:0}function Jh(r,e,t){if(r[0]<=e)return 0;const n=r.length;if(e<=r[n-1])return n-1;if(typeof t=="function"){for(let s=1;s<n;++s){const l=r[s];if(l===e)return s;if(l<e)return t(e,r[s-1],l)>0?s-1:s}return n-1}if(t>0){for(let s=1;s<n;++s)if(r[s]<e)return s-1;return n-1}if(t<0){for(let s=1;s<n;++s)if(r[s]<=e)return s;return n-1}for(let s=1;s<n;++s){if(r[s]==e)return s;if(r[s]<e)return r[s-1]-e<e-r[s]?s-1:s}return n-1}function p1(r,e,t){for(;e<t;){const n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function Vn(r,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let s=0;s<n;s++)r[r.length]=t[s]}function sr(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function _1(r,e,t){const n=e;return r.every(function(s,l){if(l===0)return!0;const a=n(r[l-1],s);return!(a>0||a===0)})}function Ps(){return!0}function Us(){return!1}function As(){}function G_(r){let e,t,n;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==n||!sr(s,t))&&(n=this,t=s,e=r.apply(this,arguments)),e}}function m1(r){function e(){let t;try{t=r()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Jo(r){for(const e in r)delete r[e]}function Ds(r){let e;for(e in r)return!1;return!e}class Ha extends Za{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),s=n[e]||(n[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const l=t?new Zn(e):e;l.target||(l.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});n in a||(a[n]=0,c[n]=0),++a[n];let h;for(let g=0,p=s.length;g<p;++g)if("handleEvent"in s[g]?h=s[g].handleEvent(l):h=s[g].call(this,l),h===!1||l.propagationStopped){h=!1;break}if(--a[n]===0){let g=c[n];for(delete c[n];g--;)this.removeEventListener(n,As);delete a[n]}return h}disposeInternal(){this.listeners_&&Jo(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const s=n.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[s]=As,++this.pendingRemovals_[e]):(n.splice(s,1),n.length===0&&delete this.listeners_[e]))}}const Ee={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ie(r,e,t,n,s){if(s){const a=t;t=function(){r.removeEventListener(e,t),a.apply(n??this,arguments)}}else n&&n!==r&&(t=t.bind(n));const l={target:r,type:e,listener:t};return r.addEventListener(e,t),l}function Pa(r,e,t,n){return Ie(r,e,t,n,!0)}function Xe(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Jo(r))}class el extends Ha{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ee.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Ie(this,e[l],t);return s}return Ie(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const s=e.length;n=new Array(s);for(let l=0;l<s;++l)n[l]=Pa(this,e[l],t)}else n=Pa(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)y1(n);else if(Array.isArray(e))for(let s=0,l=e.length;s<l;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}el.prototype.on;el.prototype.once;el.prototype.un;function y1(r){if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)Xe(r[e]);else Xe(r)}function Pe(){throw new Error("Unimplemented abstract method.")}let E1=0;function Fe(r){return r.ol_uid||(r.ol_uid=String(++E1))}class Op extends Zn{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class Hn extends el{constructor(e){super(),this.on,this.once,this.un,Fe(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new Op(n,e,t)),n=Ms.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Op(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const s=this.values_||(this.values_={});if(n)s[e]=t;else{const l=s[e];s[e]=t,l!==t&&this.notify(e,l)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],Ds(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const Gt={ADD:"add",REMOVE:"remove"},Np={LENGTH:"length"};class pa extends Zn{constructor(e,t,n){super(e),this.element=t,this.index=n}}class Bn extends Hn{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Np.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new pa(Gt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new pa(Gt.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new pa(Gt.REMOVE,s,e)),this.dispatchEvent(new pa(Gt.ADD,t,e))}updateLength_(){this.set(Np.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}function Ae(r,e){if(!r)throw new Error(e)}class Ir extends Hn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Ir(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Xe(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ie(e,Ee.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?v1(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function v1(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(Ae(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}new Array(6);function Mn(){return[1,0,0,1,0,0]}function x1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function at(r,e){const t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function _i(r,e,t,n,s,l,a,c){const h=Math.sin(l),g=Math.cos(l);return r[0]=n*g,r[1]=s*h,r[2]=-n*h,r[3]=s*g,r[4]=a*n*g-c*n*h+e,r[5]=a*s*h+c*s*g+t,r}function U_(r,e){const t=w1(e);Ae(t!==0,"Transformation matrix cannot be inverted");const n=e[0],s=e[1],l=e[2],a=e[3],c=e[4],h=e[5];return r[0]=a/t,r[1]=-s/t,r[2]=-l/t,r[3]=n/t,r[4]=(l*h-a*c)/t,r[5]=-(n*h-s*c)/t,r}function w1(r){return r[0]*r[3]-r[1]*r[2]}const zp=[1e6,1e6,1e6,1e6,2,2];function C1(r){return"matrix("+r.map((t,n)=>Math.round(t*zp[n])/zp[n]).join(", ")+")"}const lt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Lh(r){const e=qt();for(let t=0,n=r.length;t<n;++t)Go(e,r[t]);return e}function ed(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function X_(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function Fr(r,e,t){let n,s;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?s=r[1]-t:r[3]<t?s=t-r[3]:s=0,n*n+s*s}function Fs(r,e){return td(r,e[0],e[1])}function xs(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function td(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function kh(r,e){const t=r[0],n=r[1],s=r[2],l=r[3],a=e[0],c=e[1];let h=lt.UNKNOWN;return a<t?h=h|lt.LEFT:a>s&&(h=h|lt.RIGHT),c<n?h=h|lt.BELOW:c>l&&(h=h|lt.ABOVE),h===lt.UNKNOWN&&(h=lt.INTERSECTING),h}function qt(){return[1/0,1/0,-1/0,-1/0]}function mi(r,e,t,n,s){return s?(s[0]=r,s[1]=e,s[2]=t,s[3]=n,s):[r,e,t,n]}function tl(r){return mi(1/0,1/0,-1/0,-1/0,r)}function W_(r,e){const t=r[0],n=r[1];return mi(t,n,t,n,e)}function nd(r,e,t,n,s){const l=tl(s);return j_(l,r,e,t,n)}function Uo(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function id(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function Go(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function j_(r,e,t,n,s){for(;t<n;t+=s)S1(r,e[t],e[t+1]);return r}function S1(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function rd(r,e){let t;return t=e($a(r)),t||(t=e(qa(r)),t)||(t=e(Qa(r)),t)||(t=e(yi(r)),t)?t:!1}function Xo(r){let e=0;return Ja(r)||(e=ke(r)*ut(r)),e}function $a(r){return[r[0],r[1]]}function qa(r){return[r[2],r[1]]}function ir(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function T1(r,e){let t;if(e==="bottom-left")t=$a(r);else if(e==="bottom-right")t=qa(r);else if(e==="top-left")t=yi(r);else if(e==="top-right")t=Qa(r);else throw new Error("Invalid corner");return t}function Mh(r,e,t,n,s){const[l,a,c,h,g,p,m,y]=R1(r,e,t,n);return mi(Math.min(l,c,g,m),Math.min(a,h,p,y),Math.max(l,c,g,m),Math.max(a,h,p,y),s)}function R1(r,e,t,n){const s=e*n[0]/2,l=e*n[1]/2,a=Math.cos(t),c=Math.sin(t),h=s*a,g=s*c,p=l*a,m=l*c,y=r[0],x=r[1];return[y-h+m,x-g-p,y-h-m,x-g+p,y+h-m,x+g+p,y+h+m,x+g-p,y-h+m,x-g-p]}function ut(r){return r[3]-r[1]}function kn(r,e,t){const n=t||qt();return Mt(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):tl(n),n}function yi(r){return[r[0],r[3]]}function Qa(r){return[r[2],r[3]]}function ke(r){return r[2]-r[0]}function Mt(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function Ja(r){return r[2]<r[0]||r[3]<r[1]}function I1(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function L1(r,e,t){let n=!1;const s=kh(r,e),l=kh(r,t);if(s===lt.INTERSECTING||l===lt.INTERSECTING)n=!0;else{const a=r[0],c=r[1],h=r[2],g=r[3],p=e[0],m=e[1],y=t[0],x=t[1],E=(x-m)/(y-p);let w,C;l&lt.ABOVE&&!(s&lt.ABOVE)&&(w=y-(x-g)/E,n=w>=a&&w<=h),!n&&l&lt.RIGHT&&!(s&lt.RIGHT)&&(C=x-(y-h)*E,n=C>=c&&C<=g),!n&&l&lt.BELOW&&!(s&lt.BELOW)&&(w=y-(x-c)/E,n=w>=a&&w<=h),!n&&l&lt.LEFT&&!(s&lt.LEFT)&&(C=x-(y-a)*E,n=C>=c&&C<=g)}return n}function b_(r,e){const t=e.getExtent(),n=ir(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const s=ke(t),a=Math.floor((n[0]-t[0])/s)*s;r[0]-=a,r[2]-=a}return r}function sd(r,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[n[0],r[1],n[2],r[3]]];b_(r,e);const s=ke(n);if(ke(r)>s&&!t)return[[n[0],r[1],n[2],r[3]]];if(r[0]<n[0])return[[r[0]+s,r[1],n[2],r[3]],[n[0],r[1],r[2],r[3]]];if(r[2]>n[2])return[[r[0],r[1],n[2],r[3]],[n[0],r[1],r[2]-s,r[3]]]}return[r]}const od={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class ld{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||od[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const nl=6378137,ws=Math.PI*nl,k1=[-ws,-ws,ws,ws],M1=[-180,-85,180,85],_a=nl*Math.log(Math.tan(Math.PI/2));class us extends ld{constructor(e){super({code:e,units:"m",extent:k1,global:!0,worldExtent:M1,getPointResolution:function(t,n){return t/Math.cosh(n[1]/nl)}})}}const Gp=[new us("EPSG:3857"),new us("EPSG:102100"),new us("EPSG:102113"),new us("EPSG:900913"),new us("http://www.opengis.net/def/crs/EPSG/0/3857"),new us("http://www.opengis.net/gml/srs/epsg.xml#3857")];function P1(r,e,t,n){const s=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(s));for(let l=0;l<s;l+=n){e[l]=ws*r[l]/180;let a=nl*Math.log(Math.tan(Math.PI*(+r[l+1]+90)/360));a>_a?a=_a:a<-_a&&(a=-_a),e[l+1]=a}return e}function A1(r,e,t,n){const s=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(s));for(let l=0;l<s;l+=n)e[l]=180*r[l]/ws,e[l+1]=360*Math.atan(Math.exp(r[l+1]/nl))/Math.PI-90;return e}const D1=6378137,Up=[-180,-90,180,90],F1=Math.PI*D1/180;class Sr extends ld{constructor(e,t){super({code:e,units:"degrees",extent:Up,axisOrientation:t,global:!0,metersPerUnit:F1,worldExtent:Up})}}const Xp=[new Sr("CRS:84"),new Sr("EPSG:4326","neu"),new Sr("urn:ogc:def:crs:OGC:1.3:CRS84"),new Sr("urn:ogc:def:crs:OGC:2:84"),new Sr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Sr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Sr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Ph={};function O1(r){return Ph[r]||Ph[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function N1(r,e){Ph[r]=e}let Rs={};function Wo(r,e,t){const n=r.getCode(),s=e.getCode();n in Rs||(Rs[n]={}),Rs[n][s]=t}function ih(r,e){return r in Rs&&e in Rs[r]?Rs[r][e]:null}function Ke(r,e,t){return Math.min(Math.max(r,e),t)}function z1(r,e,t,n,s,l){const a=s-t,c=l-n;if(a!==0||c!==0){const h=((r-t)*a+(e-n)*c)/(a*a+c*c);h>1?(t=s,n=l):h>0&&(t+=a*h,n+=c*h)}return fi(r,e,t,n)}function fi(r,e,t,n){const s=t-r,l=n-e;return s*s+l*l}function G1(r){const e=r.length;for(let n=0;n<e;n++){let s=n,l=Math.abs(r[n][n]);for(let c=n+1;c<e;c++){const h=Math.abs(r[c][n]);h>l&&(l=h,s=c)}if(l===0)return null;const a=r[s];r[s]=r[n],r[n]=a;for(let c=n+1;c<e;c++){const h=-r[c][n]/r[n][n];for(let g=n;g<e+1;g++)n==g?r[c][g]=0:r[c][g]+=h*r[n][g]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=r[n][e]/r[n][n];for(let s=n-1;s>=0;s--)r[s][e]-=r[s][n]*t[n]}return t}function Wp(r){return r*180/Math.PI}function er(r){return r*Math.PI/180}function Is(r,e){const t=r%e;return t*e<0?t+e:t}function $t(r,e,t){return r+t*(e-r)}function eu(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function ma(r,e){return Math.floor(eu(r,e))}function ya(r,e){return Math.ceil(eu(r,e))}function Ah(r,e,t){if(r>=e&&r<t)return r;const n=t-e;return((r-e)%n+n)%n+e}function U1(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function Aa(r,e){let t=!0;for(let n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function ad(r,e){const t=Math.cos(e),n=Math.sin(e),s=r[0]*t-r[1]*n,l=r[1]*t+r[0]*n;return r[0]=s,r[1]=l,r}function X1(r,e){return r[0]*=e,r[1]*=e,r}function B_(r,e){const t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function Y_(r,e){return Math.sqrt(B_(r,e))}function V_(r,e){if(e.canWrapX()){const t=ke(e.getExtent()),n=W1(r,e,t);n&&(r[0]-=n*t)}return r}function W1(r,e,t){const n=e.getExtent();let s=0;return e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])&&(t=t||ke(n),s=Math.floor((r[0]-n[0])/t)),s}const K_=63710088e-1;function Dh(r,e,t){t=t||K_;const n=er(r[1]),s=er(e[1]),l=(s-n)/2,a=er(e[0]-r[0])/2,c=Math.sin(l)*Math.sin(l)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function rh(r,e){let t=0;for(let n=0,s=r.length;n<s-1;++n)t+=Dh(r[n],r[n+1],e);return t}function Z_(r,e){e=e||{};const t=e.radius||K_,n=e.projection||"EPSG:3857",s=r.getType();s!=="GeometryCollection"&&(r=r.clone().transform(n,"EPSG:4326"));let l=0,a,c,h,g,p,m;switch(s){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{a=r.getCoordinates(),l=rh(a,t);break}case"MultiLineString":case"Polygon":{for(a=r.getCoordinates(),h=0,g=a.length;h<g;++h)l+=rh(a[h],t);break}case"MultiPolygon":{for(a=r.getCoordinates(),h=0,g=a.length;h<g;++h)for(c=a[h],p=0,m=c.length;p<m;++p)l+=rh(c[p],t);break}case"GeometryCollection":{const y=r.getGeometries();for(h=0,g=y.length;h<g;++h)l+=Z_(y[h],e);break}default:throw new Error("Unsupported geometry type: "+s)}return l}const Da=.9996,dn=.00669438,tu=dn*dn,nu=tu*dn,Lr=dn/(1-dn),jp=Math.sqrt(1-dn),Os=(1-jp)/(1+jp),H_=Os*Os,ud=H_*Os,cd=ud*Os,$_=cd*Os,q_=1-dn/4-3*tu/64-5*nu/256,j1=3*dn/8+3*tu/32+45*nu/1024,b1=15*tu/256+45*nu/1024,B1=35*nu/3072,Y1=3/2*Os-27/32*ud+269/512*$_,V1=21/16*H_-55/32*cd,K1=151/96*ud-417/128*$_,Z1=1097/512*cd,Fa=6378137;function H1(r,e,t){const n=r-5e5,a=(t.north?e:e-1e7)/Da/(Fa*q_),c=a+Y1*Math.sin(2*a)+V1*Math.sin(4*a)+K1*Math.sin(6*a)+Z1*Math.sin(8*a),h=Math.sin(c),g=h*h,p=Math.cos(c),m=h/p,y=m*m,x=y*y,E=1-dn*g,w=Math.sqrt(1-dn*g),C=Fa/w,I=(1-dn)/E,R=Lr*p**2,D=R*R,k=n/(C*Da),P=k*k,X=P*k,V=X*k,U=V*k,b=U*k,B=c-m/I*(P/2-V/24*(5+3*y+10*R-4*D-9*Lr))+b/720*(61+90*y+298*R+45*x-252*Lr-3*D);let ie=(k-X/6*(1+2*y+R)+U/120*(5-2*R+28*y-3*D+8*Lr+24*x))/p;return ie=Ah(ie+er(Q_(t.number)),-Math.PI,Math.PI),[Wp(ie),Wp(B)]}const bp=-80,Bp=84,$1=-180,q1=180;function Q1(r,e,t){r=Ah(r,$1,q1),e<bp?e=bp:e>Bp&&(e=Bp);const n=er(e),s=Math.sin(n),l=Math.cos(n),a=s/l,c=a*a,h=c*c,g=er(r),p=Q_(t.number),m=er(p),y=Fa/Math.sqrt(1-dn*s**2),x=Lr*l**2,E=l*Ah(g-m,-Math.PI,Math.PI),w=E*E,C=w*E,I=C*E,R=I*E,D=R*E,k=Fa*(q_*n-j1*Math.sin(2*n)+b1*Math.sin(4*n)-B1*Math.sin(6*n)),P=Da*y*(E+C/6*(1-c+x)+R/120*(5-18*c+h+72*x-58*Lr))+5e5;let X=Da*(k+y*a*(w/2+I/24*(5-c+9*x+4*x**2)+D/720*(61-58*c+h+600*x-330*Lr)));return t.north||(X+=1e7),[P,X]}function Q_(r){return(r-1)*6-180+3}const J1=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function J_(r){let e=0;for(const s of J1){const l=r.match(s);if(l){e=parseInt(l[1]);break}}if(!e)return null;let t=0,n=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(n=!0,t=e-32600),t?{number:t,north:n}:null}function Yp(r,e){return function(t,n,s,l){const a=t.length;s=s>1?s:2,l=l??s,n||(s>2?n=t.slice():n=new Array(a));for(let c=0;c<a;c+=l){const h=t[c],g=t[c+1],p=r(h,g,e);n[c]=p[0],n[c+1]=p[1]}return n}}function eE(r){return J_(r)?new ld({code:r,units:"m"}):null}function tE(r){const e=J_(r.getCode());return e?{forward:Yp(Q1,e),inverse:Yp(H1,e)}:null}function em(...r){console.warn(...r)}const nE=[tE],iE=[eE];let Fh=!0;function rE(r){Fh=!1}function hd(r,e){if(e!==void 0){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];e=e}else e=r.slice();return e}function Oh(r){N1(r.getCode(),r),Wo(r,r,hd)}function sE(r){r.forEach(Oh)}function Bt(r){if(typeof r!="string")return r;const e=O1(r);if(e)return e;for(const t of iE){const n=t(r);if(n)return n}return null}function Vp(r,e,t,n){r=Bt(r);let s;const l=r.getPointResolutionFunc();if(l)s=l(e,t);else{const a=r.getUnits();if(a=="degrees"||n=="degrees")s=e;else{const c=fd(r,Bt("EPSG:4326"));if(!c&&a!=="degrees")s=e*r.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=c(g,g,2);const p=Dh(g.slice(0,2),g.slice(2,4)),m=Dh(g.slice(4,6),g.slice(6,8));s=(p+m)/2}const h=r.getMetersPerUnit();h!==void 0&&(s/=h)}}return s}function Kp(r){sE(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Wo(e,t,hd)})})}function oE(r,e,t,n){r.forEach(function(s){e.forEach(function(l){Wo(s,l,t),Wo(l,s,n)})})}function dd(r,e){return r?typeof r=="string"?Bt(r):r:Bt(e)}function lE(r){return function(e,t,n,s){const l=e.length;n=n!==void 0?n:2,s=s??n,t=t!==void 0?t:new Array(l);for(let a=0;a<l;a+=s){const c=r(e.slice(a,a+n)),h=c.length;for(let g=0,p=s;g<p;++g)t[a+g]=g>=h?e[a+g]:c[g]}return t}}function sh(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||fd(r,e)===hd)&&t}function fd(r,e){const t=r.getCode(),n=e.getCode();let s=ih(t,n);if(s)return s;let l=null,a=null;for(const h of nE)l||(l=h(r)),a||(a=h(e));if(!l&&!a)return null;const c="EPSG:4326";if(a)if(l)s=oh(l.inverse,a.forward);else{const h=ih(t,c);h&&(s=oh(h,a.forward))}else{const h=ih(c,n);h&&(s=oh(l.inverse,h))}return s&&(Oh(r),Oh(e),Wo(r,e,s)),s}function oh(r,e){return function(t,n,s,l){return n=r(t,n,s,l),e(n,n,s,l)}}function Oa(r,e){const t=Bt(r),n=Bt(e);return fd(t,n)}function tm(r,e,t){const n=Oa(e,t);if(!n){const s=Bt(e).getCode(),l=Bt(t).getCode();throw new Error(`No transform available between ${s} and ${l}`)}return n(r,void 0,r.length)}function Nh(r,e){return r}function Rn(r,e){return Fh&&!Aa(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(Fh=!1,em("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function nm(r,e){return r}function $i(r,e){return r}function aE(){Kp(Gp),Kp(Xp),oE(Xp,Gp,P1,A1)}aE();function tr(r,e,t,n,s,l,a){l=l||[],a=a||2;let c=0;for(let h=e;h<t;h+=n){const g=r[h],p=r[h+1];l[c++]=s[0]*g+s[2]*p+s[4],l[c++]=s[1]*g+s[3]*p+s[5];for(let m=2;m<a;m++)l[c++]=r[h+m]}return l&&l.length!=c&&(l.length=c),l}function gd(r,e,t,n,s,l,a){a=a||[];const c=Math.cos(s),h=Math.sin(s),g=l[0],p=l[1];let m=0;for(let y=e;y<t;y+=n){const x=r[y]-g,E=r[y+1]-p;a[m++]=g+x*c-E*h,a[m++]=p+x*h+E*c;for(let w=y+2;w<y+n;++w)a[m++]=r[w]}return a&&a.length!=m&&(a.length=m),a}function uE(r,e,t,n,s,l,a,c){c=c||[];const h=a[0],g=a[1];let p=0;for(let m=e;m<t;m+=n){const y=r[m]-h,x=r[m+1]-g;c[p++]=h+s*y,c[p++]=g+l*x;for(let E=m+2;E<m+n;++E)c[p++]=r[E]}return c&&c.length!=p&&(c.length=p),c}function cE(r,e,t,n,s,l,a){a=a||[];let c=0;for(let h=e;h<t;h+=n){a[c++]=r[h]+s,a[c++]=r[h+1]+l;for(let g=h+2;g<h+n;++g)a[c++]=r[g]}return a&&a.length!=c&&(a.length=c),a}const Zp=Mn();class im extends Hn{constructor(){super(),this.extent_=qt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=G_((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Pe()}closestPointXY(e,t,n,s){return Pe()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Pe()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&tl(t),this.extentRevision_=this.getRevision()}return I1(this.extent_,e)}rotate(e,t){Pe()}scale(e,t,n){Pe()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Pe()}getType(){return Pe()}applyTransform(e){Pe()}intersectsExtent(e){return Pe()}translate(e,t){Pe()}transform(e,t){const n=Bt(e),s=n.getUnits()=="tile-pixels"?function(l,a,c){const h=n.getExtent(),g=n.getWorldExtent(),p=ut(g)/ut(h);_i(Zp,g[0],g[3],p,-p,0,0,0);const m=tr(l,0,l.length,c,Zp,a),y=Oa(n,t);return y?y(m,m,c):m}:Oa(n,t);return this.applyTransform(s),this}}class or extends im{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return nd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Pe()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Na(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Pe()}setLayout(e,t,n){let s;if(e)s=Na(e);else{for(let l=0;l<n;++l){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=hE(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();gd(n,0,n.length,s,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=ir(this.getExtent()));const s=this.getFlatCoordinates();if(s){const l=this.getStride();uE(s,0,s.length,l,e,t,n,s),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();cE(n,0,n.length,s,e,t,n),this.changed()}}}function hE(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function Na(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function dE(r,e,t){const n=r.getFlatCoordinates();if(!n)return null;const s=r.getStride();return tr(n,0,n.length,s,e,t)}function Hp(r,e,t,n,s,l,a){const c=r[e],h=r[e+1],g=r[t]-c,p=r[t+1]-h;let m;if(g===0&&p===0)m=e;else{const y=((s-c)*g+(l-h)*p)/(g*g+p*p);if(y>1)m=t;else if(y>0){for(let x=0;x<n;++x)a[x]=$t(r[e+x],r[t+x],y);a.length=n;return}else m=e}for(let y=0;y<n;++y)a[y]=r[m+y];a.length=n}function pd(r,e,t,n,s){let l=r[e],a=r[e+1];for(e+=n;e<t;e+=n){const c=r[e],h=r[e+1],g=fi(l,a,c,h);g>s&&(s=g),l=c,a=h}return s}function _d(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l){const c=t[l];s=pd(r,e,c,n,s),e=c}return s}function fE(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l){const c=t[l];s=_d(r,e,c,n,s),e=c[c.length-1]}return s}function md(r,e,t,n,s,l,a,c,h,g,p){if(e==t)return g;let m,y;if(s===0){if(y=fi(a,c,r[e],r[e+1]),y<g){for(m=0;m<n;++m)h[m]=r[e+m];return h.length=n,y}return g}p=p||[NaN,NaN];let x=e+n;for(;x<t;)if(Hp(r,x-n,x,n,a,c,p),y=fi(a,c,p[0],p[1]),y<g){for(g=y,m=0;m<n;++m)h[m]=p[m];h.length=n,x+=n}else x+=n*Math.max((Math.sqrt(y)-Math.sqrt(g))/s|0,1);if(l&&(Hp(r,t-n,e,n,a,c,p),y=fi(a,c,p[0],p[1]),y<g)){for(g=y,m=0;m<n;++m)h[m]=p[m];h.length=n}return g}function yd(r,e,t,n,s,l,a,c,h,g,p){p=p||[NaN,NaN];for(let m=0,y=t.length;m<y;++m){const x=t[m];g=md(r,e,x,n,s,l,a,c,h,g,p),e=x}return g}function gE(r,e,t,n,s,l,a,c,h,g,p){p=p||[NaN,NaN];for(let m=0,y=t.length;m<y;++m){const x=t[m];g=yd(r,e,x,n,s,l,a,c,h,g,p),e=x[x.length-1]}return g}function rm(r,e,t,n){for(let s=0,l=t.length;s<l;++s)r[e++]=t[s];return e}function iu(r,e,t,n){for(let s=0,l=t.length;s<l;++s){const a=t[s];for(let c=0;c<n;++c)r[e++]=a[c]}return e}function Ed(r,e,t,n,s){s=s||[];let l=0;for(let a=0,c=t.length;a<c;++a){const h=iu(r,e,t[a],n);s[l++]=h,e=h}return s.length=l,s}function pE(r,e,t,n,s){s=s||[];let l=0;for(let a=0,c=t.length;a<c;++a){const h=Ed(r,e,t[a],n,s[l]);h.length===0&&(h[0]=e),s[l++]=h,e=h[h.length-1]}return s.length=l,s}function ru(r,e,t,n,s,l,a){const c=(t-e)/n;if(c<3){for(;e<t;e+=n)l[a++]=r[e],l[a++]=r[e+1];return a}const h=new Array(c);h[0]=1,h[c-1]=1;const g=[e,t-n];let p=0;for(;g.length>0;){const m=g.pop(),y=g.pop();let x=0;const E=r[y],w=r[y+1],C=r[m],I=r[m+1];for(let R=y+n;R<m;R+=n){const D=r[R],k=r[R+1],P=z1(D,k,E,w,C,I);P>x&&(p=R,x=P)}x>s&&(h[(p-e)/n]=1,y+n<p&&g.push(y,p),p+n<m&&g.push(p,m))}for(let m=0;m<c;++m)h[m]&&(l[a++]=r[e+m*n],l[a++]=r[e+m*n+1]);return a}function sm(r,e,t,n,s,l,a,c){for(let h=0,g=t.length;h<g;++h){const p=t[h];a=ru(r,e,p,n,s,l,a),c.push(a),e=p}return a}function Rr(r,e){return e*Math.round(r/e)}function _E(r,e,t,n,s,l,a){if(e==t)return a;let c=Rr(r[e],s),h=Rr(r[e+1],s);e+=n,l[a++]=c,l[a++]=h;let g,p;do if(g=Rr(r[e],s),p=Rr(r[e+1],s),e+=n,e==t)return l[a++]=g,l[a++]=p,a;while(g==c&&p==h);for(;e<t;){const m=Rr(r[e],s),y=Rr(r[e+1],s);if(e+=n,m==g&&y==p)continue;const x=g-c,E=p-h,w=m-c,C=y-h;if(x*C==E*w&&(x<0&&w<x||x==w||x>0&&w>x)&&(E<0&&C<E||E==C||E>0&&C>E)){g=m,p=y;continue}l[a++]=g,l[a++]=p,c=g,h=p,g=m,p=y}return l[a++]=g,l[a++]=p,a}function vd(r,e,t,n,s,l,a,c){for(let h=0,g=t.length;h<g;++h){const p=t[h];a=_E(r,e,p,n,s,l,a),c.push(a),e=p}return a}function mE(r,e,t,n,s,l,a,c){for(let h=0,g=t.length;h<g;++h){const p=t[h],m=[];a=vd(r,e,p,n,s,l,a,m),c.push(m),e=p[p.length-1]}return a}function qi(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let a=e;a<t;a+=n)s[l++]=r.slice(a,a+n);return s.length=l,s}function jo(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let a=0,c=t.length;a<c;++a){const h=t[a];s[l++]=qi(r,e,h,n,s[l]),e=h}return s.length=l,s}function zh(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let a=0,c=t.length;a<c;++a){const h=t[a];s[l++]=h.length===1&&h[0]===e?[]:jo(r,e,h,n,s[l]),e=h[h.length-1]}return s.length=l,s}function om(r,e,t,n){let s=0;const l=r[t-n],a=r[t-n+1];let c=0,h=0;for(;e<t;e+=n){const g=r[e]-l,p=r[e+1]-a;s+=h*g-c*p,c=g,h=p}return s/2}function lm(r,e,t,n){let s=0;for(let l=0,a=t.length;l<a;++l){const c=t[l];s+=om(r,e,c,n),e=c}return s}function yE(r,e,t,n){let s=0;for(let l=0,a=t.length;l<a;++l){const c=t[l];s+=lm(r,e,c,n),e=c[c.length-1]}return s}class bo extends or{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new bo(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),md(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,s))}getArea(){return om(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=ru(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new bo(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=iu(this.flatCoordinates,0,e,this.stride),this.changed()}}class nr extends or{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new nr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const l=this.flatCoordinates,a=fi(e,t,l[0],l[1]);if(a<s){const c=this.stride;for(let h=0;h<c;++h)n[h]=l[h];return n.length=c,a}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return W_(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return td(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rm(this.flatCoordinates,0,e,this.stride),this.changed()}}function EE(r,e,t,n,s){return!rd(s,function(a){return!kr(r,e,t,n,a[0],a[1])})}function kr(r,e,t,n,s,l){let a=0,c=r[t-n],h=r[t-n+1];for(;e<t;e+=n){const g=r[e],p=r[e+1];h<=l?p>l&&(g-c)*(l-h)-(s-c)*(p-h)>0&&a++:p<=l&&(g-c)*(l-h)-(s-c)*(p-h)<0&&a--,c=g,h=p}return a!==0}function xd(r,e,t,n,s,l){if(t.length===0||!kr(r,e,t[0],n,s,l))return!1;for(let a=1,c=t.length;a<c;++a)if(kr(r,t[a-1],t[a],n,s,l))return!1;return!0}function vE(r,e,t,n,s,l){if(t.length===0)return!1;for(let a=0,c=t.length;a<c;++a){const h=t[a];if(xd(r,e,h,n,s,l))return!0;e=h[h.length-1]}return!1}function wd(r,e,t,n,s,l,a){let c,h,g,p,m,y,x;const E=s[l+1],w=[];for(let R=0,D=t.length;R<D;++R){const k=t[R];for(p=r[k-n],y=r[k-n+1],c=e;c<k;c+=n)m=r[c],x=r[c+1],(E<=y&&x<=E||y<=E&&E<=x)&&(g=(E-y)/(x-y)*(m-p)+p,w.push(g)),p=m,y=x}let C=NaN,I=-1/0;for(w.sort(Ji),p=w[0],c=1,h=w.length;c<h;++c){m=w[c];const R=Math.abs(m-p);R>I&&(g=(p+m)/2,xd(r,e,t,n,g,E)&&(C=g,I=R)),p=m}return isNaN(C)&&(C=s[l]),a?(a.push(C,E,I),a):[C,E,I]}function am(r,e,t,n,s){let l=[];for(let a=0,c=t.length;a<c;++a){const h=t[a];l=wd(r,e,h,n,s,2*a,l),e=h[h.length-1]}return l}function um(r,e,t,n,s){let l;for(e+=n;e<t;e+=n)if(l=s(r.slice(e-n,e),r.slice(e,e+n)),l)return l;return!1}function su(r,e,t,n,s){const l=j_(qt(),r,e,t,n);return Mt(s,l)?xs(s,l)||l[0]>=s[0]&&l[2]<=s[2]||l[1]>=s[1]&&l[3]<=s[3]?!0:um(r,e,t,n,function(a,c){return L1(s,a,c)}):!1}function xE(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l){if(su(r,e,t[l],n,s))return!0;e=t[l]}return!1}function cm(r,e,t,n,s){return!!(su(r,e,t,n,s)||kr(r,e,t,n,s[0],s[1])||kr(r,e,t,n,s[0],s[3])||kr(r,e,t,n,s[2],s[1])||kr(r,e,t,n,s[2],s[3]))}function hm(r,e,t,n,s){if(!cm(r,e,t[0],n,s))return!1;if(t.length===1)return!0;for(let l=1,a=t.length;l<a;++l)if(EE(r,t[l-1],t[l],n,s)&&!su(r,t[l-1],t[l],n,s))return!1;return!0}function wE(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l){const c=t[l];if(hm(r,e,c,n,s))return!0;e=c[c.length-1]}return!1}function CE(r,e,t,n){for(;e<t-n;){for(let s=0;s<n;++s){const l=r[e+s];r[e+s]=r[t-n+s],r[t-n+s]=l}e+=n,t-=n}}function Cd(r,e,t,n){let s=0,l=r[t-n],a=r[t-n+1];for(;e<t;e+=n){const c=r[e],h=r[e+1];s+=(c-l)*(h+a),l=c,a=h}return s===0?void 0:s>0}function dm(r,e,t,n,s){s=s!==void 0?s:!1;for(let l=0,a=t.length;l<a;++l){const c=t[l],h=Cd(r,e,c,n);if(l===0){if(s&&h||!s&&!h)return!1}else if(s&&!h||!s&&h)return!1;e=c}return!0}function SE(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l){const c=t[l];if(!dm(r,e,c,n,s))return!1;c.length&&(e=c[c.length-1])}return!0}function Gh(r,e,t,n,s){s=s!==void 0?s:!1;for(let l=0,a=t.length;l<a;++l){const c=t[l],h=Cd(r,e,c,n);(l===0?s&&h||!s&&!h:s&&!h||!s&&h)&&CE(r,e,c,n),e=c}return e}function $p(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l)e=Gh(r,e,t[l],n,s);return e}function TE(r,e){const t=[];let n=0,s=0,l;for(let a=0,c=e.length;a<c;++a){const h=e[a],g=Cd(r,n,h,2);if(l===void 0&&(l=g),g===l)t.push(e.slice(s,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[s])}s=a+1,n=h}return t}class Ei extends or{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Vn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ei(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_d(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return xd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return lm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Gh(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,jo(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=ir(this.getExtent());this.flatInteriorPoint_=wd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new nr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new bo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,s=[];let l=0;for(let a=0,c=n.length;a<c;++a){const h=n[a],g=new bo(t.slice(l,h),e);s.push(g),l=h}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;dm(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Gh(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=vd(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Ei(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return hm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Ed(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function qp(r){if(Ja(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],n=r[2],s=r[3],l=[e,t,e,s,n,s,n,t,e,t];return new Ei(l,"XY",[l.length])}const cn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ce={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Bo={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var dt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};dt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};dt.max=dt.whitepoint[2].D65;dt.rgb=function(r,e){e=e||dt.whitepoint[2].E;var t=r[0]/e[0],n=r[1]/e[1],s=r[2]/e[2],l,a,c;return l=t*3.240969941904521+n*-1.537383177570093+s*-.498610760293,a=t*-.96924363628087+n*1.87596750150772+s*.041555057407175,c=t*.055630079696993+n*-.20397695888897+s*1.056971514242878,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=c*12.92,l=Math.min(Math.max(0,l),1),a=Math.min(Math.max(0,a),1),c=Math.min(Math.max(0,c),1),[l*255,a*255,c*255]};Bo.xyz=function(r,e){var t=r[0]/255,n=r[1]/255,s=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var l=t*.41239079926595+n*.35758433938387+s*.18048078840183,a=t*.21263900587151+n*.71516867876775+s*.072192315360733,c=t*.019330818715591+n*.11919477979462+s*.95053215224966;return e=e||dt.whitepoint[2].E,[l*e[0],a*e[1],c*e[2]]};const Sd={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,e,t){var n,s,l,a,c,h,g,p,m,y,x,E,w;if(l=r[0],a=r[1],c=r[2],l===0)return[0,0,0];var C=.0011070564598794539;return e=e||"D65",t=t||2,m=dt.whitepoint[t][e][0],y=dt.whitepoint[t][e][1],x=dt.whitepoint[t][e][2],E=4*m/(m+15*y+3*x),w=9*y/(m+15*y+3*x),n=a/(13*l)+E||0,s=c/(13*l)+w||0,g=l>8?y*Math.pow((l+16)/116,3):y*l*C,h=g*9*n/(4*s)||0,p=g*(12-3*n-20*s)/(4*s)||0,[h,g,p]}};dt.luv=function(r,e,t){var n,s,l,a,c,h,g,p,m,y,x,E,w,C=.008856451679035631,I=903.2962962962961;e=e||"D65",t=t||2,m=dt.whitepoint[t][e][0],y=dt.whitepoint[t][e][1],x=dt.whitepoint[t][e][2],E=4*m/(m+15*y+3*x),w=9*y/(m+15*y+3*x),h=r[0],g=r[1],p=r[2],n=4*h/(h+15*g+3*p)||0,s=9*g/(h+15*g+3*p)||0;var R=g/y;return l=R<=C?I*R:116*Math.pow(R,1/3)-16,a=13*l*(n-E),c=13*l*(s-w),[l,a,c]};var fm={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var e=r[0],t=r[1],n=r[2],s,l,a;return a=n/360*2*Math.PI,s=t*Math.cos(a),l=t*Math.sin(a),[e,s,l]},xyz:function(r){return Sd.xyz(fm.luv(r))}};Sd.lchuv=function(r){var e=r[0],t=r[1],n=r[2],s=Math.sqrt(t*t+n*n),l=Math.atan2(n,t),a=l*360/2/Math.PI;return a<0&&(a+=360),[e,s,a]};dt.lchuv=function(r){return Sd.lchuv(dt.luv(r))};const Qp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var Jp={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function RE(r){var p,m;var e,t=[],n=1,s;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),Qp[r])t=Qp[r].slice(),s="rgb";else if(r==="transparent")n=0,s="rgb",t=[0,0,0];else if(r[0]==="#"){var l=r.slice(1),a=l.length,c=a<=4;n=1,c?(t=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],a===4&&(n=parseInt(l[3]+l[3],16)/255)):(t=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],a===8&&(n=parseInt(l[6]+l[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var h=e[1];s=h.replace(/a$/,"");var g=s==="cmyk"?4:s==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=t.shift()),t=t.map(function(y,x){if(y[y.length-1]==="%")return y=parseFloat(y)/100,x===3?y:s==="rgb"?y*255:s[0]==="h"||s[0]==="l"&&!x?y*100:s==="lab"?y*125:s==="lch"?x<2?y*150:y*360:s[0]==="o"&&!x?y:s==="oklab"?y*.4:s==="oklch"?x<2?y*.4:y*360:y;if(s[x]==="h"||x===2&&s[s.length-1]==="h"){if(Jp[y]!==void 0)return Jp[y];if(y.endsWith("deg"))return parseFloat(y);if(y.endsWith("turn"))return parseFloat(y)*360;if(y.endsWith("grad"))return parseFloat(y)*360/400;if(y.endsWith("rad"))return parseFloat(y)*180/Math.PI}return y==="none"?0:parseFloat(y)}),n=t.length>g?t.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(y){return parseFloat(y)}),s=((m=(p=r.match(/([a-z])/ig))==null?void 0:p.join(""))==null?void 0:m.toLowerCase())||"rgb");return{space:s,values:t,alpha:n}}const lh={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,s,l,a,c,h,g=0;if(t===0)return h=n*255,[h,h,h];for(l=n<.5?n*(1+t):n+t-n*t,s=2*n-l,c=[0,0,0];g<3;)a=e+1/3*-(g-1),a<0?a++:a>1&&a--,h=6*a<1?s+(l-s)*6*a:2*a<1?l:3*a<2?s+(l-s)*(2/3-a)*6:s,c[g++]=h*255;return c}};Bo.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.min(e,t,n),l=Math.max(e,t,n),a=l-s,c,h,g;return l===s?c=0:e===l?c=(t-n)/a:t===l?c=2+(n-e)/a:n===l&&(c=4+(e-t)/a),c=Math.min(c*60,360),c<0&&(c+=360),g=(s+l)/2,l===s?h=0:g<=.5?h=a/(l+s):h=a/(2-l-s),[c,h*100,g*100]};function IE(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var e,t=RE(r);if(!t.space)return[];const n=t.space[0]==="h"?lh.min:Bo.min,s=t.space[0]==="h"?lh.max:Bo.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),s[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),s[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),s[2]),t.space[0]==="h"&&(e=lh.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const Td=[NaN,NaN,NaN,0];function LE(r){return typeof r=="string"?r:Id(r)}const kE=1024,Lo={};let ah=0;function ME(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function e_(r){const e=dt.lchuv(Bo.xyz(r));return e[3]=r[3],e}function PE(r){const e=dt.rgb(fm.xyz(r));return e[3]=r[3],e}function Rd(r){if(r==="none")return Td;if(Lo.hasOwnProperty(r))return Lo[r];if(ah>=kE){let t=0;for(const n in Lo)t++&3||(delete Lo[n],--ah)}const e=IE(r);if(e.length!==4)throw new Error('failed to parse "'+r+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+r+'" as color');return gm(e),Lo[r]=e,++ah,e}function Ns(r){return Array.isArray(r)?r:Rd(r)}function gm(r){return r[0]=Ke(r[0]+.5|0,0,255),r[1]=Ke(r[1]+.5|0,0,255),r[2]=Ke(r[2]+.5|0,0,255),r[3]=Ke(r[3],0,1),r}function Id(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let n=r[2];n!=(n|0)&&(n=n+.5|0);const s=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+s+")"}const rr=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",AE=rr.includes("firefox"),DE=rr.includes("safari")&&!rr.includes("chrom");DE&&(rr.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(rr));const FE=rr.includes("webkit")&&!rr.includes("edge"),pm=rr.includes("macintosh"),_m=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ld=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,mm=typeof Image<"u"&&Image.prototype.decode,ym=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function et(r,e,t,n){let s;return t&&t.length?s=t.shift():Ld?s=new OffscreenCanvas(r||300,e||300):s=document.createElement("canvas"),r&&(s.width=r),e&&(s.height=e),s.getContext("2d",n)}let uh;function za(){return uh||(uh=et(1,1)),uh}function ou(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function t_(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function OE(r){for(;r.lastChild;)r.lastChild.remove()}function NE(r,e){const t=r.childNodes;for(let n=0;;++n){const s=t[n],l=e[n];if(!s&&!l)break;if(s!==l){if(!s){r.appendChild(l);continue}if(!l){r.removeChild(s),--n;continue}r.insertBefore(l,s)}}}function zE(r,e,t){const n=r;let s=!0,l=!1,a=!1;const c=[Pa(n,Ee.LOAD,function(){a=!0,l||e()})];return n.src&&mm?(l=!0,n.decode().then(function(){s&&e()}).catch(function(h){s&&(a?e():t())})):c.push(Pa(n,Ee.ERROR,t)),function(){s=!1,c.forEach(Xe)}}function GE(r,e){return new Promise((t,n)=>{function s(){a(),t(r)}function l(){a(),n(new Error("Image load error"))}function a(){r.removeEventListener("load",s),r.removeEventListener("error",l)}r.addEventListener("load",s),r.addEventListener("error",l)})}function UE(r,e){return e&&(r.src=e),r.src&&mm?new Promise((t,n)=>r.decode().then(()=>t(r)).catch(s=>r.complete&&r.width?t(r):n(s))):GE(r)}class XE{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const s=ch(e,t,n);return s in this.cache_?this.cache_[s]:null}getPattern(e,t,n){const s=ch(e,t,n);return s in this.patternCache_?this.patternCache_[s]:null}set(e,t,n,s,l){const a=ch(e,t,n),c=a in this.cache_;this.cache_[a]=s,l&&(s.getImageState()===Ce.IDLE&&s.load(),s.getImageState()===Ce.LOADING?s.ready().then(()=>{this.patternCache_[a]=za().createPattern(s.getImage(1),"repeat")}):this.patternCache_[a]=za().createPattern(s.getImage(1),"repeat")),c||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function ch(r,e,t){const n=t?Ns(t):"null";return e+":"+r+":"+n}const hn=new XE;let ko=null;class Em extends Ha{constructor(e,t,n,s,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=l,this.imageState_=s===void 0?Ce.IDLE:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ce.LOADED){ko||(ko=et(1,1,void 0,{willReadFrequently:!0})),ko.drawImage(this.image_,0,0);try{ko.getImageData(0,0,1,1),this.tainted_=!1}catch{ko=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ee.CHANGE)}handleImageError_(){this.imageState_=Ce.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ce.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=et(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ce.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ce.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&UE(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ce.LOADED)return;const t=this.image_,n=et(Math.ceil(t.width*e),Math.ceil(t.height*e)),s=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=LE(this.color_),n.fillRect(0,0,s.width/e,s.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=s}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Ce.LOADED||this.imageState_===Ce.ERROR)e();else{const t=()=>{(this.imageState_===Ce.LOADED||this.imageState_===Ce.ERROR)&&(this.removeEventListener(Ee.CHANGE,t),e())};this.addEventListener(Ee.CHANGE,t)}})),this.ready_}}function kd(r,e,t,n,s,l){let a=e===void 0?void 0:hn.get(e,t,s);return a||(a=new Em(r,r&&"src"in r?r.src||void 0:e,t,n,s),hn.set(e,t,s,a,l)),l&&a&&!hn.getPattern(e,t,s)&&hn.set(e,t,s,a,l),a}class Ar{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Ar({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=kd(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Ce.IDLE&&t.load(),t.getImageState()===Ce.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Fe(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Ns(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Ga(r,e,t,n,s,l,a){let c,h;const g=(t-e)/n;if(g===1)c=e;else if(g===2)c=e,h=s;else if(g!==0){let p=r[e],m=r[e+1],y=0;const x=[0];for(let C=e+n;C<t;C+=n){const I=r[C],R=r[C+1];y+=Math.sqrt((I-p)*(I-p)+(R-m)*(R-m)),x.push(y),p=I,m=R}const E=s*y,w=f1(x,E);w<0?(h=(E-x[-w-2])/(x[-w-1]-x[-w-2]),c=e+(-w-2)*n):c=e+w*n}a=a>1?a:2,l=l||new Array(a);for(let p=0;p<a;++p)l[p]=c===void 0?NaN:h===void 0?r[c+p]:$t(r[c+p],r[c+n+p],h);return l}function Uh(r,e,t,n,s,l){if(t==e)return null;let a;if(s<r[e+n-1])return l?(a=r.slice(e,e+n),a[n-1]=s,a):null;if(r[t-1]<s)return l?(a=r.slice(t-n,t),a[n-1]=s,a):null;if(s==r[e+n-1])return r.slice(e,e+n);let c=e/n,h=t/n;for(;c<h;){const y=c+h>>1;s<r[(y+1)*n-1]?h=y:c=y+1}const g=r[c*n-1];if(s==g)return r.slice((c-1)*n,(c-1)*n+n);const p=r[(c+1)*n-1],m=(s-g)/(p-g);a=[];for(let y=0;y<n-1;++y)a.push($t(r[(c-1)*n+y],r[c*n+y],m));return a.push(s),a}function WE(r,e,t,n,s,l,a){if(a)return Uh(r,e,t[t.length-1],n,s,l);let c;if(s<r[n-1])return l?(c=r.slice(0,n),c[n-1]=s,c):null;if(r[r.length-1]<s)return l?(c=r.slice(r.length-n),c[n-1]=s,c):null;for(let h=0,g=t.length;h<g;++h){const p=t[h];if(e!=p){if(s<r[e+n-1])return null;if(s<=r[p-1])return Uh(r,e,p,n,s,!1);e=p}}return null}function vm(r,e,t,n){let s=r[e],l=r[e+1],a=0;for(let c=e+n;c<t;c+=n){const h=r[c],g=r[c+1];a+=Math.sqrt((h-s)*(h-s)+(g-l)*(g-l)),s=h,l=g}return a}class fn extends or{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Vn(this.flatCoordinates,e),this.changed()}clone(){const e=new fn(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),md(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,s))}forEachSegment(e){return um(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Uh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Ga(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return vm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=ru(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new fn(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return su(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=iu(this.flatCoordinates,0,e,this.stride),this.changed()}}class Kn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Kn({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function n_(r){return r[0]>0&&r[1]>0}function jE(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function jt(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}class lu{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=jt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new lu({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Pe()}getImage(e){return Pe()}getHitDetectionImage(){return Pe()}getPixelRatio(e){return 1}getImageState(){return Pe()}getImageSize(){return Pe()}getOrigin(){return Pe()}getSize(){return Pe()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=jt(e)}listenImageChange(e){Pe()}load(){Pe()}unlistenImageChange(e){Pe()}ready(){return Promise.resolve()}}function Yn(r){return r?Array.isArray(r)?Id(r):typeof r=="object"&&"src"in r?bE(r):r:null}function bE(r){if(!r.offset||!r.size)return hn.getPattern(r.src,"anonymous",r.color);const e=r.src+":"+r.offset,t=hn.getPattern(e,void 0,r.color);if(t)return t;const n=hn.get(r.src,"anonymous",null);if(n.getImageState()!==Ce.LOADED)return null;const s=et(r.size[0],r.size[1]);return s.drawImage(n.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),kd(s.canvas,e,void 0,Ce.LOADED,r.color,!0),hn.getPattern(e,void 0,r.color)}const Ea="ol-hidden",au="ol-unselectable",Md="ol-control",i_="ol-collapsed",BE=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),r_=["style","variant","weight","size","lineHeight","family"],xm=function(r){const e=r.match(BE);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,s=r_.length;n<s;++n){const l=e[n+1];l!==void 0&&(t[r_[n]]=l)}return t.families=t.family.split(/,\s?/),t},wm="10px sans-serif",Ut="#000",zs="round",gi=[],pi=0,Gs="round",Yo=10,Vo="#000",Ko="center",Ua="middle",Mr=[0,0,0,0],Zo=1,ci=new Hn;let ms=null,Xh;const Wh={},YE=function(){const e="32px ",t=["monospace","serif"],n=t.length,s="wmytzilWMYTZIL@#/&?$%10";let l,a;function c(g,p,m){let y=!0;for(let x=0;x<n;++x){const E=t[x];if(a=Xa(g+" "+p+" "+e+E,s),m!=E){const w=Xa(g+" "+p+" "+e+m+","+E,s);y=y&&w!=a}}return!!y}function h(){let g=!0;const p=ci.getKeys();for(let m=0,y=p.length;m<y;++m){const x=p[m];if(ci.get(x)<100){const[E,w,C]=x.split(`
`);c(E,w,C)?(Jo(Wh),ms=null,Xh=void 0,ci.set(x,100)):(ci.set(x,ci.get(x)+1,!0),g=!1)}}g&&(clearInterval(l),l=void 0)}return function(g){const p=xm(g);if(!p)return;const m=p.families;for(let y=0,x=m.length;y<x;++y){const E=m[y],w=p.style+`
`+p.weight+`
`+E;ci.get(w)===void 0&&(ci.set(w,100,!0),c(p.style,p.weight,E)||(ci.set(w,0,!0),l===void 0&&(l=setInterval(h,32))))}}}(),VE=function(){let r;return function(e){let t=Wh[e];if(t==null){if(Ld){const n=xm(e),s=Cm(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);Wh[e]=t}return t}}();function Cm(r,e){return ms||(ms=et(1,1)),r!=Xh&&(ms.font=r,Xh=ms.font),ms.measureText(e)}function Xa(r,e){return Cm(r,e).width}function s_(r,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((s,l)=>Math.max(s,Xa(r,l)),0);return t[e]=n,n}function KE(r,e){const t=[],n=[],s=[];let l=0,a=0,c=0,h=0;for(let g=0,p=e.length;g<=p;g+=2){const m=e[g];if(m===`
`||g===p){l=Math.max(l,a),s.push(a),a=0,c+=h,h=0;continue}const y=e[g+1]||r.font,x=Xa(y,m);t.push(x),a+=x;const E=VE(y);n.push(E),h=Math.max(h,E)}return{width:l,height:c,widths:t,heights:n,lineWidths:s}}function ZE(r,e,t,n,s,l,a,c,h,g,p){r.save(),t!==1&&(r.globalAlpha===void 0?r.globalAlpha=m=>m.globalAlpha*=t:r.globalAlpha*=t),e&&r.transform.apply(r,e),n.contextInstructions?(r.translate(h,g),r.scale(p[0],p[1]),HE(n,r)):p[0]<0||p[1]<0?(r.translate(h,g),r.scale(p[0],p[1]),r.drawImage(n,s,l,a,c,0,0,a,c)):r.drawImage(n,s,l,a,c,h,g,a*p[0],c*p[1]),r.restore()}function HE(r,e){const t=r.contextInstructions;for(let n=0,s=t.length;n<s;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class uu extends lu{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ce.LOADING:Ce.LOADED,this.imageState_===Ce.LOADING&&this.ready().then(()=>this.imageState_=Ce.LOADED),this.render()}clone(){const e=this.getScale(),t=new uu({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var l,a;const t=(l=this.fill_)==null?void 0:l.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let s=(a=hn.get(n,null,null))==null?void 0:a.getImage(1);if(!s){const c=this.renderOptions_,h=Math.ceil(c.size*e),g=et(h,h);this.draw_(c,g,e),s=g.canvas,hn.set(n,null,null,new Em(s,void 0,null,Ce.LOADED,null))}return s}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius,l=this.radius2_===void 0?s:this.radius2_;if(s<l){const X=s;s=l,l=X}const a=this.radius2_===void 0?this.points_:this.points_*2,c=2*Math.PI/a,h=l*Math.sin(c),g=Math.sqrt(l*l-h*h),p=s-g,m=Math.sqrt(h*h+p*p),y=m/h;if(e==="miter"&&y<=n)return y*t;const x=t/2/y,E=t/2*(p/m),C=Math.sqrt((s+x)*(s+x)+E*E)-s;if(this.radius2_===void 0||e==="bevel")return C*2;const I=s*Math.sin(c),R=Math.sqrt(s*s-I*I),D=l-R,P=Math.sqrt(I*I+D*D)/I;if(P<=n){const X=P*t/2-l-s;return 2*Math.max(C,X)}return C*2}createRenderOptions(){let e=zs,t=Gs,n=0,s=null,l=0,a,c=0;this.stroke_&&(a=Yn(this.stroke_.getColor()??Vo),c=this.stroke_.getWidth()??Zo,s=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Gs,e=this.stroke_.getLineCap()??zs,n=this.stroke_.getMiterLimit()??Yo);const h=this.calculateLineJoinSize_(t,c,n),g=Math.max(this.radius,this.radius2_||0),p=Math.ceil(2*g+h);return{strokeStyle:a,strokeWidth:c,size:p,lineCap:e,lineDash:s,lineDashOffset:l,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=Ut),t.fillStyle=Yn(s),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),s=0;typeof n=="string"&&(n=Ns(n)),n===null?s=1:Array.isArray(n)&&(s=n.length===4?n[3]:1),s===0&&(t=et(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const l=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let c=0;c<t;c++){const h=l+c*a,g=c%2===0?n:s;e.lineTo(g*Math.cos(h),g*Math.sin(h))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Ut,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class il extends uu{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new il({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class bt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=o_,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new bt({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=o_,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function $E(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(Ae(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let hh=null;function Sm(r,e){if(!hh){const t=new Ar({color:"rgba(255,255,255,0.4)"}),n=new Kn({color:"#3399CC",width:1.25});hh=[new bt({image:new il({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return hh}function qE(){const r={},e=[255,255,255,1],t=[0,153,255,1],n=3;return r.Polygon=[new bt({fill:new Ar({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new bt({stroke:new Kn({color:e,width:n+2})}),new bt({stroke:new Kn({color:t,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new bt({image:new il({radius:n*2,fill:new Ar({color:t}),stroke:new Kn({color:e,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function o_(r){return r.getGeometry()}const QE="#333";class Pd{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=jt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Ar({color:QE}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Pd({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=jt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const ze={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Tm extends Hn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[ze.OPACITY]=e.opacity!==void 0?e.opacity:1,Ae(typeof t[ze.OPACITY]=="number","Layer opacity must be a number"),t[ze.VISIBLE]=e.visible!==void 0?e.visible:!0,t[ze.Z_INDEX]=e.zIndex,t[ze.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[ze.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[ze.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[ze.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=Ke(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Pe()}getLayerStatesArray(e){return Pe()}getExtent(){return this.get(ze.EXTENT)}getMaxResolution(){return this.get(ze.MAX_RESOLUTION)}getMinResolution(){return this.get(ze.MIN_RESOLUTION)}getMinZoom(){return this.get(ze.MIN_ZOOM)}getMaxZoom(){return this.get(ze.MAX_ZOOM)}getOpacity(){return this.get(ze.OPACITY)}getSourceState(){return Pe()}getVisible(){return this.get(ze.VISIBLE)}getZIndex(){return this.get(ze.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(ze.EXTENT,e)}setMaxResolution(e){this.set(ze.MAX_RESOLUTION,e)}setMinResolution(e){this.set(ze.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(ze.MAX_ZOOM,e)}setMinZoom(e){this.set(ze.MIN_ZOOM,e)}setOpacity(e){Ae(typeof e=="number","Layer opacity must be a number"),this.set(ze.OPACITY,e)}setVisible(e){this.set(ze.VISIBLE,e)}setZIndex(e){this.set(ze.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const wt={ANIMATING:0,INTERACTING:1},Tn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},JE=42,Ad=256;function l_(r,e,t){return function(n,s,l,a,c){if(!n)return;if(!s&&!e)return n;const h=e?0:l[0]*s,g=e?0:l[1]*s,p=c?c[0]:0,m=c?c[1]:0;let y=r[0]+h/2+p,x=r[2]-h/2+p,E=r[1]+g/2+m,w=r[3]-g/2+m;y>x&&(y=(x+y)/2,x=y),E>w&&(E=(w+E)/2,w=E);let C=Ke(n[0],y,x),I=Ke(n[1],E,w);if(a&&t&&s){const R=30*s;C+=-R*Math.log(1+Math.max(0,y-n[0])/R)+R*Math.log(1+Math.max(0,n[0]-x)/R),I+=-R*Math.log(1+Math.max(0,E-n[1])/R)+R*Math.log(1+Math.max(0,n[1]-w)/R)}return[C,I]}}function ev(r){return r}function Dd(r,e,t,n){const s=ke(e)/t[0],l=ut(e)/t[1];return n?Math.min(r,Math.max(s,l)):Math.min(r,Math.min(s,l))}function Fd(r,e,t){let n=Math.min(r,e);const s=50;return n*=Math.log(1+s*Math.max(0,r/e-1))/s+1,t&&(n=Math.max(n,t),n/=Math.log(1+s*Math.max(0,t/r-1))/s+1),Ke(n,t/2,e*2)}function tv(r,e,t,n){return e=e!==void 0?e:!0,function(s,l,a,c){if(s!==void 0){const h=r[0],g=r[r.length-1],p=t?Dd(h,t,a,n):h;if(c)return e?Fd(s,p,g):Ke(s,g,p);const m=Math.min(p,s),y=Math.floor(Jh(r,m,l));return r[y]>p&&y<r.length-1?r[y+1]:r[y]}}}function nv(r,e,t,n,s,l){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(a,c,h,g){if(a!==void 0){const p=s?Dd(e,s,h,l):e;if(g)return n?Fd(a,p,t):Ke(a,t,p);const m=1e-9,y=Math.ceil(Math.log(e/p)/Math.log(r)-m),x=-c*(.5-m)+.5,E=Math.min(p,a),w=Math.floor(Math.log(e/E)/Math.log(r)+x),C=Math.max(y,w),I=e/Math.pow(r,C);return Ke(I,t,p)}}}function a_(r,e,t,n,s){return t=t!==void 0?t:!0,function(l,a,c,h){if(l!==void 0){const g=n?Dd(r,n,c,s):r;return!t||!h?Ke(l,e,g):Fd(l,g,e)}}}function Od(r){if(r!==void 0)return 0}function u_(r){if(r!==void 0)return r}function iv(r){const e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function rv(r){const e=er(5);return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}function Rm(r){return Math.pow(r,3)}function Xs(r){return 1-Rm(1-r)}function sv(r){return 3*r*r-2*r*r*r}function ov(r){return r}const dh=0;class jn extends Hn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=dd(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&rE(),e.center&&(e.center=Rn(e.center,this.projection_)),e.extent&&(e.extent=$i(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const c in Tn)delete t[c];this.setProperties(t,!0);const n=av(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const s=lv(e),l=n.constraint,a=uv(e);this.constraints_={center:s,resolution:l,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const s=e||[0,0,0,0];t=t||[0,0,0,0];const l=this.getResolution(),a=l/2*(s[3]-t[3]+t[1]-s[1]),c=l/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([n[0]+a,n[1]-c])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=Rn(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Rn(s.anchor,this.getProjection())),t[n]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const p=arguments[s];p.center&&this.setCenterInternal(p.center),p.zoom!==void 0?this.setZoom(p.zoom):p.resolution&&this.setResolution(p.resolution),p.rotation!==void 0&&this.setRotation(p.rotation)}if(s===t){n&&va(n,!0);return}let l=Date.now(),a=this.targetCenter_.slice(),c=this.targetResolution_,h=this.targetRotation_;const g=[];for(;s<t;++s){const p=arguments[s],m={start:l,complete:!1,anchor:p.anchor,duration:p.duration!==void 0?p.duration:1e3,easing:p.easing||sv,callback:n};if(p.center&&(m.sourceCenter=a,m.targetCenter=p.center.slice(),a=m.targetCenter),p.zoom!==void 0?(m.sourceResolution=c,m.targetResolution=this.getResolutionForZoom(p.zoom),c=m.targetResolution):p.resolution&&(m.sourceResolution=c,m.targetResolution=p.resolution,c=m.targetResolution),p.rotation!==void 0){m.sourceRotation=h;const y=Is(p.rotation-h+Math.PI,2*Math.PI)-Math.PI;m.targetRotation=h+y,h=m.targetRotation}cv(m)?m.complete=!0:l+=m.duration,g.push(m)}this.animations_.push(g),this.setHint(wt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[wt.ANIMATING]>0}getInteracting(){return this.hints_[wt.INTERACTING]>0}cancelAnimations(){this.setHint(wt.ANIMATING,-this.hints_[wt.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const s=this.animations_[t];if(s[0].callback&&va(s[0].callback,!1),!e)for(let l=0,a=s.length;l<a;++l){const c=s[l];if(!c.complete){e=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let l=!0;for(let a=0,c=s.length;a<c;++a){const h=s[a];if(h.complete)continue;const g=e-h.start;let p=h.duration>0?g/h.duration:1;p>=1?(h.complete=!0,p=1):l=!1;const m=h.easing(p);if(h.sourceCenter){const y=h.sourceCenter[0],x=h.sourceCenter[1],E=h.targetCenter[0],w=h.targetCenter[1];this.nextCenter_=h.targetCenter;const C=y+m*(E-y),I=x+m*(w-x);this.targetCenter_=[C,I]}if(h.sourceResolution&&h.targetResolution){const y=m===1?h.targetResolution:h.sourceResolution+m*(h.targetResolution-h.sourceResolution);if(h.anchor){const x=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(y,0,x,!0);this.targetCenter_=this.calculateCenterZoom(E,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){const y=m===1?Is(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+m*(h.targetRotation-h.sourceRotation);if(h.anchor){const x=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(x,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!h.complete)break}if(l){this.animations_[n]=null,this.setHint(wt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=s[0].callback;a&&va(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-t[0],s[1]-t[1]],ad(n,e-this.getRotation()),U1(n,t)),n}calculateCenterZoom(e,t){let n;const s=this.getCenterInternal(),l=this.getResolution();if(s!==void 0&&l!==void 0){const a=t[0]-e*(t[0]-s[0])/l,c=t[1]-e*(t[1]-s[1])/l;n=[a,c]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],s=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Nh(e,this.getProjection())}getCenterInternal(){return this.get(Tn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return nm(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ae(t,"The view center is not defined");const n=this.getResolution();Ae(n!==void 0,"The view resolution is not defined");const s=this.getRotation();return Ae(s!==void 0,"The view rotation is not defined"),Mh(t,n,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Tn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal($i(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=ke(e)/t[0],s=ut(e)/t[1];return Math.max(n,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(t/n)/Math.log(e);return function(l){return t/Math.pow(e,l*s)}}getRotation(){return this.get(Tn.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,l=Math.log(n/s)/t;return function(a){return Math.log(n/a)/t/l}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const l=this.padding_;if(l){const a=this.getViewportSizeMinusPadding_();s=fh(s,this.getViewportSize_(),[a[0]/2+l[3],a[1]/2+l[0]],t,n)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,s;if(this.resolutions_){const l=Jh(this.resolutions_,e,1);t=l,n=this.resolutions_[l],l==this.resolutions_.length-1?s=2:s=n/this.resolutions_[l+1]}else n=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(n/e)/Math.log(s)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=Ke(Math.floor(e),0,this.resolutions_.length-2),s=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(s,Ke(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(Ae(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Ae(!Ja(e),"Cannot fit empty extent provided as `geometry`");const s=$i(e,this.getProjection());n=qp(s)}else if(e.getType()==="Circle"){const s=$i(e.getExtent(),this.getProjection());n=qp(s),n.rotate(this.getRotation(),ir(s))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),s=Math.sin(-t),l=e.getFlatCoordinates(),a=e.getStride();let c=1/0,h=1/0,g=-1/0,p=-1/0;for(let m=0,y=l.length;m<y;m+=a){const x=l[m]*n-l[m+1]*s,E=l[m]*s+l[m+1]*n;c=Math.min(c,x),h=Math.min(h,E),g=Math.max(g,x),p=Math.max(p,E)}return[c,h,g,p]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],l=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const c=this.rotatedExtentForGeometry(e);let h=this.getResolutionForExtentInternal(c,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);h=isNaN(h)?a:Math.max(h,a),h=this.getConstrainedResolution(h,l?0:1);const g=this.getRotation(),p=Math.sin(g),m=Math.cos(g),y=ir(c);y[0]+=(s[1]-s[3])/2*h,y[1]+=(s[0]-s[2])/2*h;const x=y[0]*m-y[1]*p,E=y[1]*m+y[0]*p,w=this.getConstrainedCenter([x,E],h),C=t.callback?t.callback:As;t.duration!==void 0?this.animateInternal({resolution:h,center:w,duration:t.duration,easing:t.easing},C):(this.targetResolution_=h,this.targetCenter_=w,this.applyTargetState_(!1,!0),va(C,!0))}centerOn(e,t,n){this.centerOnInternal(Rn(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(fh(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,s){let l;const a=this.padding_;if(a&&e){const c=this.getViewportSizeMinusPadding_(-n),h=fh(e,s,[c[0]/2+a[3],c[1]/2+a[0]],t,n);l=[e[0]-h[0],e[1]-h[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Nh(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Rn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,s,n);t&&(this.targetCenter_=this.calculateCenterZoom(l,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Rn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Rn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,n),l=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,0,l,n),c=this.constraints_.center(this.targetCenter_,a,l,n,this.calculateCenterShift(this.targetCenter_,a,s,l));this.get(Tn.ROTATION)!==s&&this.set(Tn.ROTATION,s),this.get(Tn.RESOLUTION)!==a&&(this.set(Tn.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!c||!this.get(Tn.CENTER)||!Aa(this.get(Tn.CENTER),c))&&this.set(Tn.CENTER,c),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const s=t||0,l=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(l),c=this.constraints_.resolution(this.targetResolution_,s,a),h=this.constraints_.center(this.targetCenter_,c,a,!1,this.calculateCenterShift(this.targetCenter_,c,l,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=c,this.targetRotation_=l,this.targetCenter_=h,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==l||!this.getCenterInternal()||!Aa(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:h,resolution:c,duration:e,easing:Xs,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(wt.INTERACTING,1)}endInteraction(e,t,n){n=n&&Rn(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(wt.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function va(r,e){setTimeout(function(){r(e)},0)}function lv(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return l_(r.extent,r.constrainOnlyCenter,t)}const e=dd(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,l_(t,!1,!1)}return ev}function av(r){let e,t,n,a=r.minZoom!==void 0?r.minZoom:dh,c=r.maxZoom!==void 0?r.maxZoom:28;const h=r.zoomFactor!==void 0?r.zoomFactor:2,g=r.multiWorld!==void 0?r.multiWorld:!1,p=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,m=r.showFullExtent!==void 0?r.showFullExtent:!1,y=dd(r.projection,"EPSG:3857"),x=y.getExtent();let E=r.constrainOnlyCenter,w=r.extent;if(!g&&!w&&y.isGlobal()&&(E=!1,w=x),r.resolutions!==void 0){const C=r.resolutions;t=C[a],n=C[c]!==void 0?C[c]:C[C.length-1],r.constrainResolution?e=tv(C,p,!E&&w,m):e=a_(t,n,p,!E&&w,m)}else{const I=(x?Math.max(ke(x),ut(x)):360*od.degrees/y.getMetersPerUnit())/Ad/Math.pow(2,dh),R=I/Math.pow(2,28-dh);t=r.maxResolution,t!==void 0?a=0:t=I/Math.pow(h,a),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(h,c):n=I/Math.pow(h,c):n=R),c=a+Math.floor(Math.log(t/n)/Math.log(h)),n=t/Math.pow(h,c-a),r.constrainResolution?e=nv(h,t,n,p,!E&&w,m):e=a_(t,n,p,!E&&w,m)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:a,zoomFactor:h}}function uv(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?rv():t===!1?u_:typeof t=="number"?iv(t):u_}return Od}function cv(r){return!(r.sourceCenter&&r.targetCenter&&!Aa(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function fh(r,e,t,n,s){const l=Math.cos(-s);let a=Math.sin(-s),c=r[0]*l-r[1]*a,h=r[1]*l+r[0]*a;c+=(e[0]/2-t[0])*n,h+=(t[1]-e[1]/2)*n,a=-a;const g=c*l-h*a,p=h*l+c*a;return[g,p]}class cu extends Tm{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(ze.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(ze.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Xe(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ie(e,Ee.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof jn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;if(t.layerStatesArray){if(s=t.layerStatesArray.find(a=>a.layer===this),!s)return!1}else s=this.getLayerState();const l=this.getExtent();return Nd(s,t.viewState)&&(!l||Mt(l,t.extent))}getAttributions(e){var l;if(!this.isVisible(e))return[];const t=(l=this.getSource())==null?void 0:l.getAttributions();if(!t)return[];const n=e instanceof jn?e.getViewStateAndExtent():e;let s=t(n);return Array.isArray(s)||(s=[s]),s}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(ze.MAP,e)}getMapInternal(){return this.get(ze.MAP)}setMap(e){this.mapPrecomposeKey_&&(Xe(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Xe(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ie(e,cn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ie(this,Ee.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);Ae(!t.some(s=>s.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(ze.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Nd(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}function Im(r,e,t=0,n=r.length-1,s=hv){for(;n>t;){if(n-t>600){const h=n-t+1,g=e-t+1,p=Math.log(h),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(h-m)/h)*(g-h/2<0?-1:1),x=Math.max(t,Math.floor(e-g*m/h+y)),E=Math.min(n,Math.floor(e+(h-g)*m/h+y));Im(r,e,x,E,s)}const l=r[e];let a=t,c=n;for(Mo(r,t,e),s(r[n],l)>0&&Mo(r,t,n);a<c;){for(Mo(r,a,c),a++,c--;s(r[a],l)<0;)a++;for(;s(r[c],l)>0;)c--}s(r[t],l)===0?Mo(r,t,c):(c++,Mo(r,c,n)),c<=e&&(t=c+1),e<=c&&(n=c-1)}}function Mo(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function hv(r,e){return r<e?-1:r>e?1:0}let Lm=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!wa(e,t))return n;const s=this.toBBox,l=[];for(;t;){for(let a=0;a<t.children.length;a++){const c=t.children[a],h=t.leaf?s(c):c;wa(e,h)&&(t.leaf?n.push(c):ph(e,h)?this._all(c,n):l.push(c))}t=l.pop()}return n}collides(e){let t=this.data;if(!wa(e,t))return!1;const n=[];for(;t;){for(let s=0;s<t.children.length;s++){const l=t.children[s],a=t.leaf?this.toBBox(l):l;if(wa(e,a)){if(t.leaf||ph(e,a))return!0;n.push(l)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ys([]),this}remove(e,t){if(!e)return this;let n=this.data;const s=this.toBBox(e),l=[],a=[];let c,h,g;for(;n||l.length;){if(n||(n=l.pop(),h=l[l.length-1],c=a.pop(),g=!0),n.leaf){const p=dv(e,n.children,t);if(p!==-1)return n.children.splice(p,1),l.push(n),this._condense(l),this}!g&&!n.leaf&&ph(n,s)?(l.push(n),a.push(c),c=0,h=n,n=n.children[0]):h?(c++,n=h.children[c],g=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,s){const l=n-t+1;let a=this._maxEntries,c;if(l<=a)return c=ys(e.slice(t,n+1)),cs(c,this.toBBox),c;s||(s=Math.ceil(Math.log(l)/Math.log(a)),a=Math.ceil(l/Math.pow(a,s-1))),c=ys([]),c.leaf=!1,c.height=s;const h=Math.ceil(l/a),g=h*Math.ceil(Math.sqrt(a));c_(e,t,n,g,this.compareMinX);for(let p=t;p<=n;p+=g){const m=Math.min(p+g-1,n);c_(e,p,m,h,this.compareMinY);for(let y=p;y<=m;y+=h){const x=Math.min(y+h-1,m);c.children.push(this._build(e,y,x,s-1))}}return cs(c,this.toBBox),c}_chooseSubtree(e,t,n,s){for(;s.push(t),!(t.leaf||s.length-1===n);){let l=1/0,a=1/0,c;for(let h=0;h<t.children.length;h++){const g=t.children[h],p=gh(g),m=pv(e,g)-p;m<a?(a=m,l=p<l?p:l,c=g):m===a&&p<l&&(l=p,c=g)}t=c||t.children[0]}return t}_insert(e,t,n){const s=n?e:this.toBBox(e),l=[],a=this._chooseSubtree(s,this.data,t,l);for(a.children.push(e),Do(a,s);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(s,l,t)}_split(e,t){const n=e[t],s=n.children.length,l=this._minEntries;this._chooseSplitAxis(n,l,s);const a=this._chooseSplitIndex(n,l,s),c=ys(n.children.splice(a,n.children.length-a));c.height=n.height,c.leaf=n.leaf,cs(n,this.toBBox),cs(c,this.toBBox),t?e[t-1].children.push(c):this._splitRoot(n,c)}_splitRoot(e,t){this.data=ys([e,t]),this.data.height=e.height+1,this.data.leaf=!1,cs(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let s,l=1/0,a=1/0;for(let c=t;c<=n-t;c++){const h=Ao(e,0,c,this.toBBox),g=Ao(e,c,n,this.toBBox),p=_v(h,g),m=gh(h)+gh(g);p<l?(l=p,s=c,a=m<a?m:a):p===l&&m<a&&(a=m,s=c)}return s||n-t}_chooseSplitAxis(e,t,n){const s=e.leaf?this.compareMinX:fv,l=e.leaf?this.compareMinY:gv,a=this._allDistMargin(e,t,n,s),c=this._allDistMargin(e,t,n,l);a<c&&e.children.sort(s)}_allDistMargin(e,t,n,s){e.children.sort(s);const l=this.toBBox,a=Ao(e,0,t,l),c=Ao(e,n-t,n,l);let h=xa(a)+xa(c);for(let g=t;g<n-t;g++){const p=e.children[g];Do(a,e.leaf?l(p):p),h+=xa(a)}for(let g=n-t-1;g>=t;g--){const p=e.children[g];Do(c,e.leaf?l(p):p),h+=xa(c)}return h}_adjustParentBBoxes(e,t,n){for(let s=n;s>=0;s--)Do(t[s],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():cs(e[t],this.toBBox)}};function dv(r,e,t){if(!t)return e.indexOf(r);for(let n=0;n<e.length;n++)if(t(r,e[n]))return n;return-1}function cs(r,e){Ao(r,0,r.children.length,e,r)}function Ao(r,e,t,n,s){s||(s=ys(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let l=e;l<t;l++){const a=r.children[l];Do(s,r.leaf?n(a):a)}return s}function Do(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function fv(r,e){return r.minX-e.minX}function gv(r,e){return r.minY-e.minY}function gh(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function xa(r){return r.maxX-r.minX+(r.maxY-r.minY)}function pv(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function _v(r,e){const t=Math.max(r.minX,e.minX),n=Math.max(r.minY,e.minY),s=Math.min(r.maxX,e.maxX),l=Math.min(r.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,l-n)}function ph(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function wa(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function ys(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function c_(r,e,t,n,s){const l=[e,t];for(;l.length;){if(t=l.pop(),e=l.pop(),t-e<=n)continue;const a=e+Math.ceil((t-e)/n/2)*n;Im(r,a,e,t,s),l.push(e,a,a,t)}}function h_(r,e,t,n){return t!==void 0&&n!==void 0?[t/r,n/e]:t!==void 0?t/r:n!==void 0?n/e:1}class hu extends lu{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let c=e.src;Ae(!(c!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(c===void 0||c.length===0)&&a&&(c=a.src||Fe(a)),Ae(c!==void 0&&c.length>0,"A defined and non-empty `src` or `image` must be provided"),Ae(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let h;if(e.src!==void 0?h=Ce.IDLE:a!==void 0&&("complete"in a?a.complete?h=a.src?Ce.LOADED:Ce.IDLE:h=Ce.LOADING:h=Ce.LOADED),this.color_=e.color!==void 0?Ns(e.color):null,this.iconImage_=kd(a,c,this.crossOrigin_,h,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,p;if(e.size)[g,p]=e.size;else{const m=this.getImage(1);if(m.width&&m.height)g=m.width,p=m.height;else if(m instanceof HTMLImageElement){this.initialOptions_=e;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const x=this.iconImage_.getSize();this.setScale(h_(x[0],x[1],e.width,e.height))};this.listenImageChange(y);return}}g!==void 0&&this.setScale(h_(g,p,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new hu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ce.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ce.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ee.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ee.CHANGE,e)}ready(){return this.iconImage_.ready()}}let Or=0;const kt=1<<Or++,Re=1<<Or++,Xt=1<<Or++,Ln=1<<Or++,Dr=1<<Or++,Fo=1<<Or++,Ca=Math.pow(2,Or)-1,zd={[kt]:"boolean",[Re]:"number",[Xt]:"string",[Ln]:"color",[Dr]:"number[]",[Fo]:"size"},mv=Object.keys(zd).map(Number).sort(Ji);function yv(r){return r in zd}function Oo(r){const e=[];for(const t of mv)No(r,t)&&e.push(zd[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function No(r,e){return(r&e)===e}function bi(r,e){return r===e}class it{constructor(e,t){if(!yv(e))throw new Error(`literal expressions must have a specific type, got ${Oo(e)}`);this.type=e,this.value=t}}class Ev{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function km(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function ft(r,e,t){switch(typeof r){case"boolean":{if(bi(e,Xt))return new it(Xt,r?"true":"false");if(!No(e,kt))throw new Error(`got a boolean, but expected ${Oo(e)}`);return new it(kt,r)}case"number":{if(bi(e,Fo))return new it(Fo,jt(r));if(bi(e,kt))return new it(kt,!!r);if(bi(e,Xt))return new it(Xt,r.toString());if(!No(e,Re))throw new Error(`got a number, but expected ${Oo(e)}`);return new it(Re,r)}case"string":{if(bi(e,Ln))return new it(Ln,Rd(r));if(bi(e,kt))return new it(kt,!!r);if(!No(e,Xt))throw new Error(`got a string, but expected ${Oo(e)}`);return new it(Xt,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return Mv(r,e,t);for(const n of r)if(typeof n!="number")throw new Error("expected an array of numbers");if(bi(e,Fo)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new it(Fo,r)}if(bi(e,Ln)){if(r.length===3)return new it(Ln,[...r,1]);if(r.length===4)return new it(Ln,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!No(e,Dr))throw new Error(`got an array of numbers, but expected ${Oo(e)}`);return new it(Dr,r)}const j={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},vv={[j.Get]:ye(we(1,1/0),d_),[j.Var]:ye(we(1,1),xv),[j.Has]:ye(we(1,1/0),d_),[j.Id]:ye(wv,hs),[j.Concat]:ye(we(2,1/0),De(Xt)),[j.GeometryType]:ye(Cv,hs),[j.LineMetric]:ye(hs),[j.Resolution]:ye(hs),[j.Zoom]:ye(hs),[j.Time]:ye(hs),[j.Any]:ye(we(2,1/0),De(kt)),[j.All]:ye(we(2,1/0),De(kt)),[j.Not]:ye(we(1,1),De(kt)),[j.Equal]:ye(we(2,2),De(Ca)),[j.NotEqual]:ye(we(2,2),De(Ca)),[j.GreaterThan]:ye(we(2,2),De(Re)),[j.GreaterThanOrEqualTo]:ye(we(2,2),De(Re)),[j.LessThan]:ye(we(2,2),De(Re)),[j.LessThanOrEqualTo]:ye(we(2,2),De(Re)),[j.Multiply]:ye(we(2,1/0),f_),[j.Coalesce]:ye(we(2,1/0),f_),[j.Divide]:ye(we(2,2),De(Re)),[j.Add]:ye(we(2,1/0),De(Re)),[j.Subtract]:ye(we(2,2),De(Re)),[j.Clamp]:ye(we(3,3),De(Re)),[j.Mod]:ye(we(2,2),De(Re)),[j.Pow]:ye(we(2,2),De(Re)),[j.Abs]:ye(we(1,1),De(Re)),[j.Floor]:ye(we(1,1),De(Re)),[j.Ceil]:ye(we(1,1),De(Re)),[j.Round]:ye(we(1,1),De(Re)),[j.Sin]:ye(we(1,1),De(Re)),[j.Cos]:ye(we(1,1),De(Re)),[j.Atan]:ye(we(1,2),De(Re)),[j.Sqrt]:ye(we(1,1),De(Re)),[j.Match]:ye(we(4,1/0),g_,Tv),[j.Between]:ye(we(3,3),De(Re)),[j.Interpolate]:ye(we(6,1/0),g_,Rv),[j.Case]:ye(we(3,1/0),Sv,Iv),[j.In]:ye(we(2,2),Lv),[j.Number]:ye(we(1,1/0),De(Ca)),[j.String]:ye(we(1,1/0),De(Ca)),[j.Array]:ye(we(1,1/0),De(Re)),[j.Color]:ye(we(1,4),De(Re)),[j.Band]:ye(we(1,3),De(Re)),[j.Palette]:ye(we(2,2),kv),[j.ToString]:ye(we(1,1),De(kt|Re|Xt|Ln))};function d_(r,e,t){const n=r.length-1,s=new Array(n);for(let l=0;l<n;++l){const a=r[l+1];switch(typeof a){case"number":{s[l]=new it(Re,a);break}case"string":{s[l]=new it(Xt,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}l===0&&t.properties.add(String(a))}return s}function xv(r,e,t){const n=r[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new it(Xt,n)]}function wv(r,e,t){t.featureId=!0}function Cv(r,e,t){t.geometryType=!0}function hs(r,e,t){const n=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function we(r,e){return function(t,n,s){const l=t[0],a=t.length-1;if(r===e){if(a!==r){const c=r===1?"":"s";throw new Error(`expected ${r} argument${c} for ${l}, got ${a}`)}}else if(a<r||a>e){const c=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`expected ${c} arguments for ${l}, got ${a}`)}}}function f_(r,e,t){const n=r.length-1,s=new Array(n);for(let l=0;l<n;++l){const a=ft(r[l+1],e,t);s[l]=a}return s}function De(r){return function(e,t,n){const s=e.length-1,l=new Array(s);for(let a=0;a<s;++a){const c=ft(e[a+1],r,n);l[a]=c}return l}}function Sv(r,e,t){const n=r[0],s=r.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${s} instead`)}function g_(r,e,t){const n=r[0],s=r.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${s} instead`)}function Tv(r,e,t){const n=r.length-1,s=Xt|Re|kt,l=ft(r[1],s,t),a=ft(r[r.length-1],e,t),c=new Array(n-2);for(let h=0;h<n-2;h+=2){try{const g=ft(r[h+2],l.type,t);c[h]=g}catch(g){throw new Error(`failed to parse argument ${h+1} of match expression: ${g.message}`)}try{const g=ft(r[h+3],a.type,t);c[h+1]=g}catch(g){throw new Error(`failed to parse argument ${h+2} of match expression: ${g.message}`)}}return[l,...c,a]}function Rv(r,e,t){const n=r[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":const h=n[1];if(typeof h!="number"||h<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(h)} instead`);s=h;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const l=new it(Re,s);let a;try{a=ft(r[2],Re,t)}catch(h){throw new Error(`failed to parse argument 1 in interpolate expression: ${h.message}`)}const c=new Array(r.length-3);for(let h=0;h<c.length;h+=2){try{const g=ft(r[h+3],Re,t);c[h]=g}catch(g){throw new Error(`failed to parse argument ${h+2} for interpolate expression: ${g.message}`)}try{const g=ft(r[h+4],e,t);c[h+1]=g}catch(g){throw new Error(`failed to parse argument ${h+3} for interpolate expression: ${g.message}`)}}return[l,a,...c]}function Iv(r,e,t){const n=ft(r[r.length-1],e,t),s=new Array(r.length-1);for(let l=0;l<s.length-1;l+=2){try{const a=ft(r[l+1],kt,t);s[l]=a}catch(a){throw new Error(`failed to parse argument ${l} of case expression: ${a.message}`)}try{const a=ft(r[l+2],n.type,t);s[l+1]=a}catch(a){throw new Error(`failed to parse argument ${l+1} of case expression: ${a.message}`)}}return s[s.length-1]=n,s}function Lv(r,e,t){let n=r[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],s=Xt}else s=Re;const l=new Array(n.length);for(let c=0;c<l.length;c++)try{const h=ft(n[c],s,t);l[c]=h}catch(h){throw new Error(`failed to parse haystack item ${c} for "in" expression: ${h.message}`)}return[ft(r[1],s,t),...l]}function kv(r,e,t){let n;try{n=ft(r[1],Re,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const s=r[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const l=new Array(s.length);for(let a=0;a<l.length;a++){let c;try{c=ft(s[a],Ln,t)}catch(h){throw new Error(`failed to parse color at index ${a} in palette expression: ${h.message}`)}if(!(c instanceof it))throw new Error(`the palette color at index ${a} must be a literal value`);l[a]=c}return[n,...l]}function ye(...r){return function(e,t,n){const s=e[0];let l;for(let a=0;a<r.length;a++){const c=r[a](e,t,n);if(a==r.length-1){if(!c)throw new Error("expected last argument validator to return the parsed args");l=c}}return new Ev(t,s,...l)}}function Mv(r,e,t){const n=r[0],s=vv[n];if(!s)throw new Error(`unknown operator: ${n}`);return s(r,e,t)}function Mm(r){if(!r)return"";const e=r.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Mm(r.getGeometries()[0]);default:return""}}function Pm(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function vi(r,e,t){const n=ft(r,e,t);return Pn(n)}function Pn(r,e){if(r instanceof it){if(r.type===Ln&&typeof r.value=="string"){const n=Rd(r.value);return function(){return n}}return function(){return r.value}}const t=r.operator;switch(t){case j.Number:case j.String:case j.Coalesce:return Pv(r);case j.Get:case j.Var:case j.Has:return Av(r);case j.Id:return n=>n.featureId;case j.GeometryType:return n=>n.geometryType;case j.Concat:{const n=r.args.map(s=>Pn(s));return s=>"".concat(...n.map(l=>l(s).toString()))}case j.Resolution:return n=>n.resolution;case j.Any:case j.All:case j.Between:case j.In:case j.Not:return Fv(r);case j.Equal:case j.NotEqual:case j.LessThan:case j.LessThanOrEqualTo:case j.GreaterThan:case j.GreaterThanOrEqualTo:return Dv(r);case j.Multiply:case j.Divide:case j.Add:case j.Subtract:case j.Clamp:case j.Mod:case j.Pow:case j.Abs:case j.Floor:case j.Ceil:case j.Round:case j.Sin:case j.Cos:case j.Atan:case j.Sqrt:return Ov(r);case j.Case:return Nv(r);case j.Match:return zv(r);case j.Interpolate:return Gv(r);case j.ToString:return Uv(r);default:throw new Error(`Unsupported operator ${t}`)}}function Pv(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Pn(r.args[l]);switch(t){case j.Coalesce:return l=>{for(let a=0;a<n;++a){const c=s[a](l);if(typeof c<"u"&&c!==null)return c}throw new Error("Expected one of the values to be non-null")};case j.Number:case j.String:return l=>{for(let a=0;a<n;++a){const c=s[a](l);if(typeof c===t)return c}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Av(r,e){const n=r.args[0].value;switch(r.operator){case j.Get:return s=>{const l=r.args;let a=s.properties[n];for(let c=1,h=l.length;c<h;++c){const p=l[c].value;a=a[p]}return a};case j.Var:return s=>s.variables[n];case j.Has:return s=>{const l=r.args;if(!(n in s.properties))return!1;let a=s.properties[n];for(let c=1,h=l.length;c<h;++c){const p=l[c].value;if(!a||!Object.hasOwn(a,p))return!1;a=a[p]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function Dv(r,e){const t=r.operator,n=Pn(r.args[0]),s=Pn(r.args[1]);switch(t){case j.Equal:return l=>n(l)===s(l);case j.NotEqual:return l=>n(l)!==s(l);case j.LessThan:return l=>n(l)<s(l);case j.LessThanOrEqualTo:return l=>n(l)<=s(l);case j.GreaterThan:return l=>n(l)>s(l);case j.GreaterThanOrEqualTo:return l=>n(l)>=s(l);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Fv(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Pn(r.args[l]);switch(t){case j.Any:return l=>{for(let a=0;a<n;++a)if(s[a](l))return!0;return!1};case j.All:return l=>{for(let a=0;a<n;++a)if(!s[a](l))return!1;return!0};case j.Between:return l=>{const a=s[0](l),c=s[1](l),h=s[2](l);return a>=c&&a<=h};case j.In:return l=>{const a=s[0](l);for(let c=1;c<n;++c)if(a===s[c](l))return!0;return!1};case j.Not:return l=>!s[0](l);default:throw new Error(`Unsupported logical operator ${t}`)}}function Ov(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Pn(r.args[l]);switch(t){case j.Multiply:return l=>{let a=1;for(let c=0;c<n;++c)a*=s[c](l);return a};case j.Divide:return l=>s[0](l)/s[1](l);case j.Add:return l=>{let a=0;for(let c=0;c<n;++c)a+=s[c](l);return a};case j.Subtract:return l=>s[0](l)-s[1](l);case j.Clamp:return l=>{const a=s[0](l),c=s[1](l);if(a<c)return c;const h=s[2](l);return a>h?h:a};case j.Mod:return l=>s[0](l)%s[1](l);case j.Pow:return l=>Math.pow(s[0](l),s[1](l));case j.Abs:return l=>Math.abs(s[0](l));case j.Floor:return l=>Math.floor(s[0](l));case j.Ceil:return l=>Math.ceil(s[0](l));case j.Round:return l=>Math.round(s[0](l));case j.Sin:return l=>Math.sin(s[0](l));case j.Cos:return l=>Math.cos(s[0](l));case j.Atan:return n===2?l=>Math.atan2(s[0](l),s[1](l)):l=>Math.atan(s[0](l));case j.Sqrt:return l=>Math.sqrt(s[0](l));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Nv(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Pn(r.args[s]);return s=>{for(let l=0;l<t-1;l+=2)if(n[l](s))return n[l+1](s);return n[t-1](s)}}function zv(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Pn(r.args[s]);return s=>{const l=n[0](s);for(let a=1;a<t;a+=2)if(l===n[a](s))return n[a+1](s);return n[t-1](s)}}function Gv(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Pn(r.args[s]);return s=>{const l=n[0](s),a=n[1](s);let c,h;for(let g=2;g<t;g+=2){const p=n[g](s);let m=n[g+1](s);const y=Array.isArray(m);if(y&&(m=ME(m)),p>=a)return g===2?m:y?Xv(l,a,c,h,p,m):zo(l,a,c,h,p,m);c=p,h=m}return h}}function Uv(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Pn(r.args[l]);switch(t){case j.ToString:return l=>{const a=s[0](l);return r.args[0].type===Ln?Id(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function zo(r,e,t,n,s,l){const a=s-t;if(a===0)return n;const c=e-t,h=r===1?c/a:(Math.pow(r,c)-1)/(Math.pow(r,a)-1);return n+h*(l-n)}function Xv(r,e,t,n,s,l){if(s-t===0)return n;const c=e_(n),h=e_(l);let g=h[2]-c[2];g>180?g-=360:g<-180&&(g+=360);const p=[zo(r,e,t,c[0],s,h[0]),zo(r,e,t,c[1],s,h[1]),c[2]+zo(r,e,t,0,s,g),zo(r,e,t,n[3],s,l[3])];return gm(PE(p))}function Wv(r){return!0}function jv(r){const e=km(),t=bv(r,e),n=Pm();return function(s,l){if(n.properties=s.getPropertiesInternal(),n.resolution=l,e.featureId){const a=s.getId();a!==void 0?n.featureId=a:n.featureId=null}return e.geometryType&&(n.geometryType=Mm(s.getGeometry())),t(n)}}function p_(r){const e=km(),t=r.length,n=new Array(t);for(let a=0;a<t;++a)n[a]=jh(r[a],e);const s=Pm(),l=new Array(t);return function(a,c){if(s.properties=a.getPropertiesInternal(),s.resolution=c,e.featureId){const g=a.getId();g!==void 0?s.featureId=g:s.featureId=null}let h=0;for(let g=0;g<t;++g){const p=n[g](s);p&&(l[h]=p,h+=1)}return l.length=h,l}}function bv(r,e){const t=r.length,n=new Array(t);for(let s=0;s<t;++s){const l=r[s],a="filter"in l?vi(l.filter,kt,e):Wv;let c;if(Array.isArray(l.style)){const h=l.style.length;c=new Array(h);for(let g=0;g<h;++g)c[g]=jh(l.style[g],e)}else c=[jh(l.style,e)];n[s]={filter:a,styles:c}}return function(s){const l=[];let a=!1;for(let c=0;c<t;++c){const h=n[c].filter;if(h(s)&&!(r[c].else&&a)){a=!0;for(const g of n[c].styles){const p=g(s);p&&l.push(p)}}}return l}}function jh(r,e){const t=Ho(r,"",e),n=$o(r,"",e),s=Bv(r,e),l=Yv(r,e),a=Wt(r,"z-index",e);if(!t&&!n&&!s&&!l&&!Ds(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const c=new bt;return function(h){let g=!0;if(t){const p=t(h);p&&(g=!1),c.setFill(p)}if(n){const p=n(h);p&&(g=!1),c.setStroke(p)}if(s){const p=s(h);p&&(g=!1),c.setText(p)}if(l){const p=l(h);p&&(g=!1),c.setImage(p)}return a&&c.setZIndex(a(h)),g?null:c}}function Ho(r,e,t){let n;if(e+"fill-pattern-src"in r)n=Hv(r,e+"fill-",t);else{if(r[e+"fill-color"]==="none")return l=>null;n=Gd(r,e+"fill-color",t)}if(!n)return null;const s=new Ar;return function(l){const a=n(l);return a===Td?null:(s.setColor(a),s)}}function $o(r,e,t){const n=Wt(r,e+"stroke-width",t),s=Gd(r,e+"stroke-color",t);if(!n&&!s)return null;const l=di(r,e+"stroke-line-cap",t),a=di(r,e+"stroke-line-join",t),c=Am(r,e+"stroke-line-dash",t),h=Wt(r,e+"stroke-line-dash-offset",t),g=Wt(r,e+"stroke-miter-limit",t),p=new Kn;return function(m){if(s){const y=s(m);if(y===Td)return null;p.setColor(y)}if(n&&p.setWidth(n(m)),l){const y=l(m);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");p.setLineCap(y)}if(a){const y=a(m);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");p.setLineJoin(y)}return c&&p.setLineDash(c(m)),h&&p.setLineDashOffset(h(m)),g&&p.setMiterLimit(g(m)),p}}function Bv(r,e){const t="text-",n=di(r,t+"value",e);if(!n)return null;const s=Ho(r,t,e),l=Ho(r,t+"background-",e),a=$o(r,t,e),c=$o(r,t+"background-",e),h=di(r,t+"font",e),g=Wt(r,t+"max-angle",e),p=Wt(r,t+"offset-x",e),m=Wt(r,t+"offset-y",e),y=Ls(r,t+"overflow",e),x=di(r,t+"placement",e),E=Wt(r,t+"repeat",e),w=du(r,t+"scale",e),C=Ls(r,t+"rotate-with-view",e),I=Wt(r,t+"rotation",e),R=di(r,t+"align",e),D=di(r,t+"justify",e),k=di(r,t+"baseline",e),P=Ls(r,t+"keep-upright",e),X=Am(r,t+"padding",e),V=fu(r,t+"declutter-mode"),U=new Pd({declutterMode:V});return function(b){if(U.setText(n(b)),s&&U.setFill(s(b)),l&&U.setBackgroundFill(l(b)),a&&U.setStroke(a(b)),c&&U.setBackgroundStroke(c(b)),h&&U.setFont(h(b)),g&&U.setMaxAngle(g(b)),p&&U.setOffsetX(p(b)),m&&U.setOffsetY(m(b)),y&&U.setOverflow(y(b)),x){const B=x(b);if(B!=="point"&&B!=="line")throw new Error("Expected point or line for text-placement");U.setPlacement(B)}if(E&&U.setRepeat(E(b)),w&&U.setScale(w(b)),C&&U.setRotateWithView(C(b)),I&&U.setRotation(I(b)),R){const B=R(b);if(B!=="left"&&B!=="center"&&B!=="right"&&B!=="end"&&B!=="start")throw new Error("Expected left, right, center, start, or end for text-align");U.setTextAlign(B)}if(D){const B=D(b);if(B!=="left"&&B!=="right"&&B!=="center")throw new Error("Expected left, right, or center for text-justify");U.setJustify(B)}if(k){const B=k(b);if(B!=="bottom"&&B!=="top"&&B!=="middle"&&B!=="alphabetic"&&B!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");U.setTextBaseline(B)}return X&&U.setPadding(X(b)),P&&U.setKeepUpright(P(b)),U}}function Yv(r,e){return"icon-src"in r?Vv(r,e):"shape-points"in r?Kv(r,e):"circle-radius"in r?Zv(r,e):null}function Vv(r,e){const t="icon-",n=t+"src",s=Dm(r[n],n),l=Wa(r,t+"anchor",e),a=du(r,t+"scale",e),c=Wt(r,t+"opacity",e),h=Wa(r,t+"displacement",e),g=Wt(r,t+"rotation",e),p=Ls(r,t+"rotate-with-view",e),m=m_(r,t+"anchor-origin"),y=y_(r,t+"anchor-x-units"),x=y_(r,t+"anchor-y-units"),E=Jv(r,t+"color"),w=qv(r,t+"cross-origin"),C=Qv(r,t+"offset"),I=m_(r,t+"offset-origin"),R=ja(r,t+"width"),D=ja(r,t+"height"),k=$v(r,t+"size"),P=fu(r,t+"declutter-mode"),X=new hu({src:s,anchorOrigin:m,anchorXUnits:y,anchorYUnits:x,color:E,crossOrigin:w,offset:C,offsetOrigin:I,height:D,width:R,size:k,declutterMode:P});return function(V){return c&&X.setOpacity(c(V)),h&&X.setDisplacement(h(V)),g&&X.setRotation(g(V)),p&&X.setRotateWithView(p(V)),a&&X.setScale(a(V)),l&&X.setAnchor(l(V)),X}}function Kv(r,e){const t="shape-",n=t+"points",s=t+"radius",l=bh(r[n],n),a=bh(r[s],s),c=Ho(r,t,e),h=$o(r,t,e),g=du(r,t+"scale",e),p=Wa(r,t+"displacement",e),m=Wt(r,t+"rotation",e),y=Ls(r,t+"rotate-with-view",e),x=ja(r,t+"radius2"),E=ja(r,t+"angle"),w=fu(r,t+"declutter-mode"),C=new uu({points:l,radius:a,radius2:x,angle:E,declutterMode:w});return function(I){return c&&C.setFill(c(I)),h&&C.setStroke(h(I)),p&&C.setDisplacement(p(I)),m&&C.setRotation(m(I)),y&&C.setRotateWithView(y(I)),g&&C.setScale(g(I)),C}}function Zv(r,e){const t="circle-",n=Ho(r,t,e),s=$o(r,t,e),l=Wt(r,t+"radius",e),a=du(r,t+"scale",e),c=Wa(r,t+"displacement",e),h=Wt(r,t+"rotation",e),g=Ls(r,t+"rotate-with-view",e),p=fu(r,t+"declutter-mode"),m=new il({radius:5,declutterMode:p});return function(y){return l&&m.setRadius(l(y)),n&&m.setFill(n(y)),s&&m.setStroke(s(y)),c&&m.setDisplacement(c(y)),h&&m.setRotation(h(y)),g&&m.setRotateWithView(g(y)),a&&m.setScale(a(y)),m}}function Wt(r,e,t){if(!(e in r))return;const n=vi(r[e],Re,t);return function(s){return bh(n(s),e)}}function di(r,e,t){if(!(e in r))return null;const n=vi(r[e],Xt,t);return function(s){return Dm(n(s),e)}}function Hv(r,e,t){const n=di(r,e+"pattern-src",t),s=__(r,e+"pattern-offset",t),l=__(r,e+"pattern-size",t),a=Gd(r,e+"color",t);return function(c){return{src:n(c),offset:s&&s(c),size:l&&l(c),color:a&&a(c)}}}function Ls(r,e,t){if(!(e in r))return null;const n=vi(r[e],kt,t);return function(s){const l=n(s);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function Gd(r,e,t){if(!(e in r))return null;const n=vi(r[e],Ln,t);return function(s){return Fm(n(s),e)}}function Am(r,e,t){if(!(e in r))return null;const n=vi(r[e],Dr,t);return function(s){return rl(n(s),e)}}function Wa(r,e,t){if(!(e in r))return null;const n=vi(r[e],Dr,t);return function(s){const l=rl(n(s),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function __(r,e,t){if(!(e in r))return null;const n=vi(r[e],Dr,t);return function(s){return Om(n(s),e)}}function du(r,e,t){if(!(e in r))return null;const n=vi(r[e],Dr|Re,t);return function(s){return ex(n(s),e)}}function ja(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function $v(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return jt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function qv(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function m_(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function y_(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Qv(r,e){const t=r[e];if(t!==void 0)return rl(t,e)}function fu(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Jv(r,e){const t=r[e];if(t!==void 0)return Fm(t,e)}function rl(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let n=0;n<t;++n)if(typeof r[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function Dm(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function bh(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function Fm(r,e){if(typeof r=="string")return r;const t=rl(r,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Om(r,e){const t=rl(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function ex(r,e){return typeof r=="number"?r:Om(r,e)}const E_={RENDER_ORDER:"renderOrder"};class Nm extends cu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(E_.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new Lm(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(E_.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?Sm:e;const t=tx(e);this.styleFunction_=e===null?void 0:$E(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function tx(r){if(r===void 0)return Sm;if(!r)return null;if(typeof r=="function"||r instanceof bt)return r;if(!Array.isArray(r))return p_([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof bt){const s=new Array(e);for(let l=0;l<e;++l){const a=r[l];if(!(a instanceof bt))throw new Error("Expected a list of style instances");s[l]=a}return s}if("style"in t){const s=new Array(e);for(let l=0;l<e;++l){const a=r[l];if(!("style"in a))throw new Error("Expected a list of rules with a style property");s[l]=a}return jv(s)}return p_(r)}const fe={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Sa=[fe.FILL],Qi=[fe.STROKE],Pr=[fe.BEGIN_PATH],v_=[fe.CLOSE_PATH];class zm{drawCustom(e,t,n,s,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class sl extends zm{constructor(e,t,n,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,l=this.coordinates;let a=l.length;for(let c=0,h=e.length;c<h;c+=t)s[0]=e[c],s[1]=e[c+1],Fs(n,s)&&(l[a++]=s[0],l[a++]=s[1]);return a}appendFlatLineCoordinates(e,t,n,s,l,a){const c=this.coordinates;let h=c.length;const g=this.getBufferedMaxExtent();a&&(t+=s);let p=e[t],m=e[t+1];const y=this.tmpCoordinate_;let x=!0,E,w,C;for(E=t+s;E<n;E+=s)y[0]=e[E],y[1]=e[E+1],C=kh(g,y),C!==w?(x&&(c[h++]=p,c[h++]=m,x=!1),c[h++]=y[0],c[h++]=y[1]):C===lt.INTERSECTING?(c[h++]=y[0],c[h++]=y[1],x=!1):x=!0,p=y[0],m=y[1],w=C;return(l&&x||E===t+s)&&(c[h++]=p,c[h++]=m),h}drawCustomCoordinates_(e,t,n,s,l){for(let a=0,c=n.length;a<c;++a){const h=n[a],g=this.appendFlatLineCoordinates(e,t,h,s,!1,!1);l.push(g),t=h}return t}drawCustom(e,t,n,s,l){this.beginGeometry(e,t,l);const a=e.getType(),c=e.getStride(),h=this.coordinates.length;let g,p,m,y,x;switch(a){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),y=[];const E=e.getEndss();x=0;for(let w=0,C=E.length;w<C;++w){const I=[];x=this.drawCustomCoordinates_(g,x,E[w],c,I),y.push(I)}this.instructions.push([fe.CUSTOM,h,y,e,n,zh,l]),this.hitDetectionInstructions.push([fe.CUSTOM,h,y,e,s||n,zh,l]);break;case"Polygon":case"MultiLineString":m=[],g=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),x=this.drawCustomCoordinates_(g,0,e.getEnds(),c,m),this.instructions.push([fe.CUSTOM,h,m,e,n,jo,l]),this.hitDetectionInstructions.push([fe.CUSTOM,h,m,e,s||n,jo,l]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),p=this.appendFlatLineCoordinates(g,0,g.length,c,!1,!1),this.instructions.push([fe.CUSTOM,h,p,e,n,qi,l]),this.hitDetectionInstructions.push([fe.CUSTOM,h,p,e,s||n,qi,l]);break;case"MultiPoint":g=e.getFlatCoordinates(),p=this.appendFlatPointCoordinates(g,c),p>h&&(this.instructions.push([fe.CUSTOM,h,p,e,n,qi,l]),this.hitDetectionInstructions.push([fe.CUSTOM,h,p,e,s||n,qi,l]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),p=this.coordinates.length,this.instructions.push([fe.CUSTOM,h,p,e,n,void 0,l]),this.hitDetectionInstructions.push([fe.CUSTOM,h,p,e,s||n,void 0,l]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[fe.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fe.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let s,l,a=-1;for(t=0;t<n;++t)s=e[t],l=s[0],l==fe.END_GEOMETRY?a=t:l==fe.BEGIN_GEOMETRY&&(s[2]=t,p1(this.hitDetectionInstructions,a,t),a=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const s=e.getColor();n.fillPatternScale=s&&typeof s=="object"&&"src"in s?this.pixelRatio:1,n.fillStyle=Yn(s||Ut)}else n.fillStyle=void 0;if(t){const s=t.getColor();n.strokeStyle=Yn(s||Vo);const l=t.getLineCap();n.lineCap=l!==void 0?l:zs;const a=t.getLineDash();n.lineDash=a?a.slice():gi;const c=t.getLineDashOffset();n.lineDashOffset=c||pi;const h=t.getLineJoin();n.lineJoin=h!==void 0?h:Gs;const g=t.getWidth();n.lineWidth=g!==void 0?g:Zo;const p=t.getMiterLimit();n.miterLimit=p!==void 0?p:Yo,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[fe.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[fe.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,s=e.lineCap,l=e.lineDash,a=e.lineDashOffset,c=e.lineJoin,h=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||l!=e.currentLineDash&&!sr(e.currentLineDash,l)||e.currentLineDashOffset!=a||e.currentLineJoin!=c||e.currentLineWidth!=h||e.currentMiterLimit!=g)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=l,e.currentLineDashOffset=a,e.currentLineJoin=c,e.currentLineWidth=h,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[fe.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=X_(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;ed(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class nx extends sl{constructor(e,t,n,s){super(e,t,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Fs(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const s=e.getFlatCoordinates(),l=e.getStride(),a=this.coordinates.length,c=this.appendFlatPointCoordinates(s,l);this.instructions.push([fe.DRAW_IMAGE,a,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,a,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const s=e.getFlatCoordinates(),l=[];for(let h=0,g=s.length;h<g;h+=e.getStride())(!this.maxExtent||Fs(this.maxExtent,s.slice(h,h+2)))&&l.push(s[h],s[h+1]);const a=this.coordinates.length,c=this.appendFlatPointCoordinates(l,2);this.instructions.push([fe.DRAW_IMAGE,a,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,a,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),s=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class ix extends sl{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinates_(e,t,n,s){const l=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,n,s,!1,!1),c=[fe.MOVE_TO_LINE_TO,l,a];return this.instructions.push(c),this.hitDetectionInstructions.push(c),n}drawLineString(e,t,n){const s=this.state,l=s.strokeStyle,a=s.lineWidth;if(l===void 0||a===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,gi,pi],Pr);const c=e.getFlatCoordinates(),h=e.getStride();this.drawFlatCoordinates_(c,0,c.length,h),this.hitDetectionInstructions.push(Qi),this.endGeometry(t)}drawMultiLineString(e,t,n){const s=this.state,l=s.strokeStyle,a=s.lineWidth;if(l===void 0||a===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,gi,pi],Pr);const c=e.getEnds(),h=e.getFlatCoordinates(),g=e.getStride();let p=0;for(let m=0,y=c.length;m<y;++m)p=this.drawFlatCoordinates_(h,p,c[m],g);this.hitDetectionInstructions.push(Qi),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Qi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Qi),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Pr)}}class x_ extends sl{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinatess_(e,t,n,s){const l=this.state,a=l.fillStyle!==void 0,c=l.strokeStyle!==void 0,h=n.length;this.instructions.push(Pr),this.hitDetectionInstructions.push(Pr);for(let g=0;g<h;++g){const p=n[g],m=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,p,s,!0,!c),x=[fe.MOVE_TO_LINE_TO,m,y];this.instructions.push(x),this.hitDetectionInstructions.push(x),c&&(this.instructions.push(v_),this.hitDetectionInstructions.push(v_)),t=p}return a&&(this.instructions.push(Sa),this.hitDetectionInstructions.push(Sa)),c&&(this.instructions.push(Qi),this.hitDetectionInstructions.push(Qi)),t}drawCircle(e,t,n){const s=this.state,l=s.fillStyle,a=s.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Ut]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,gi,pi]);const c=e.getFlatCoordinates(),h=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(c,0,c.length,h,!1,!1);const p=[fe.CIRCLE,g];this.instructions.push(Pr,p),this.hitDetectionInstructions.push(Pr,p),s.fillStyle!==void 0&&(this.instructions.push(Sa),this.hitDetectionInstructions.push(Sa)),s.strokeStyle!==void 0&&(this.instructions.push(Qi),this.hitDetectionInstructions.push(Qi)),this.endGeometry(t)}drawPolygon(e,t,n){const s=this.state,l=s.fillStyle,a=s.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Ut]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,gi,pi]);const c=e.getEnds(),h=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(h,0,c,g),this.endGeometry(t)}drawMultiPolygon(e,t,n){const s=this.state,l=s.fillStyle,a=s.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Ut]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,gi,pi]);const c=e.getEndss(),h=e.getOrientedFlatCoordinates(),g=e.getStride();let p=0;for(let m=0,y=c.length;m<y;++m)p=this.drawFlatCoordinatess_(h,p,c[m],g);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,s=t.length;n<s;++n)t[n]=Rr(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function rx(r,e,t,n,s){const l=[];let a=t,c=0,h=e.slice(t,2);for(;c<r&&a+s<n;){const[g,p]=h.slice(-2),m=e[a+s],y=e[a+s+1],x=Math.sqrt((m-g)*(m-g)+(y-p)*(y-p));if(c+=x,c>=r){const E=(r-c+x)/x,w=$t(g,m,E),C=$t(p,y,E);h.push(w,C),l.push(h),h=[w,C],c==r&&(a+=s),c=0}else if(c<r)h.push(e[a+s],e[a+s+1]),a+=s;else{const E=x-c,w=$t(g,m,E/x),C=$t(p,y,E/x);h.push(w,C),l.push(h),h=[w,C],c=0,a+=s}}return c>0&&l.push(h),l}function sx(r,e,t,n,s){let l=t,a=t,c=0,h=0,g=t,p,m,y,x,E,w,C,I,R,D;for(m=t;m<n;m+=s){const k=e[m],P=e[m+1];E!==void 0&&(R=k-E,D=P-w,x=Math.sqrt(R*R+D*D),C!==void 0&&(h+=y,p=Math.acos((C*R+I*D)/(y*x)),p>r&&(h>c&&(c=h,l=g,a=m),h=0,g=m-s)),y=x,C=R,I=D),E=k,w=P}return h+=x,h>c?[g,m]:[l,a]}const ba={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class ox extends sl{constructor(e,t,n,s){super(e,t,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ut]={fillStyle:Ut},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const s=this.textFillState_,l=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!s&&!l)return;const c=this.coordinates;let h=c.length;const g=e.getType();let p=null,m=e.getStride();if(a.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!Mt(this.maxExtent,e.getExtent()))return;let y;if(p=e.getFlatCoordinates(),g=="LineString")y=[p.length];else if(g=="MultiLineString")y=e.getEnds();else if(g=="Polygon")y=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const C=e.getEndss();y=[];for(let I=0,R=C.length;I<R;++I)y.push(C[I][0])}this.beginGeometry(e,t,n);const x=a.repeat,E=x?void 0:a.textAlign;let w=0;for(let C=0,I=y.length;C<I;++C){let R;x?R=rx(x*this.resolution,p,w,y[C],m):R=[p.slice(w,y[C])];for(let D=0,k=R.length;D<k;++D){const P=R[D];let X=0,V=P.length;if(E==null){const b=sx(a.maxAngle,P,0,P.length,2);X=b[0],V=b[1]}for(let b=X;b<V;b+=m)c.push(P[b],P[b+1]);const U=c.length;w=y[C],this.drawChars_(h,U),h=U}}this.endGeometry(t)}else{let y=a.overflow?null:[];switch(g){case"Point":case"MultiPoint":p=e.getFlatCoordinates();break;case"LineString":p=e.getFlatMidpoint();break;case"Circle":p=e.getCenter();break;case"MultiLineString":p=e.getFlatMidpoints(),m=2;break;case"Polygon":p=e.getFlatInteriorPoint(),a.overflow||y.push(p[2]/this.resolution),m=3;break;case"MultiPolygon":const R=e.getFlatInteriorPoints();p=[];for(let D=0,k=R.length;D<k;D+=3)a.overflow||y.push(R[D+2]/this.resolution),p.push(R[D],R[D+1]);if(p.length===0)return;m=2;break}const x=this.appendFlatPointCoordinates(p,m);if(x===h)return;if(y&&(x-h)/2!==p.length/m){let R=h/2;y=y.filter((D,k)=>{const P=c[(R+k)*2]===p[k*m]&&c[(R+k)*2+1]===p[k*m+1];return P||--R,P})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,n);let E=a.padding;if(E!=Mr&&(a.scale[0]<0||a.scale[1]<0)){let R=a.padding[0],D=a.padding[1],k=a.padding[2],P=a.padding[3];a.scale[0]<0&&(D=-D,P=-P),a.scale[1]<0&&(R=-R,k=-k),E=[R,D,k,P]}const w=this.pixelRatio;this.instructions.push([fe.DRAW_IMAGE,h,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,E==Mr?Mr:E.map(function(R){return R*w}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const C=1/w,I=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=Ut,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,h,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[C,C],NaN,this.declutterMode_,this.declutterImageWithText_,E,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ut:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),a.backgroundFill&&(this.state.fillStyle=I,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:t.font,textAlign:t.textAlign||Ko,justify:t.justify,textBaseline:t.textBaseline||Ua,scale:t.scale});const a=this.fillKey_;n&&(a in this.fillStates||(this.fillStates[a]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,s=this.textState_,l=this.strokeKey_,a=this.textKey_,c=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,g=ba[s.textBaseline],p=this.textOffsetY_*h,m=this.text_,y=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([fe.DRAW_CHARS,e,t,g,s.overflow,c,s.maxAngle,h,p,l,y*h,m,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fe.DRAW_CHARS,e,t,g,s.overflow,c&&Ut,s.maxAngle,h,p,l,y*h,m,a,1/h,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let n,s,l;if(!e)this.text_="";else{const a=e.getFill();a?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Yn(a.getColor()||Ut)):(s=null,this.textFillState_=s);const c=e.getStroke();if(!c)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const w=c.getLineDash(),C=c.getLineDashOffset(),I=c.getWidth(),R=c.getMiterLimit();l.lineCap=c.getLineCap()||zs,l.lineDash=w?w.slice():gi,l.lineDashOffset=C===void 0?pi:C,l.lineJoin=c.getLineJoin()||Gs,l.lineWidth=I===void 0?Zo:I,l.miterLimit=R===void 0?Yo:R,l.strokeStyle=Yn(c.getColor()||Vo)}n=this.textState_;const h=e.getFont()||wm;YE(h);const g=e.getScaleArray();n.overflow=e.getOverflow(),n.font=h,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Ua,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||Mr,n.scale=g===void 0?[1,1]:g;const p=e.getOffsetX(),m=e.getOffsetY(),y=e.getRotateWithView(),x=e.getKeepUpright(),E=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=p===void 0?0:p,this.textOffsetY_=m===void 0?0:m,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=x===void 0?!0:x,this.textRotation_=E===void 0?0:E,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:Fe(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+Fe(s.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const lx={Circle:x_,Default:sl,Image:nx,LineString:ix,Polygon:x_,Text:ox};class ax{constructor(e,t,n,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const s in n){const l=n[s].finish();e[t][s]=l}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let l=s[t];if(l===void 0){const a=lx[t];l=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=l}return l}}const ux=5;class cx extends el{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=ux}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Pe()}getData(e){return null}prepareFrame(e){return Pe()}renderFrame(e,t){return Pe()}forEachFeatureAtCoordinate(e,t,n,s,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ce.LOADED||t.getState()===Ce.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ce.LOADED&&t!=Ce.ERROR&&e.addEventListener(Ee.CHANGE,this.boundHandleImageChange_),t==Ce.IDLE&&(e.load(),t=e.getState()),t==Ce.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class Gm extends Zn{constructor(e,t,n,s){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=s}}class Um{constructor(){Tp(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(za(),{get:(e,t)=>{if(typeof za()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,s=t.length;n<s;++n){const l=t[n];if(typeof l=="function"){l(e);continue}const a=t[++n];if(typeof e[l]=="function")e[l](...a);else{if(typeof a=="function"){e[l]=a(e);continue}e[l]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const w_=[];let Es=null;function hx(){Es=et(1,1,void 0,{willReadFrequently:!0})}class Xm extends cx{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Mn(),this.pixelTransform=Mn(),this.inversePixelTransform=Mn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){Es||hx(),Es.clearRect(0,0,1,1);let s;try{Es.drawImage(e,t,n,1,1,0,0,1,1),s=Es.getImageData(0,0,1,1).data}catch{return Es=null,null}return s}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const s=this.getLayer().getClassName();let l,a;if(e&&e.className===s&&(!n||e&&e.style.backgroundColor&&sr(Ns(e.style.backgroundColor),Ns(n)))){const c=e.firstElementChild;c instanceof HTMLCanvasElement&&(a=c.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=s;let c=l.style;c.position="absolute",c.width="100%",c.height="100%",a=et();const h=a.canvas;l.appendChild(h),c=h.style,c.position="absolute",c.left="0",c.transformOrigin="top left",this.container=l,this.context=a}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const s=yi(n),l=Qa(n),a=qa(n),c=$a(n);at(t.coordinateToPixelTransform,s),at(t.coordinateToPixelTransform,l),at(t.coordinateToPixelTransform,a),at(t.coordinateToPixelTransform,c);const h=this.inversePixelTransform;at(h,s),at(h,l),at(h,a),at(h,c),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()}prepareContainer(e,t){const n=e.extent,s=e.viewState.resolution,l=e.viewState.rotation,a=e.pixelRatio,c=Math.round(ke(n)/s*a),h=Math.round(ut(n)/s*a);_i(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,l,-c/2,-h/2),U_(this.inversePixelTransform,this.pixelTransform);const g=C1(this.pixelTransform);if(this.useContainer(t,g,this.getBackground(e)),!this.containerReused){const p=this.context.canvas;p.width!=c||p.height!=h?(p.width=c,p.height=h):this.context.clearRect(0,0,c,h),g!==p.style.transform&&(p.style.transform=g)}}dispatchRenderEvent_(e,t,n){const s=this.getLayer();if(s.hasListener(e)){const l=new Gm(e,this.inversePixelTransform,n,t);s.dispatchEvent(l)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(cn.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(cn.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Um),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(cn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(cn.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,s,l,a,c){const h=l/2,g=a/2,p=s/t,m=-p,y=-e[0]+c,x=-e[1];return _i(this.tempTransform,h,g,p,m,-n,y,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function dx(r,e,t,n,s,l,a,c,h,g,p,m,y=!0){let x=r[e],E=r[e+1],w=0,C=0,I=0,R=0;function D(){w=x,C=E,e+=n,x=r[e],E=r[e+1],R+=I,I=Math.sqrt((x-w)*(x-w)+(E-C)*(E-C))}do D();while(e<t-n&&R+I<l);let k=I===0?0:(l-R)/I;const P=$t(w,x,k),X=$t(C,E,k),V=e-n,U=R,b=l+c*h(g,s,p);for(;e<t-n&&R+I<b;)D();k=I===0?0:(b-R)/I;const B=$t(w,x,k),ie=$t(C,E,k);let $=!1;if(y)if(m){const Z=[P,X,B,ie];gd(Z,0,4,2,m,Z,Z),$=Z[0]>Z[2]}else $=P>B;const te=Math.PI,J=[],ee=V+n===e;e=V,I=0,R=U,x=r[e],E=r[e+1];let ne;if(ee){D(),ne=Math.atan2(E-C,x-w),$&&(ne+=ne>0?-te:te);const Z=(B+P)/2,W=(ie+X)/2;return J[0]=[Z,W,(b-l)/2,ne,s],J}s=s.replace(/\n/g," ");for(let Z=0,W=s.length;Z<W;){D();let q=Math.atan2(E-C,x-w);if($&&(q+=q>0?-te:te),ne!==void 0){let ue=q-ne;if(ue+=ue>te?-2*te:ue<-te?2*te:0,Math.abs(ue)>a)return null}ne=q;const G=Z;let T=0;for(;Z<W;++Z){const ue=$?W-Z-1:Z,he=c*h(g,s[ue],p);if(e+n<t&&R+I<l+T+he/2)break;T+=he}if(Z===G)continue;const N=$?s.substring(W-G,W-Z):s.substring(G,Z);k=I===0?0:(l+T/2-R)/I;const re=$t(w,x,k),z=$t(C,E,k);J.push([re,z,T/2,q,N]),l+=T}return J}const ds=qt(),Bi=[],ai=[],ui=[],Yi=[];function C_(r){return r[3].declutterBox}const S_=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function _h(r,e){return e==="start"?e=S_.test(r)?"right":"left":e==="end"&&(e=S_.test(r)?"left":"right"),ba[e]}function fx(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}class gx{constructor(e,t,n,s,l){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=Mn(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new Um:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,s){const l=e+t+n+s;if(this.labels_[l])return this.labels_[l];const a=s?this.strokeStates[s]:null,c=n?this.fillStates[n]:null,h=this.textStates[t],g=this.pixelRatio,p=[h.scale[0]*g,h.scale[1]*g],m=h.justify?ba[h.justify]:_h(Array.isArray(e)?e[0]:e,h.textAlign||Ko),y=s&&a.lineWidth?a.lineWidth:0,x=Array.isArray(e)?e:String(e).split(`
`).reduce(fx,[]),{width:E,height:w,widths:C,heights:I,lineWidths:R}=KE(h,x),D=E+y,k=[],P=(D+2)*p[0],X=(w+y)*p[1],V={width:P<0?Math.floor(P):Math.ceil(P),height:X<0?Math.floor(X):Math.ceil(X),contextInstructions:k};(p[0]!=1||p[1]!=1)&&k.push("scale",p),s&&(k.push("strokeStyle",a.strokeStyle),k.push("lineWidth",y),k.push("lineCap",a.lineCap),k.push("lineJoin",a.lineJoin),k.push("miterLimit",a.miterLimit),k.push("setLineDash",[a.lineDash]),k.push("lineDashOffset",a.lineDashOffset)),n&&k.push("fillStyle",c.fillStyle),k.push("textBaseline","middle"),k.push("textAlign","center");const U=.5-m;let b=m*D+U*y;const B=[],ie=[];let $=0,te=0,J=0,ee=0,ne;for(let Z=0,W=x.length;Z<W;Z+=2){const q=x[Z];if(q===`
`){te+=$,$=0,b=m*D+U*y,++ee;continue}const G=x[Z+1]||h.font;G!==ne&&(s&&B.push("font",G),n&&ie.push("font",G),ne=G),$=Math.max($,I[J]);const T=[q,b+U*C[J]+m*(C[J]-R[ee]),.5*(y+$)+te];b+=C[J],s&&B.push("strokeText",T),n&&ie.push("fillText",T),++J}return Array.prototype.push.apply(k,B),Array.prototype.push.apply(k,ie),this.labels_[l]=V,V}replayTextBackground_(e,t,n,s,l,a,c){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,l),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),c&&(this.setStrokeStyle_(e,c),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,s,l,a,c,h,g,p,m,y,x,E,w,C){c*=y[0],h*=y[1];let I=n-c,R=s-h;const D=l+g>e?e-g:l,k=a+p>t?t-p:a,P=E[3]+D*y[0]+E[1],X=E[0]+k*y[1]+E[2],V=I-E[3],U=R-E[0];(w||m!==0)&&(Bi[0]=V,Yi[0]=V,Bi[1]=U,ai[1]=U,ai[0]=V+P,ui[0]=ai[0],ui[1]=U+X,Yi[1]=ui[1]);let b;return m!==0?(b=_i(Mn(),n,s,1,1,m,-n,-s),at(b,Bi),at(b,ai),at(b,ui),at(b,Yi),mi(Math.min(Bi[0],ai[0],ui[0],Yi[0]),Math.min(Bi[1],ai[1],ui[1],Yi[1]),Math.max(Bi[0],ai[0],ui[0],Yi[0]),Math.max(Bi[1],ai[1],ui[1],Yi[1]),ds)):mi(Math.min(V,V+P),Math.min(U,U+X),Math.max(V,V+P),Math.max(U,U+X),ds),x&&(I=Math.round(I),R=Math.round(R)),{drawImageX:I,drawImageY:R,drawImageW:D,drawImageH:k,originX:g,originY:p,declutterBox:{minX:ds[0],minY:ds[1],maxX:ds[2],maxY:ds[3],value:C},canvasTransform:b,scale:y}}replayImageOrLabel_(e,t,n,s,l,a,c){const h=!!(a||c),g=s.declutterBox,p=c?c[2]*s.scale[0]/2:0;return g.minX-p<=t[0]&&g.maxX+p>=0&&g.minY-p<=t[1]&&g.maxY+p>=0&&(h&&this.replayTextBackground_(e,Bi,ai,ui,Yi,a,c),ZE(e,s.canvasTransform,l,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=at(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(n[0]%s,n[1]%s),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,s){const l=this.textStates[t],a=this.createLabel(e,t,s,n),c=this.strokeStates[n],h=this.pixelRatio,g=_h(Array.isArray(e)?e[0]:e,l.textAlign||Ko),p=ba[l.textBaseline||Ua],m=c&&c.lineWidth?c.lineWidth:0,y=a.width/h-2*l.scale[0],x=g*y+2*(.5-g)*m,E=p*a.height/h+2*(.5-p)*m;return{label:a,anchorX:x,anchorY:E}}execute_(e,t,n,s,l,a,c,h){const g=this.zIndexContext_;let p;this.pixelCoordinates_&&sr(n,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=tr(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),x1(this.renderedTransform_,n));let m=0;const y=s.length;let x=0,E,w,C,I,R,D,k,P,X,V,U,b,B,ie=0,$=0,te=null,J=null;const ee=this.coordinateCache_,ne=this.viewRotation_,Z=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,W={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ne},q=this.instructions!=s||this.overlaps?0:200;let G,T,N,re;for(;m<y;){const z=s[m];switch(z[0]){case fe.BEGIN_GEOMETRY:G=z[1],re=z[3],G.getGeometry()?c!==void 0&&!Mt(c,re.getExtent())?m=z[2]+1:++m:m=z[2],g&&(g.zIndex=z[4]);break;case fe.BEGIN_PATH:ie>q&&(this.fill_(e),ie=0),$>q&&(e.stroke(),$=0),!ie&&!$&&(e.beginPath(),R=NaN,D=NaN),++m;break;case fe.CIRCLE:x=z[1];const he=p[x],_e=p[x+1],xe=p[x+2],Te=p[x+3],Ge=xe-he,Ct=Te-_e,An=Math.sqrt(Ge*Ge+Ct*Ct);e.moveTo(he+An,_e),e.arc(he,_e,An,0,2*Math.PI,!0),++m;break;case fe.CLOSE_PATH:e.closePath(),++m;break;case fe.CUSTOM:x=z[1],E=z[2];const gn=z[3],$n=z[4],Dn=z[5];W.geometry=gn,W.feature=G,m in ee||(ee[m]=[]);const Qt=ee[m];Dn?Dn(p,x,E,2,Qt):(Qt[0]=p[x],Qt[1]=p[x+1],Qt.length=2),g&&(g.zIndex=z[6]),$n(Qt,W),++m;break;case fe.DRAW_IMAGE:x=z[1],E=z[2],X=z[3],w=z[4],C=z[5];let gt=z[6];const Yt=z[7],Fn=z[8],Jt=z[9],en=z[10];let pn=z[11];const qn=z[12];let Qn=z[13];I=z[14]||"declutter";const He=z[15];if(!X&&z.length>=20){V=z[19],U=z[20],b=z[21],B=z[22];const St=this.drawLabelWithPointPlacement_(V,U,b,B);X=St.label,z[3]=X;const _n=z[23];w=(St.anchorX-_n)*this.pixelRatio,z[4]=w;const Tt=z[24];C=(St.anchorY-Tt)*this.pixelRatio,z[5]=C,gt=X.height,z[6]=gt,Qn=X.width,z[13]=Qn}let Nr;z.length>25&&(Nr=z[25]);let lr,Jn,ar;z.length>17?(lr=z[16],Jn=z[17],ar=z[18]):(lr=Mr,Jn=!1,ar=!1),en&&Z?pn+=ne:!en&&!Z&&(pn-=ne);let ur=0;for(;x<E;x+=2){if(Nr&&Nr[ur++]<Qn/this.pixelRatio)continue;const St=this.calculateImageOrLabelDimensions_(X.width,X.height,p[x],p[x+1],Qn,gt,w,C,Fn,Jt,pn,qn,l,lr,Jn||ar,G),_n=[e,t,X,St,Yt,Jn?te:null,ar?J:null];if(h){let Tt,pt,_t;if(He){const Ue=E-x;if(!He[Ue]){He[Ue]={args:_n,declutterMode:I};continue}const Qe=He[Ue];Tt=Qe.args,pt=Qe.declutterMode,delete He[Ue],_t=C_(Tt)}let Rt,mn;if(Tt&&(pt!=="declutter"||!h.collides(_t))&&(Rt=!0),(I!=="declutter"||!h.collides(St.declutterBox))&&(mn=!0),pt==="declutter"&&I==="declutter"){const Ue=Rt&&mn;Rt=Ue,mn=Ue}Rt&&(pt!=="none"&&h.insert(_t),this.replayImageOrLabel_.apply(this,Tt)),mn&&(I!=="none"&&h.insert(St.declutterBox),this.replayImageOrLabel_.apply(this,_n))}else this.replayImageOrLabel_.apply(this,_n)}++m;break;case fe.DRAW_CHARS:const xi=z[1],ll=z[2],zr=z[3],al=z[4];B=z[5];const mu=z[6],Gr=z[7],Ur=z[8];b=z[9];const cr=z[10];V=z[11],U=z[12];const Xr=[z[13],z[13]];I=z[14]||"declutter";const bs=z[15],On=this.textStates[U],tn=On.font,wi=[On.scale[0]*Gr,On.scale[1]*Gr];let Ci;tn in this.widths_?Ci=this.widths_[tn]:(Ci={},this.widths_[tn]=Ci);const Bs=vm(p,xi,ll,2),Ys=Math.abs(wi[0])*s_(tn,V,Ci);if(al||Ys<=Bs){const St=this.textStates[U].textAlign,_n=(Bs-Ys)*_h(V,St),Tt=dx(p,xi,ll,2,V,_n,mu,Math.abs(wi[0]),s_,tn,Ci,Z?0:this.viewRotation_,bs);e:if(Tt){const pt=[];let _t,Rt,mn,Ue,Qe;if(b)for(_t=0,Rt=Tt.length;_t<Rt;++_t){Qe=Tt[_t],mn=Qe[4],Ue=this.createLabel(mn,U,"",b),w=Qe[2]+(wi[0]<0?-cr:cr),C=zr*Ue.height+(.5-zr)*2*cr*wi[1]/wi[0]-Ur;const Pt=this.calculateImageOrLabelDimensions_(Ue.width,Ue.height,Qe[0],Qe[1],Ue.width,Ue.height,w,C,0,0,Qe[3],Xr,!1,Mr,!1,G);if(h&&I==="declutter"&&h.collides(Pt.declutterBox))break e;pt.push([e,t,Ue,Pt,1,null,null])}if(B)for(_t=0,Rt=Tt.length;_t<Rt;++_t){Qe=Tt[_t],mn=Qe[4],Ue=this.createLabel(mn,U,B,""),w=Qe[2],C=zr*Ue.height-Ur;const Pt=this.calculateImageOrLabelDimensions_(Ue.width,Ue.height,Qe[0],Qe[1],Ue.width,Ue.height,w,C,0,0,Qe[3],Xr,!1,Mr,!1,G);if(h&&I==="declutter"&&h.collides(Pt.declutterBox))break e;pt.push([e,t,Ue,Pt,1,null,null])}h&&I!=="none"&&h.load(pt.map(C_));for(let Pt=0,Vs=pt.length;Pt<Vs;++Pt)this.replayImageOrLabel_.apply(this,pt[Pt])}}++m;break;case fe.END_GEOMETRY:if(a!==void 0){G=z[1];const St=a(G,re,I);if(St)return St}++m;break;case fe.FILL:q?ie++:this.fill_(e),++m;break;case fe.MOVE_TO_LINE_TO:for(x=z[1],E=z[2],T=p[x],N=p[x+1],e.moveTo(T,N),R=T+.5|0,D=N+.5|0,x+=2;x<E;x+=2)T=p[x],N=p[x+1],k=T+.5|0,P=N+.5|0,(x==E-2||k!==R||P!==D)&&(e.lineTo(T,N),R=k,D=P);++m;break;case fe.SET_FILL_STYLE:te=z,this.alignAndScaleFill_=z[2],ie&&(this.fill_(e),ie=0,$&&(e.stroke(),$=0)),e.fillStyle=z[1],++m;break;case fe.SET_STROKE_STYLE:J=z,$&&(e.stroke(),$=0),this.setStrokeStyle_(e,z),++m;break;case fe.STROKE:q?$++:e.stroke(),++m;break;default:++m;break}}ie&&this.fill_(e),$&&e.stroke()}execute(e,t,n,s,l,a){this.viewRotation_=s,this.execute_(e,t,n,this.instructions,l,void 0,void 0,a)}executeHitDetection(e,t,n,s,l){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,s,l)}}const Cs=["Polygon","Circle","LineString","Image","Text","Default"],Wm=["Image","Text"],px=Cs.filter(r=>!Wm.includes(r));class _x{constructor(e,t,n,s,l,a,c){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Mn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,c)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let s=this.executorsByZIndex_[n];s===void 0&&(s={},this.executorsByZIndex_[n]=s);const l=e[n];for(const a in l){const c=l[a];s[a]=new gx(this.resolution_,this.pixelRatio_,this.overlaps_,c,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let s=0,l=e.length;s<l;++s)if(e[s]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,s,l,a){s=Math.round(s);const c=s*2+1,h=_i(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-n,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=et(c,c,void 0,{willReadFrequently:!0}));const p=this.hitDetectionContext_;p.canvas.width!==c||p.canvas.height!==c?(p.canvas.width=c,p.canvas.height=c):g||p.clearRect(0,0,c,c);let m;this.renderBuffer_!==void 0&&(m=qt(),Go(m,e),ed(m,t*(this.renderBuffer_+s),m));const y=mx(s);let x;function E(P,X,V){const U=p.getImageData(0,0,c,c).data;for(let b=0,B=y.length;b<B;b++)if(U[y[b]]>0){if(!a||V==="none"||x!=="Image"&&x!=="Text"||a.includes(P)){const ie=(y[b]-3)/4,$=s-ie%c,te=s-(ie/c|0),J=l(P,X,$*$+te*te);if(J)return J}p.clearRect(0,0,c,c);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(Ji);let C,I,R,D,k;for(C=w.length-1;C>=0;--C){const P=w[C].toString();for(R=this.executorsByZIndex_[P],I=Cs.length-1;I>=0;--I)if(x=Cs[I],D=R[x],D!==void 0&&(k=D.executeHitDetection(p,h,n,E,m),k))return k}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],s=t[1],l=t[2],a=t[3],c=[n,s,n,a,l,a,l,s];return tr(c,0,8,2,e,c),c}isEmpty(){return Ds(this.executorsByZIndex_)}execute(e,t,n,s,l,a,c){const h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(c?g1:Ji),a=a||Cs;const g=Cs.length;for(let p=0,m=h.length;p<m;++p){const y=h[p].toString(),x=this.executorsByZIndex_[y];for(let E=0,w=a.length;E<w;++E){const C=a[E],I=x[C];if(I!==void 0){const R=c===null?void 0:I.getZIndexContext(),D=R?R.getContext():e,k=this.maxExtent_&&C!=="Image"&&C!=="Text";if(k&&(D.save(),this.clip(D,n)),!R||C==="Text"||C==="Image"?I.execute(D,t,n,s,l,c):R.pushFunction(P=>I.execute(P,t,n,s,l,c)),k&&D.restore(),R){R.offset();const P=h[p]*g+E;this.deferredZIndexContexts_[P]||(this.deferredZIndexContexts_[P]=[]),this.deferredZIndexContexts_[P].push(R)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Ji);for(let n=0,s=t.length;n<s;++n)e[t[n]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[t[n]].length=0}}const mh={};function mx(r){if(mh[r]!==void 0)return mh[r];const e=r*2+1,t=r*r,n=new Array(t+1);for(let l=0;l<=r;++l)for(let a=0;a<=r;++a){const c=l*l+a*a;if(c>t)break;let h=n[c];h||(h=[],n[c]=h),h.push(((r+l)*e+(r+a))*4+3),l>0&&h.push(((r-l)*e+(r+a))*4+3),a>0&&(h.push(((r+l)*e+(r-a))*4+3),l>0&&h.push(((r-l)*e+(r-a))*4+3))}const s=[];for(let l=0,a=n.length;l<a;++l)n[l]&&s.push(...n[l]);return mh[r]=s,s}class yx extends zm{constructor(e,t,n,s,l,a,c){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=s,this.transformRotation_=s?eu(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=a,this.userTransform_=c,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Mn()}drawImages_(e,t,n,s){if(!this.image_)return;const l=tr(e,t,n,s,this.transform_,this.pixelCoordinates_),a=this.context_,c=this.tmpLocalTransform_,h=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=h*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let p=0,m=l.length;p<m;p+=2){const y=l[p]-this.imageAnchorX_,x=l[p+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=y+this.imageAnchorX_,w=x+this.imageAnchorY_;_i(c,E,w,1,1,g,-E,-w),a.save(),a.transform.apply(a,c),a.translate(E,w),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=h)}drawText_(e,t,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=tr(e,t,n,s,this.transform_,this.pixelCoordinates_),a=this.context_;let c=this.textRotation_;for(this.transformRotation_===0&&(c-=this.viewRotation_),this.textRotateWithView_&&(c+=this.viewRotation_);t<n;t+=s){const h=l[t]+this.textOffsetX_,g=l[t+1]+this.textOffsetY_;c!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(h-this.textOffsetX_,g-this.textOffsetY_),a.rotate(c),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,h,g),this.textFillState_&&a.fillText(this.text_,h,g))}}moveToLineTo_(e,t,n,s,l){const a=this.context_,c=tr(e,t,n,s,this.transform_,this.pixelCoordinates_);a.moveTo(c[0],c[1]);let h=c.length;l&&(h-=2);for(let g=2;g<h;g+=2)a.lineTo(c[g],c[g+1]);return l&&a.closePath(),n}drawRings_(e,t,n,s){for(let l=0,a=n.length;l<a;++l)t=this.moveToLineTo_(e,t,n[l],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Mt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=dE(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],s=t[3]-t[1],l=Math.sqrt(n*n+s*s),a=this.context_;a.beginPath(),a.arc(t[0],t[1],l,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,s=t.length;n<s;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Mt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Mt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=e.getFlatCoordinates();let l=0;const a=e.getEnds(),c=e.getStride();n.beginPath();for(let h=0,g=a.length;h<g;++h)l=this.moveToLineTo_(s,l,a[h],c,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Mt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Mt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let s=0;const l=e.getEndss(),a=e.getStride();t.beginPath();for(let c=0,h=l.length;c<h;++c){const g=l[c];s=this.drawRings_(n,s,g,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),sr(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,s=e.textAlign?e.textAlign:Ko;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=s&&(n.textAlign=s,t.textAlign=s),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Yn(n||Ut)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),s=t.getLineCap(),l=t.getLineDash(),a=t.getLineDashOffset(),c=t.getLineJoin(),h=t.getWidth(),g=t.getMiterLimit(),p=l||gi;this.strokeState_={lineCap:s!==void 0?s:zs,lineDash:this.pixelRatio_===1?p:p.map(m=>m*this.pixelRatio_),lineDashOffset:(a||pi)*this.pixelRatio_,lineJoin:c!==void 0?c:Gs,lineWidth:(h!==void 0?h:Zo)*this.pixelRatio_,miterLimit:g!==void 0?g:Yo,strokeStyle:Yn(n||Vo)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/n,a[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:Yn(x||Ut)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const x=n.getColor(),E=n.getLineCap(),w=n.getLineDash(),C=n.getLineDashOffset(),I=n.getLineJoin(),R=n.getWidth(),D=n.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:zs,lineDash:w||gi,lineDashOffset:C||pi,lineJoin:I!==void 0?I:Gs,lineWidth:R!==void 0?R:Zo,miterLimit:D!==void 0?D:Yo,strokeStyle:Yn(x||Vo)}}const s=e.getFont(),l=e.getOffsetX(),a=e.getOffsetY(),c=e.getRotateWithView(),h=e.getRotation(),g=e.getScaleArray(),p=e.getText(),m=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:s!==void 0?s:wm,textAlign:m!==void 0?m:Ko,textBaseline:y!==void 0?y:Ua},this.text_=p!==void 0?Array.isArray(p)?p.reduce((x,E,w)=>x+=w%2?" ":E,""):p:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=c!==void 0?c:!1,this.textRotation_=h!==void 0?h:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const bn=.5;function Ex(r,e,t,n,s,l,a,c,h){const g=s,p=r[0]*bn,m=r[1]*bn,y=et(p,m);y.imageSmoothingEnabled=!1;const x=y.canvas,E=new yx(y,bn,s,null,a,c,null),w=t.length,C=Math.floor((256*256*256-1)/w),I={};for(let D=1;D<=w;++D){const k=t[D-1],P=k.getStyleFunction()||n;if(!P)continue;let X=P(k,l);if(!X)continue;Array.isArray(X)||(X=[X]);const U=(D*C).toString(16).padStart(7,"#00000");for(let b=0,B=X.length;b<B;++b){const ie=X[b],$=ie.getGeometryFunction()(k);if(!$||!Mt(g,$.getExtent()))continue;const te=ie.clone(),J=te.getFill();J&&J.setColor(U);const ee=te.getStroke();ee&&(ee.setColor(U),ee.setLineDash(null)),te.setText(void 0);const ne=ie.getImage();if(ne){const G=ne.getImageSize();if(!G)continue;const T=et(G[0],G[1],void 0,{alpha:!1}),N=T.canvas;T.fillStyle=U,T.fillRect(0,0,N.width,N.height),te.setImage(new hu({img:N,anchor:ne.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ne.getOrigin(),opacity:1,size:ne.getSize(),scale:ne.getScale(),rotation:ne.getRotation(),rotateWithView:ne.getRotateWithView()}))}const Z=te.getZIndex()||0;let W=I[Z];W||(W={},I[Z]=W,W.Polygon=[],W.Circle=[],W.LineString=[],W.Point=[]);const q=$.getType();if(q==="GeometryCollection"){const G=$.getGeometriesArrayRecursive();for(let T=0,N=G.length;T<N;++T){const re=G[T];W[re.getType().replace("Multi","")].push(re,te)}}else W[q.replace("Multi","")].push($,te)}}const R=Object.keys(I).map(Number).sort(Ji);for(let D=0,k=R.length;D<k;++D){const P=I[R[D]];for(const X in P){const V=P[X];for(let U=0,b=V.length;U<b;U+=2){E.setStyle(V[U+1]);for(let B=0,ie=e.length;B<ie;++B)E.setTransform(e[B]),E.drawGeometry(V[U])}}}return y.getImageData(0,0,x.width,x.height)}function vx(r,e,t){const n=[];if(t){const s=Math.floor(Math.round(r[0])*bn),l=Math.floor(Math.round(r[1])*bn),a=(Ke(s,0,t.width-1)+Ke(l,0,t.height-1)*t.width)*4,c=t.data[a],h=t.data[a+1],p=t.data[a+2]+256*(h+256*c),m=Math.floor((256*256*256-1)/e.length);p&&p%m===0&&n.push(e[p/m-1])}return n}const xx=.5,jm={Point:kx,LineString:Rx,Polygon:Px,MultiPoint:Mx,MultiLineString:Ix,MultiPolygon:Lx,GeometryCollection:Tx,Circle:Cx};function wx(r,e){return parseInt(Fe(r),10)-parseInt(Fe(e),10)}function T_(r,e){const t=bm(r,e);return t*t}function bm(r,e){return xx*r/e}function Cx(r,e,t,n,s){const l=t.getFill(),a=t.getStroke();if(l||a){const h=r.getBuilder(t.getZIndex(),"Circle");h.setFillStrokeStyle(l,a),h.drawCircle(e,n,s)}const c=t.getText();if(c&&c.getText()){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,n)}}function R_(r,e,t,n,s,l,a,c){const h=[],g=t.getImage();if(g){let y=!0;const x=g.getImageState();x==Ce.LOADED||x==Ce.ERROR?y=!1:x==Ce.IDLE&&g.load(),y&&h.push(g.ready())}const p=t.getFill();p&&p.loading()&&h.push(p.ready());const m=h.length>0;return m&&Promise.all(h).then(()=>s(null)),Sx(r,e,t,n,l,a,c),m}function Sx(r,e,t,n,s,l,a){const c=t.getGeometryFunction()(e);if(!c)return;const h=c.simplifyTransformed(n,s);if(t.getRenderer())Bm(r,h,t,e,a);else{const p=jm[h.getType()];p(r,h,t,e,a,l)}}function Bm(r,e,t,n,s){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let c=0,h=a.length;c<h;++c)Bm(r,a[c],t,n,s);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),s)}function Tx(r,e,t,n,s,l){const a=e.getGeometriesArray();let c,h;for(c=0,h=a.length;c<h;++c){const g=jm[a[c].getType()];g(r,a[c],t,n,s,l)}}function Rx(r,e,t,n,s){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawLineString(e,n,s)}const a=t.getText();if(a&&a.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,n,s)}}function Ix(r,e,t,n,s){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawMultiLineString(e,n,s)}const a=t.getText();if(a&&a.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,n,s)}}function Lx(r,e,t,n,s){const l=t.getFill(),a=t.getStroke();if(a||l){const h=r.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(l,a),h.drawMultiPolygon(e,n,s)}const c=t.getText();if(c&&c.getText()){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,n,s)}}function kx(r,e,t,n,s,l){const a=t.getImage(),c=t.getText(),h=c&&c.getText(),g=l&&a&&h?{}:void 0;if(a){if(a.getImageState()!=Ce.LOADED)return;const p=r.getBuilder(t.getZIndex(),"Image");p.setImageStyle(a,g),p.drawPoint(e,n,s)}if(h){const p=r.getBuilder(t.getZIndex(),"Text");p.setTextStyle(c,g),p.drawText(e,n,s)}}function Mx(r,e,t,n,s,l){const a=t.getImage(),c=a&&a.getOpacity()!==0,h=t.getText(),g=h&&h.getText(),p=l&&c&&g?{}:void 0;if(c){if(a.getImageState()!=Ce.LOADED)return;const m=r.getBuilder(t.getZIndex(),"Image");m.setImageStyle(a,p),m.drawMultiPoint(e,n,s)}if(g){const m=r.getBuilder(t.getZIndex(),"Text");m.setTextStyle(h,p),m.drawText(e,n,s)}}function Px(r,e,t,n,s){const l=t.getFill(),a=t.getStroke();if(l||a){const h=r.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(l,a),h.drawPolygon(e,n,s)}const c=t.getText();if(c&&c.getText()){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,n,s)}}class Ax extends Xm{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=qt(),this.wrappedRenderedExtent_=qt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const s=t.extent,l=t.viewState,a=l.center,c=l.resolution,h=l.projection,g=l.rotation,p=h.getExtent(),m=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),x=t.pixelRatio,E=t.viewHints,w=!(E[wt.ANIMATING]||E[wt.INTERACTING]),C=this.context,I=Math.round(ke(s)/c*x),R=Math.round(ut(s)/c*x),D=m.getWrapX()&&h.canWrapX(),k=D?ke(p):null,P=D?Math.ceil((s[2]-p[2])/k)+1:1;let X=D?Math.floor((s[0]-p[0])/k):0;do{let V=this.getRenderTransform(a,c,0,x,I,R,X*k);t.declutter&&(V=V.slice(0)),e.execute(C,[C.canvas.width,C.canvas.height],V,g,w,n===void 0?Cs:n?Wm:px,n?y&&t.declutter[y]:void 0)}while(++X<P)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=et(this.context.canvas.width,this.context.canvas.height,w_))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,ou(this.context),w_.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const s=e.viewState;this.prepareContainer(e,t);const l=this.context,a=this.replayGroup_;let c=a&&!a.isEmpty();if(!c&&!(this.getLayer().hasListener(cn.PRERENDER)||this.getLayer().hasListener(cn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(l,e),s.projection,this.clipped_=!1,c&&n.extent&&this.clipping){const h=$i(n.extent);c=Mt(h,e.extent),this.clipped_=c&&!xs(h,e.extent),this.clipped_&&this.clipUnrotated(l,e,h)}return c&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),s=this.renderedCenter_,l=this.renderedResolution_,a=this.renderedRotation_,c=this.renderedProjection_,h=this.wrappedRenderedExtent_,g=this.getLayer(),p=[],m=n[0]*bn,y=n[1]*bn;p.push(this.getRenderTransform(s,l,a,bn,m,y,0).slice());const x=g.getSource(),E=c.getExtent();if(x.getWrapX()&&c.canWrapX()&&!xs(E,h)){let w=h[0];const C=ke(E);let I=0,R;for(;w<E[0];)--I,R=C*I,p.push(this.getRenderTransform(s,l,a,bn,m,y,R).slice()),w+=C;for(I=0,w=h[2];w>E[2];)++I,R=C*I,p.push(this.getRenderTransform(s,l,a,bn,m,y,R).slice()),w-=C}this.hitDetectionImageData_=Ex(n,p,this.renderedFeatures_,g.getStyleFunction(),h,l,a,T_(l,this.renderedPixelRatio_))}t(vx(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,s,l){if(!this.replayGroup_)return;const a=t.viewState.resolution,c=t.viewState.rotation,h=this.getLayer(),g={},p=function(y,x,E){const w=Fe(y),C=g[w];if(C){if(C!==!0&&E<C.distanceSq){if(E===0)return g[w]=!0,l.splice(l.lastIndexOf(C),1),s(y,h,x);C.geometry=x,C.distanceSq=E}}else{if(E===0)return g[w]=!0,s(y,h,x);l.push(g[w]={feature:y,layer:h,geometry:x,distanceSq:E,callback:s})}},m=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,c,n,p,m?t.declutter[m].all().map(y=>y.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const s=e.viewHints[wt.ANIMATING],l=e.viewHints[wt.INTERACTING],a=t.getUpdateWhileAnimating(),c=t.getUpdateWhileInteracting();if(this.ready&&!a&&s||!c&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const h=e.extent,g=e.viewState,p=g.projection,m=g.resolution,y=e.pixelRatio,x=t.getRevision(),E=t.getRenderBuffer();let w=t.getRenderOrder();w===void 0&&(w=wx);const C=g.center.slice(),I=ed(h,E*m),R=I.slice(),D=[I.slice()],k=p.getExtent();if(n.getWrapX()&&p.canWrapX()&&!xs(k,e.extent)){const J=ke(k),ee=Math.max(ke(I)/2,J);I[0]=k[0]-ee,I[2]=k[2]+ee,V_(C,p);const ne=b_(D[0],p);ne[0]<k[0]&&ne[2]<k[2]?D.push([ne[0]+J,ne[1],ne[2]+J,ne[3]]):ne[0]>k[0]&&ne[2]>k[2]&&D.push([ne[0]-J,ne[1],ne[2]-J,ne[3]])}if(this.ready&&this.renderedResolution_==m&&this.renderedRevision_==x&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!e.declutter&&xs(this.wrappedRenderedExtent_,I))return sr(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const P=new ax(bm(m,y),I,m,y);let X;for(let J=0,ee=D.length;J<ee;++J)n.loadFeatures(D[J],m,p);const V=T_(m,y);let U=!0;const b=(J,ee)=>{let ne;const Z=J.getStyleFunction()||t.getStyleFunction();if(Z&&(ne=Z(J,m)),ne){const W=this.renderFeature(J,V,ne,P,X,this.getLayer().getDeclutter(),ee);U=U&&!W}},B=nm(I),ie=n.getFeaturesInExtent(B);w&&ie.sort(w);for(let J=0,ee=ie.length;J<ee;++J)b(ie[J],J);this.renderedFeatures_=ie,this.ready=U;const $=P.finish(),te=new _x(I,m,y,n.getOverlaps(),$,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=m,this.renderedRevision_=x,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=I,this.renderedCenter_=C,this.renderedProjection_=p,this.renderedPixelRatio_=y,this.replayGroup_=te,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,s,l,a,c){if(!n)return!1;let h=!1;if(Array.isArray(n))for(let g=0,p=n.length;g<p;++g)h=R_(s,e,n[g],t,this.boundHandleStyleImageChange_,l,a,c)||h;else h=R_(s,e,n,t,this.boundHandleStyleImageChange_,l,a,c);return h}}class Ym extends Nm{constructor(e){super(e)}createRenderer(){return new Ax(this)}}class I_{constructor(e){this.rbush_=new Lm(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Fe(t)]=n}load(e,t){const n=new Array(t.length);for(let s=0,l=t.length;s<l;s++){const a=e[s],c=t[s],h={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:c};n[s]=h,this.items_[Fe(c)]=h}this.rbush_.load(n)}remove(e){const t=Fe(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Fe(t)],s=[n.minX,n.minY,n.maxX,n.maxY];Uo(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let s=0,l=e.length;s<l;s++)if(n=t(e[s]),n)return n;return n}isEmpty(){return Ds(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return mi(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class gu extends or{constructor(e,t,n){super(),n!==void 0&&t===void 0?this.setFlatCoordinates(n,e):(t=t||0,this.setCenterAndRadius(e,t,n))}clone(){const e=new gu(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const l=this.flatCoordinates,a=e-l[0],c=t-l[1],h=a*a+c*c;if(h<s){if(h===0)for(let g=0;g<this.stride;++g)n[g]=l[g];else{const g=this.getRadius()/Math.sqrt(h);n[0]=l[0]+g*a,n[1]=l[1]+g*c;for(let p=2;p<this.stride;++p)n[p]=l[p]}return n.length=this.stride,h}return s}containsXY(e,t){const n=this.flatCoordinates,s=e-n[0],l=t-n[1];return s*s+l*l<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return mi(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Mt(e,t)){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]?!0:rd(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],s=e.slice();s[t]=s[0]+n;for(let l=1;l<t;++l)s[t+l]=e[l];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let l=rm(s,0,e,this.stride);s[l++]=s[0]+t;for(let a=1,c=this.stride;a<c;++a)s[l++]=s[a];s.length=l,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),s=this.getStride();this.setCenter(gd(n,0,n.length,s,e,t,n)),this.changed()}}gu.prototype.transform;class Ba extends im{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Xe),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(Ie(e[t],Ee.CHANGE,this.changed,this))}clone(){const e=new Ba(yh(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Fr(this.getExtent(),e,t))return s;const l=this.geometries_;for(let a=0,c=l.length;a<c;++a)s=l[a].closestPointXY(e,t,n,s);return s}containsXY(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)if(n[s].containsXY(e,t))return!0;return!1}computeExtent(e){tl(e);const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)id(e,t[n].getExtent());return e}getGeometries(){return yh(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let s=!1;for(let l=0,a=n.length;l<a;++l){const c=n[l],h=c.getSimplifiedGeometry(e);t.push(h),h!==c&&(s=!0)}return s?new Ba(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)n[s].rotate(e,t);this.changed()}scale(e,t,n){n||(n=ir(this.getExtent()));const s=this.geometries_;for(let l=0,a=s.length;l<a;++l)s[l].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(yh(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)n[s].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function yh(r){return r.map(e=>e.clone())}class qo extends or{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const s=e,l=[],a=[];for(let h=0,g=s.length;h<g;++h){const p=s[h];Vn(l,p.getFlatCoordinates()),a.push(l.length)}const c=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(c,l),this.ends_=a}}appendLineString(e){Vn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new qo(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_d(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,s))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,WE(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return jo(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new fn(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,s=[];let l=0;for(let a=0,c=t.length;a<c;++a){const h=t[a],g=new fn(e.slice(l,h),n);s.push(g),l=h}return s}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const s=this.ends_,l=this.stride;for(let a=0,c=s.length;a<c;++a){const h=s[a],g=Ga(t,n,h,l,.5);Vn(e,g),n=h}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=sm(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new qo(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return xE(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Ed(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class pu extends or{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Vn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new pu(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Fr(this.getExtent(),e,t))return s;const l=this.flatCoordinates,a=this.stride;for(let c=0,h=l.length;c<h;c+=a){const g=fi(e,t,l[c],l[c+1]);if(g<s){s=g;for(let p=0;p<a;++p)n[p]=l[c+p];n.length=a}}return s}getCoordinates(){return qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new nr(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,s=[];for(let l=0,a=e.length;l<a;l+=n){const c=new nr(e.slice(l,l+n),t);s.push(c)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let s=0,l=t.length;s<l;s+=n){const a=t[s],c=t[s+1];if(td(e,a,c))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=iu(this.flatCoordinates,0,e,this.stride),this.changed()}}function Vm(r,e,t,n){const s=[];let l=qt();for(let a=0,c=t.length;a<c;++a){const h=t[a];l=nd(r,e,h[0],n),s.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=h[h.length-1]}return s}class Qo extends or{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const s=e,l=[],a=[];for(let c=0,h=s.length;c<h;++c){const g=s[c],p=l.length,m=g.getEnds();for(let y=0,x=m.length;y<x;++y)m[y]+=p;Vn(l,g.getFlatCoordinates()),a.push(m)}t=s.length===0?this.getLayout():s[0].getLayout(),e=l,n=a}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Vn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let s=0,l=t.length;s<l;++s)t[s]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let s=0;s<e;++s)t[s]=this.endss_[s].slice();const n=new Qo(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fE(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return vE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return yE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),$p(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,zh(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Vm(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=am(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new pu(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;SE(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=$p(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=mE(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new Qo(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const l=this.endss_[e-1];t=l[l.length-1]}const n=this.endss_[e].slice(),s=n[n.length-1];if(t!==0)for(let l=0,a=n.length;l<a;++l)n[l]-=t;return new Ei(this.flatCoordinates.slice(t,s),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,s=[];let l=0;for(let a=0,c=n.length;a<c;++a){const h=n[a].slice(),g=h[h.length-1];if(l!==0)for(let m=0,y=h.length;m<y;++m)h[m]-=l;const p=new Ei(t.slice(l,g),e,h);s.push(p),l=g}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return wE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=pE(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const L_=Mn();class In{constructor(e,t,n,s,l,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=l,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?W_(this.flatCoordinates_):nd(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=ir(this.getExtent());this.flatInteriorPoints_=wd(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=TE(this.flatCoordinates_,this.ends_),t=Vm(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=am(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Ga(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let s=0,l=n.length;s<l;++s){const a=n[s],c=Ga(e,t,a,2,.5);Vn(this.flatMidpoints_,c),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Bt(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const s=ut(n)/ut(t);_i(L_,n[0],n[3],s,-s,0,0,0),tr(this.flatCoordinates_,0,this.flatCoordinates_.length,2,L_,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new In(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=G_((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":n.length=ru(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),s=[n.length];break;case"MultiLineString":s=[],n.length=sm(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,s);break;case"Polygon":s=[],n.length=vd(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,s);break}return s&&(this.simplifiedGeometry_=new In(this.type_,n,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}In.prototype.getFlatCoordinates=In.prototype.getOrientedFlatCoordinates;class Km extends Hn{constructor(e){super(),this.projection=Bt(e.projection),this.attributions_=k_(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,s){t.viewResolver=n,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=k_(e),this.changed()}setState(e){this.state_=e,this.changed()}}function k_(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),e=>r):null}const un={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Dx(r,e){return[[-1/0,-1/0,1/0,1/0]]}let Fx=!1;function Ox(r,e,t,n,s,l,a){const c=new XMLHttpRequest;c.open("GET",typeof r=="function"?r(t,n,s):r,!0),e.getType()=="arraybuffer"&&(c.responseType="arraybuffer"),c.withCredentials=Fx,c.onload=function(h){if(!c.status||c.status>=200&&c.status<300){const g=e.getType();try{let p;g=="text"||g=="json"?p=c.responseText:g=="xml"?p=c.responseXML||c.responseText:g=="arraybuffer"&&(p=c.response),p?l(e.readFeatures(p,{extent:t,featureProjection:s}),e.readProjection(p)):a()}catch{a()}}else a()},c.onerror=a,c.send()}function M_(r,e){return function(t,n,s,l,a){const c=this;Ox(r,e,t,n,s,function(h,g){c.addFeatures(h),l!==void 0&&l(h)},a||As)}}class Vi extends Zn{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class Zm extends Km{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=As,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ae(this.format_,"`format` must be set when `url` is set"),this.loader_=M_(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Dx;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new I_:null,this.loadedExtentsRtree_=new I_,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(e.features)?s=e.features:e.features&&(n=e.features,s=n.getArray()),!t&&n===void 0&&(n=new Bn(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Fe(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Vi(un.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof In||(this.featureChangeKeys_[e]=[Ie(t,Ee.CHANGE,this.handleFeatureChange_,this),Ie(t,Ms.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const s=String(t.getId());if(!(s in this.idIndex_))this.idIndex_[s]=t;else if(t instanceof In){const l=this.idIndex_[s];l instanceof In?Array.isArray(l)?l.push(t):this.idIndex_[s]=[l,t]:n=!1}else n=!1}return n&&(Ae(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],s=[];for(let l=0,a=e.length;l<a;l++){const c=e[l],h=Fe(c);this.addToIndex_(h,c)&&n.push(c)}for(let l=0,a=n.length;l<a;l++){const c=n[l],h=Fe(c);this.setupChangeEvents_(h,c);const g=c.getGeometry();if(g){const p=g.getExtent();t.push(p),s.push(c)}else this.nullGeometryFeatures_[h]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(un.ADDFEATURE))for(let l=0,a=n.length;l<a;l++)this.dispatchEvent(new Vi(un.ADDFEATURE,n[l]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(un.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(un.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(Gt.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(Gt.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Xe);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Vi(un.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(s){const l=s.getGeometry();if(l instanceof In||l.intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const s=n.getGeometry();if(s instanceof In||s.intersectsExtent(e)){const l=t(n);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ds(this.nullGeometryFeatures_)||Vn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=sd(e,t);return[].concat(...s.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],s=e[1];let l=null;const a=[NaN,NaN];let c=1/0;const h=[-1/0,-1/0,1/0,1/0];return t=t||Ps,this.featuresRtree_.forEachInExtent(h,function(g){if(t(g)){const p=g.getGeometry(),m=c;if(c=p instanceof In?0:p.closestPointXY(n,s,a,c),c<m){l=g;const y=Math.sqrt(c);h[0]=n-y,h[1]=s-y,h[2]=n+y,h[3]=s+y}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Fe(t),s=t.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const a=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const l=t.getId();if(l!==void 0){const a=l.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Vi(un.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Fe(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ds(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const s=this.loadedExtentsRtree_,l=this.strategy_(e,t,n);for(let a=0,c=l.length;a<c;++a){const h=l[a];s.forEachInExtent(h,function(p){return xs(p.extent,h)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Vi(un.FEATURESLOADSTART)),this.loader_.call(this,h,t,n,p=>{--this.loadingExtentsCount_,this.dispatchEvent(new Vi(un.FEATURESLOADEND,void 0,p))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Vi(un.FEATURESLOADERROR))}),s.insert(h,{extent:h.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,n=t.forEachInExtent(e,function(s){if(Uo(s.extent,e))return s});n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,s=e.length;n<s;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Fe(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const n=this.featureChangeKeys_[t];n==null||n.forEach(Xe),delete this.featureChangeKeys_[t];const s=e.getId();if(s!==void 0){const l=s.toString(),a=this.idIndex_[l];a===e?delete this.idIndex_[l]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[l]=a[0]))}return delete this.uidIndex_[t],this.hasListener(un.REMOVEFEATURE)&&this.dispatchEvent(new Vi(un.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Ae(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(M_(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const oe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Ud extends Ha{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Ee.CHANGE)}release(){this.state===oe.ERROR&&this.setState(oe.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==oe.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Pe()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const s=t-n+1e3/60;return s>=this.transition_?1:Rm(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Hm extends Ud{constructor(e,t,n,s,l,a){super(e,t,a),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=oe.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=oe.ERROR,this.unlistenImage_(),this.image_=Nx(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=oe.LOADED:this.state=oe.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==oe.ERROR&&(this.state=oe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==oe.IDLE&&(this.state=oe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=zE(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Nx(){const r=et(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class zx{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const s=this.points_[t+2]-this.points_[n+2];if(s<1e3/60)return!1;const l=this.points_[t]-this.points_[n],a=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(a,l),this.initialVelocity_=Math.sqrt(l*l+a*a)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class Gx extends Za{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Pe()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;_i(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),U_(s,n)}forEachFeatureAtCoordinate(e,t,n,s,l,a,c,h){let g;const p=t.viewState;function m(k,P,X,V){return l.call(a,P,k?X:null,V)}const y=p.projection,x=V_(e.slice(),y),E=[[0,0]];if(y.canWrapX()&&s){const k=y.getExtent(),P=ke(k);E.push([-P,0],[P,0])}const w=t.layerStatesArray,C=w.length,I=[],R=[];for(let k=0;k<E.length;k++)for(let P=C-1;P>=0;--P){const X=w[P],V=X.layer;if(V.hasRenderer()&&Nd(X,p)&&c.call(h,V)){const U=V.getRenderer(),b=V.getSource();if(U&&b){const B=b.getWrapX()?x:e,ie=m.bind(null,X.managed);R[0]=B[0]+E[k][0],R[1]=B[1]+E[k][1],g=U.forEachFeatureAtCoordinate(R,t,n,ie,I)}if(g)return g}}if(I.length===0)return;const D=1/I.length;return I.forEach((k,P)=>k.distanceSq+=P*D),I.sort((k,P)=>k.distanceSq-P.distanceSq),I.some(k=>g=k.callback(k.feature,k.layer,k.geometry)),g}hasFeatureAtCoordinate(e,t,n,s,l,a){return this.forEachFeatureAtCoordinate(e,t,n,s,Ps,this,l,a)!==void 0}getMap(){return this.map_}renderFrame(e){Pe()}scheduleExpireIconCache(e){hn.canExpireCache()&&e.postRenderFunctions.push(Ux)}}function Ux(r,e){hn.expire()}class Xx extends Gx{constructor(e){super(e),this.fontChangeListenerKey_=Ie(ci,Ms.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=au+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const s=new Gm(e,void 0,t);n.dispatchEvent(s)}}disposeInternal(){Xe(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(cn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((c,h)=>c.zIndex-h.zIndex);t.some(c=>c.layer instanceof Nm&&c.layer.getDeclutter())&&(e.declutter={});const s=e.viewState;this.children_.length=0;const l=[];let a=null;for(let c=0,h=t.length;c<h;++c){const g=t[c];e.layerIndex=c;const p=g.layer,m=p.getSourceState();if(!Nd(g,s)||m!="ready"&&m!="undefined"){p.unrender();continue}const y=p.render(e,a);y&&(y!==a&&(this.children_.push(y),a=y),l.push(g))}this.declutter(e,l),NE(this.element_,this.children_),this.dispatchRenderEvent(cn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const s=t[n],l=s.layer;l.getDeclutter()&&l.renderDeclutter(e,s)}t.forEach(n=>n.layer.renderDeferred(e))}}}class Hi extends Zn{constructor(e,t){super(e),this.layer=t}}const Eh={LAYERS:"layers"};class Ws extends Tm{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Eh.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Bn(n.slice(),{unique:!0}):Ae(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Bn(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Xe),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ie(e,Gt.ADD,this.handleLayersAdd_,this),Ie(e,Gt.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Xe);Jo(this.listenerKeys_);const t=e.getArray();for(let n=0,s=t.length;n<s;n++){const l=t[n];this.registerLayerListeners_(l),this.dispatchEvent(new Hi("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[Ie(e,Ms.PROPERTYCHANGE,this.handleLayerChange_,this),Ie(e,Ee.CHANGE,this.handleLayerChange_,this)];e instanceof Ws&&t.push(Ie(e,"addlayer",this.handleLayerGroupAdd_,this),Ie(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Fe(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Hi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Hi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Hi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Fe(t);this.listenerKeys_[n].forEach(Xe),delete this.listenerKeys_[n],this.dispatchEvent(new Hi("removelayer",t)),this.changed()}getLayers(){return this.get(Eh.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let s=0,l=n.length;s<l;++s)this.dispatchEvent(new Hi("removelayer",n[s]))}this.set(Eh.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const s=this.getLayerState();let l=s.zIndex;!e&&s.zIndex===void 0&&(l=0);for(let a=n,c=t.length;a<c;a++){const h=t[a];h.opacity*=s.opacity,h.visible=h.visible&&s.visible,h.maxResolution=Math.min(h.maxResolution,s.maxResolution),h.minResolution=Math.max(h.minResolution,s.minResolution),h.minZoom=Math.max(h.minZoom,s.minZoom),h.maxZoom=Math.min(h.maxZoom,s.maxZoom),s.extent!==void 0&&(h.extent!==void 0?h.extent=kn(h.extent,s.extent):h.extent=s.extent),h.zIndex===void 0&&(h.zIndex=l)}return t}getSourceState(){return"ready"}}class vs extends Zn{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class hi extends vs{constructor(e,t,n,s,l,a){super(e,t,l),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Oe={SINGLECLICK:"singleclick",CLICK:Ee.CLICK,DBLCLICK:Ee.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Bh={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Wx extends Ha{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Ie(n,Bh.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ie(n,Bh.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ee.TOUCHMOVE,this.boundHandleTouchMove_,ym?{passive:!1}:!1)}emulateClick_(e){let t=new hi(Oe.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new hi(Oe.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new hi(Oe.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Oe.POINTERUP||t.type==Oe.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Oe.POINTERDOWN||t.type==Oe.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new hi(Oe.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Xe),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new hi(Oe.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ie(n,Oe.POINTERMOVE,this.handlePointerMove_,this),Ie(n,Oe.POINTERUP,this.handlePointerUp_,this),Ie(this.element_,Oe.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Ie(this.element_.getRootNode(),Oe.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new hi(Oe.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new hi(Oe.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Xe(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ee.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Xe(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Xe),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Zi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},xt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Ya=1/0;class jx{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Jo(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(e){Ae(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Ya?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,s=t.length,l=t[e],a=n[e],c=e;for(;e<s>>1;){const h=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),p=g<s&&n[g]<n[h]?g:h;t[e]=t[p],n[e]=n[p],e=p}t[e]=l,n[e]=a,this.siftDown_(c,e)}siftDown_(e,t){const n=this.elements_,s=this.priorities_,l=n[t],a=s[t];for(;t>e;){const c=this.getParentIndex_(t);if(s[c]>a)n[t]=n[c],s[t]=s[c],t=c;else break}n[t]=l,s[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let s=0;const l=t.length;let a,c,h;for(c=0;c<l;++c)a=t[c],h=e(a),h==Ya?delete this.queuedElements_[this.keyFunction_(a)]:(n[s]=h,t[s++]=a);t.length=s,n.length=s,this.heapify_()}}class bx extends jx{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ee.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===oe.LOADED||n===oe.ERROR||n===oe.EMPTY){n!==oe.ERROR&&t.removeEventListener(Ee.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const s=this.dequeue()[0],l=s.getKey();s.getState()===oe.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++n,s.load())}}}function Bx(r,e,t,n,s){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return Ya;const l=r.viewState.center,a=n[0]-l[0],c=n[1]-l[1];return 65536*Math.log(s)+Math.sqrt(a*a+c*c)/s}class Xd extends Hn{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let n=0,s=this.listenerKeys.length;n<s;++n)Xe(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=e,e){const n=this.target_??e.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==As&&this.listenerKeys.push(Ie(e,Zi.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Yx extends Xd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"›",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=a):this.collapseLabel_=l;const c=e.label!==void 0?e.label:"i";typeof c=="string"?(this.label_=document.createElement("span"),this.label_.textContent=c,this.label_.className=s):this.label_=c;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(Ee.CLICK,this.handleClick_.bind(this),!1);const g=t+" "+au+" "+Md+(this.collapsed_&&this.collapsible_?" "+i_:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=g,p.appendChild(this.toggleButton_),p.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(s=>s.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>n.add(s)):n.add(this.attributions_)),!this.overrideCollapsible_){const s=!t.some(l=>{var a;return((a=l.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(s=>m1(()=>s))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!sr(t,this.renderedAttributions_)){OE(this.ulElement_);for(let s=0,l=t.length;s<l;++s){const a=document.createElement("li");a.innerHTML=t[s],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(i_),this.collapsed_?t_(this.collapseLabel_,this.label_):t_(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Vx extends Xd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const l=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=l,a.appendChild(this.label_),a.addEventListener(Ee.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+au+" "+Md,h=this.element;h.className=c,h.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ea)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Xs}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const l=this.element.classList.contains(Ea);!l&&n===0?this.element.classList.add(Ea):l&&n!==0&&this.element.classList.remove(Ea)}this.label_.style.transform=s}this.rotation_=n}}class Kx extends Xd{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",c=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",h=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=h,p.appendChild(typeof a=="string"?document.createTextNode(a):a),p.addEventListener(Ee.CLICK,this.handleClick_.bind(this,n),!1);const m=document.createElement("button");m.className=l,m.setAttribute("type","button"),m.title=g,m.appendChild(typeof c=="string"?document.createTextNode(c):c),m.addEventListener(Ee.CLICK,this.handleClick_.bind(this,-n),!1);const y=t+" "+au+" "+Md,x=this.element;x.className=y,x.appendChild(p),x.appendChild(m),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const l=n.getConstrainedZoom(s+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:l,duration:this.duration_,easing:Xs})):n.setZoom(l)}}}function Zx(r){r=r||{};const e=new Bn;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new Kx(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new Vx(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new Yx(r.attributionOptions)),e}const Yh={ACTIVE:"active"};class ol extends Hn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Yh.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Yh.ACTIVE,e)}setMap(e){this.map_=e}}function Hx(r,e,t){const n=r.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:ov,center:r.getConstrainedCenter(s)})}}function Wd(r,e,t,n){const s=r.getZoom();if(s===void 0)return;const l=r.getConstrainedZoom(s+e),a=r.getResolutionForZoom(l);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:a,anchor:t,duration:n!==void 0?n:250,easing:Xs})}class $x extends ol{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Oe.DBLCLICK){const n=e.originalEvent,s=e.map,l=e.coordinate,a=n.shiftKey?-this.delta_:this.delta_,c=s.getView();Wd(c,a,l,this.duration_),n.preventDefault(),t=!0}return!t}}class js extends ol{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Oe.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Oe.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Oe.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Oe.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function jd(r){const e=r.length;let t=0,n=0;for(let s=0;s<e;s++)t+=r[s].clientX,n+=r[s].clientY;return{clientX:t/e,clientY:n/e}}function Vh(r){const e=arguments;return function(t){let n=!0;for(let s=0,l=e.length;s<l&&(n=n&&e[s](t),!!n);++s);return n}}const qx=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Qx=function(r){const e=r.map.getTargetElement(),t=e.getRootNode(),n=r.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},$m=function(r){const e=r.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?Qx(r):!0},Kh=Ps,qm=function(r){const e=r.originalEvent;return e.button==0&&!(FE&&pm&&e.ctrlKey)},Jx=Us,bd=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ew=function(r){const e=r.originalEvent;return pm?e.metaKey:e.ctrlKey},Qm=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Jm=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},vh=function(r){const e=r.originalEvent;return Ae(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},tw=function(r){const e=r.originalEvent;return Ae(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class nw extends js{constructor(e){super({stopDown:Us}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Vh(bd,tw);this.condition_=e.onFocusOnly?Vh($m,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,s=t.getEventPixel(jd(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const l=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],c=e.map.getView();X1(l,c.getResolution()),ad(l,c.getRotation()),c.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),a=n.getCenterInternal(),c=t.getPixelFromCoordinateInternal(a),h=t.getCoordinateFromPixelInternal([c[0]-s*Math.cos(l),c[1]-s*Math.sin(l)]);n.animateInternal({center:n.getConstrainedCenter(h),duration:500,easing:Xs})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class iw extends js{constructor(e){e=e||{},super({stopDown:Us}),this.condition_=e.condition?e.condition:qx,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!vh(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===Od)return;const s=t.getSize(),l=e.pixel,a=Math.atan2(s[1]/2-l[1],l[0]-s[0]/2);if(this.lastAngle_!==void 0){const c=a-this.lastAngle_;n.adjustRotationInternal(-c)}this.lastAngle_=a}handleUpEvent(e){return vh(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return vh(e)&&qm(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class rw extends Za{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+n,s.top=Math.min(e[1],t[1])+n,s.width=Math.abs(t[0]-e[0])+n,s.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Ei([s])}getGeometry(){return this.geometry_}}const fs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Po extends Zn{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class sw extends js{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new rw(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??qm,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const s=n[0]-t[0],l=n[1]-t[1];return s*s+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Po(fs.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Po(t?fs.BOXEND:fs.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Po(fs.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Po(fs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Po(fs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class ow extends sw{constructor(e){e=e||{};const t=e.condition?e.condition:Qm;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const l=n.rotatedExtentForGeometry(s),a=n.getResolutionForExtentInternal(l),c=n.getResolution()/a;s=s.clone(),s.scale(c*c)}n.fitInternal(s,{duration:this.duration_,easing:Xs})}}const Tr={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class lw extends ol{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return bd(t)&&Jm(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ee.KEYDOWN){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==Tr.DOWN||s==Tr.LEFT||s==Tr.RIGHT||s==Tr.UP)){const a=e.map.getView(),c=a.getResolution()*this.pixelDelta_;let h=0,g=0;s==Tr.DOWN?g=-c:s==Tr.LEFT?h=-c:s==Tr.RIGHT?h=c:g=c;const p=[h,g];ad(p,a.getRotation()),Hx(a,p,this.duration_),n.preventDefault(),t=!0}}return!t}}class aw extends ol{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!ew(t)&&Jm(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ee.KEYDOWN||e.type==Ee.KEYPRESS){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==="+"||s==="-")){const l=e.map,a=s==="+"?this.delta_:-this.delta_,c=l.getView();Wd(c,a,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}class uw extends ol{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Kh;this.condition_=e.onFocusOnly?Vh($m,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ee.WHEEL)return!0;const n=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==Ee.WHEEL&&(l=s.deltaY,AE&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=_m),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const c=n.getView();if(this.mode_==="trackpad"&&!(c.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(c.getAnimating()&&c.cancelAnimations(),c.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),c.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=l;const h=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),h),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Ke(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Wd(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class cw extends js{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Us),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],s=this.targetPointers[1],l=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const h=l-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=h}this.lastAngle_=l;const a=e.map,c=a.getView();c.getConstraints().rotation!==Od&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(jd(this.targetPointers))),this.rotating_&&(a.render(),c.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class hw extends js{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Us),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],s=this.targetPointers[1],l=n.clientX-s.clientX,a=n.clientY-s.clientY,c=Math.sqrt(l*l+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/c),this.lastDistance_=c;const h=e.map,g=h.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=h.getCoordinateFromPixelInternal(h.getEventPixel(jd(this.targetPointers))),h.render(),g.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function dw(r){r=r||{};const e=new Bn,t=new zx(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new iw),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new $x({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new nw({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new cw),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new hw({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new lw),e.push(new aw({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new uw({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new ow({duration:r.zoomDuration})),e}function e0(r){if(r instanceof cu){r.setMapInternal(null);return}r instanceof Ws&&r.getLayers().forEach(e0)}function t0(r,e){if(r instanceof cu){r.setMapInternal(e);return}if(r instanceof Ws){const t=r.getLayers().getArray();for(let n=0,s=t.length;n<s;++n)t0(t[n],e)}}let fw=class extends Hn{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=gw(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:_m,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Mn(),this.pixelToCoordinateTransform_=Mn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Zx(),this.interactions=t.interactions||dw({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new bx(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(xt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(xt.VIEW,this.handleViewChanged_),this.addChangeListener(xt.SIZE,this.handleSizeChanged_),this.addChangeListener(xt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof jn)&&e.view.then(function(s){n.setView(new jn(s))}),this.controls.addEventListener(Gt.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Gt.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Gt.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Gt.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Gt.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Gt.REMOVE,s=>{const l=s.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){t0(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const l=n.hitTolerance!==void 0?n.hitTolerance:0,a=n.layerFilter!==void 0?n.layerFilter:Ps,c=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,l,c,t,null,a,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(s){n.push(s)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(s){s instanceof Ws?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:Ps,l=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,l,a,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),l=n.width/s[0],a=n.height/s[1],c="changedTouches"in e?e.changedTouches[0]:e;return[(c.clientX-n.left)/l,(c.clientY-n.top)/a]}getTarget(){return this.get(xt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Nh(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?at(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(xt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Bn){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t];if(!s.visible)continue;const l=s.layer.getRenderer();if(l&&!l.ready)return!0;const a=s.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Rn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?at(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(xt.SIZE)}getView(){return this.get(xt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,s){return Bx(this.frameState_,e,t,n,s)}handleBrowserEvent(e,t){t=t||e.type;const n=new hi(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===Bh.POINTERDOWN||n===Ee.WHEEL||n===Ee.KEYDOWN){const s=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():s,a=t.target,c=l instanceof ShadowRoot?l.host===a?l.host.ownerDocument:l:l===s?s.documentElement:l;if(this.overlayContainerStopEvent_.contains(a)||!c.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let l=s.length-1;l>=0;l--){const a=s[l];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,l=s;if(e){const a=e.viewHints;if(a[wt.ANIMATING]||a[wt.INTERACTING]){const c=Date.now()-e.time>8;s=c?0:8,l=c?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(cn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(cn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new vs(Zi.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new vs(Zi.LOADSTART,this,e))));const n=this.postRenderFunctions_;if(e)for(let s=0,l=n.length;s<l;++s)n[s](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)Xe(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ee.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ee.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Xx(this)),this.mapBrowserEventHandler_=new Wx(this,this.moveTolerance_);for(const l in Oe)this.mapBrowserEventHandler_.addEventListener(Oe[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ee.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ee.WHEEL,this.boundHandleBrowserEvent_,ym?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const l=t.getRootNode();n=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[Ie(n,Ee.KEYDOWN,this.handleBrowserEvent,this),Ie(n,Ee.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Xe(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Xe(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ie(e,Ms.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ie(e,Ee.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Xe),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Hi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ie(e,Ms.PROPERTYCHANGE,this.render,this),Ie(e,Ee.CHANGE,this.render,this),Ie(e,"addlayer",this.handleLayerAdd_,this),Ie(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){e0(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),s=this.frameState_;let l=null;if(t!==void 0&&n_(t)&&n&&n.isDef()){const a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=n.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Mh(c.center,c.resolution,c.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:c,viewHints:a,wantedTiles:{},mapId:Fe(this),renderTargets:{}},c.nextCenter&&c.nextResolution){const h=isNaN(c.nextRotation)?c.rotation:c.nextRotation;l.nextExtent=Mh(c.nextCenter,c.nextResolution,h,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),s&&(!this.previousExtent_||!Ja(this.previousExtent_)&&!Uo(l.extent,this.previousExtent_))&&(this.dispatchEvent(new vs(Zi.MOVESTART,this,s)),this.previousExtent_=tl(this.previousExtent_)),this.previousExtent_&&!l.viewHints[wt.ANIMATING]&&!l.viewHints[wt.INTERACTING]&&!Uo(l.extent,this.previousExtent_)&&(this.dispatchEvent(new vs(Zi.MOVEEND,this,l)),X_(l.extent,this.previousExtent_))),this.dispatchEvent(new vs(Zi.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(Zi.LOADSTART)||this.hasListener(Zi.LOADEND)||this.hasListener(cn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Hi("removelayer",t)),this.set(xt.LAYERGROUP,e)}setSize(e){this.set(xt.SIZE,e)}setTarget(e){this.set(xt.TARGET,e)}setView(e){if(!e||e instanceof jn){this.set(xt.VIEW,e);return}this.set(xt.VIEW,new jn);const t=this;e.then(function(n){t.setView(new jn(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),l=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),a=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(l)&&!isNaN(a)&&(t=[Math.max(0,l),Math.max(0,a)],!n_(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&em("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!sr(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function gw(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Ws({layers:r.layers});t[xt.LAYERGROUP]=n,t[xt.TARGET]=r.target,t[xt.VIEW]=r.view instanceof jn?r.view:new jn;let s;r.controls!==void 0&&(Array.isArray(r.controls)?s=new Bn(r.controls.slice()):(Ae(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=r.controls));let l;r.interactions!==void 0&&(Array.isArray(r.interactions)?l=new Bn(r.interactions.slice()):(Ae(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=r.interactions));let a;return r.overlays!==void 0?Array.isArray(r.overlays)?a=new Bn(r.overlays.slice()):(Ae(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=r.overlays):a=new Bn,{controls:s,interactions:l,keyboardEventTarget:e,overlays:a,values:t}}class pw{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Za&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return Ae(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return Ae(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ae(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function Va(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function _w(r,e,t){return r+"/"+e+"/"+t}function mw(r){return yw(r[0],r[1],r[2])}function yw(r,e,t){return(e<<r)+t}function Ew(r,e){const t=r[0],n=r[1],s=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(n,s):!0}class Bd{constructor(e,t,n,s){this.minX=e,this.maxX=t,this.minY=n,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function gs(r,e,t,n,s){return s!==void 0?(s.minX=r,s.maxX=e,s.minY=t,s.maxY=n,s):new Bd(r,e,t,n)}const Ta={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class vw extends cu{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Ta.PRELOAD)}setPreload(e){this.set(Ta.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ta.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ta.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function Ka(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}function xw(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Float32Array||r instanceof DataView?r:null}const ww=new Error("disposed");let ps=null;function Cw(r){ps||(ps=et(r.width,r.height,void 0,{willReadFrequently:!0}));const e=ps.canvas,t=r.width;e.width!==t&&(e.width=t);const n=r.height;return e.height!==n&&(e.height=n),ps.clearRect(0,0,t,n),ps.drawImage(r,0,0),ps.getImageData(0,0,t,n).data}const Sw=[256,256];class Zh extends Ud{constructor(e){const t=oe.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Ka(this.data_);return e?[e.width,e.height]:Sw}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=oe.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=oe.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(ww),this.controller_=null),super.disposeInternal()}}const n0=.5,Tw=10,P_=.25;class i0{constructor(e,t,n,s,l,a,c){this.sourceProj_=e,this.targetProj_=t;let h={};const g=c?lE(D=>at(c,tm(D,this.targetProj_,this.sourceProj_))):Oa(this.targetProj_,this.sourceProj_);this.transformInv_=function(D){const k=D[0]+"/"+D[1];return h[k]||(h[k]=g(D)),h[k]},this.maxSourceExtent_=s,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&ke(s)>=ke(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ke(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ke(this.targetProj_.getExtent()):null;const p=yi(n),m=Qa(n),y=qa(n),x=$a(n),E=this.transformInv_(p),w=this.transformInv_(m),C=this.transformInv_(y),I=this.transformInv_(x),R=Tw+(a?Math.max(0,Math.ceil(Math.log2(Xo(n)/(a*a*256*256)))):0);if(this.addQuad_(p,m,y,x,E,w,C,I,R),this.wrapsXInSource_){let D=1/0;this.triangles_.forEach(function(k,P,X){D=Math.min(D,k.source[0][0],k.source[1][0],k.source[2][0])}),this.triangles_.forEach(k=>{if(Math.max(k.source[0][0],k.source[1][0],k.source[2][0])-D>this.sourceWorldWidth_/2){const P=[[k.source[0][0],k.source[0][1]],[k.source[1][0],k.source[1][1]],[k.source[2][0],k.source[2][1]]];P[0][0]-D>this.sourceWorldWidth_/2&&(P[0][0]-=this.sourceWorldWidth_),P[1][0]-D>this.sourceWorldWidth_/2&&(P[1][0]-=this.sourceWorldWidth_),P[2][0]-D>this.sourceWorldWidth_/2&&(P[2][0]-=this.sourceWorldWidth_);const X=Math.min(P[0][0],P[1][0],P[2][0]);Math.max(P[0][0],P[1][0],P[2][0])-X<this.sourceWorldWidth_/2&&(k.source=P)}})}h={}}addTriangle_(e,t,n,s,l,a){this.triangles_.push({source:[s,l,a],target:[e,t,n]})}addQuad_(e,t,n,s,l,a,c,h,g){const p=Lh([l,a,c,h]),m=this.sourceWorldWidth_?ke(p)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&m>.5&&m<1;let E=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const C=Lh([e,t,n,s]);E=ke(C)/this.targetWorldWidth_>P_||E}!x&&this.sourceProj_.isGlobal()&&m&&(E=m>P_||E)}if(!E&&this.maxSourceExtent_&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(p[3])&&!Mt(p,this.maxSourceExtent_))return;let w=0;if(!E&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(h[0])||!isFinite(h[1]))){if(g>0)E=!0;else if(w=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(g>0){if(!E){const C=[(e[0]+n[0])/2,(e[1]+n[1])/2],I=this.transformInv_(C);let R;x?R=(Is(l[0],y)+Is(c[0],y))/2-Is(I[0],y):R=(l[0]+c[0])/2-I[0];const D=(l[1]+c[1])/2-I[1];E=R*R+D*D>this.errorThresholdSquared_}if(E){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const C=[(t[0]+n[0])/2,(t[1]+n[1])/2],I=this.transformInv_(C),R=[(s[0]+e[0])/2,(s[1]+e[1])/2],D=this.transformInv_(R);this.addQuad_(e,t,C,R,l,a,I,D,g-1),this.addQuad_(R,C,n,s,D,I,c,h,g-1)}else{const C=[(e[0]+t[0])/2,(e[1]+t[1])/2],I=this.transformInv_(C),R=[(n[0]+s[0])/2,(n[1]+s[1])/2],D=this.transformInv_(R);this.addQuad_(e,C,R,s,l,I,D,h,g-1),this.addQuad_(C,t,n,R,I,a,c,D,g-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}w&11||this.addTriangle_(e,n,s,l,c,h),w&14||this.addTriangle_(e,n,t,l,c,a),w&&(w&13||this.addTriangle_(t,s,e,a,h,l),w&7||this.addTriangle_(t,s,n,a,h,c))}calculateSourceExtent(){const e=qt();return this.triangles_.forEach(function(t,n,s){const l=t.source;Go(e,l[0]),Go(e,l[1]),Go(e,l[2])}),e}getTriangles(){return this.triangles_}}let xh;const ks=[];function A_(r,e,t,n,s){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,s),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,s)),r.restore()}function wh(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function Rw(){if(xh===void 0){const r=et(6,6,ks);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",A_(r,4,5,4,0),A_(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;xh=wh(e,0)||wh(e,4)||wh(e,8),ou(r),ks.push(r.canvas)}return xh}function D_(r,e,t,n){const s=tm(t,e,r);let l=Vp(e,n,t);const a=e.getMetersPerUnit();a!==void 0&&(l*=a);const c=r.getMetersPerUnit();c!==void 0&&(l/=c);const h=r.getExtent();if(!h||Fs(h,s)){const g=Vp(r,l,s)/l;isFinite(g)&&g>0&&(l/=g)}return l}function r0(r,e,t,n){const s=ir(t);let l=D_(r,e,s,n);return(!isFinite(l)||l<=0)&&rd(t,function(a){return l=D_(r,e,a,n),isFinite(l)&&l>0}),l}function Iw(r,e,t,n,s,l,a,c,h,g,p,m,y,x){const E=et(Math.round(t*r),Math.round(t*e),ks);if(m||(E.imageSmoothingEnabled=!1),h.length===0)return E.canvas;E.scale(t,t);function w(P){return Math.round(P*t)/t}E.globalCompositeOperation="lighter";const C=qt();h.forEach(function(P,X,V){id(C,P.extent)});let I;const R=t/n,D=(m?1:1+Math.pow(2,-24))/R;I=et(Math.round(ke(C)*R),Math.round(ut(C)*R),ks),m||(I.imageSmoothingEnabled=!1),h.forEach(function(P,X,V){if(P.image.width>0&&P.image.height>0){if(P.clipExtent){I.save();const $=(P.clipExtent[0]-C[0])*R,te=-(P.clipExtent[3]-C[3])*R,J=ke(P.clipExtent)*R,ee=ut(P.clipExtent)*R;I.rect(m?$:Math.round($),m?te:Math.round(te),m?J:Math.round($+J)-Math.round($),m?ee:Math.round(te+ee)-Math.round(te)),I.clip()}const U=(P.extent[0]-C[0])*R,b=-(P.extent[3]-C[3])*R,B=ke(P.extent)*R,ie=ut(P.extent)*R;I.drawImage(P.image,g,g,P.image.width-2*g,P.image.height-2*g,m?U:Math.round(U),m?b:Math.round(b),m?B:Math.round(U+B)-Math.round(U),m?ie:Math.round(b+ie)-Math.round(b)),P.clipExtent&&I.restore()}});const k=yi(a);return c.getTriangles().forEach(function(P,X,V){const U=P.source,b=P.target;let B=U[0][0],ie=U[0][1],$=U[1][0],te=U[1][1],J=U[2][0],ee=U[2][1];const ne=w((b[0][0]-k[0])/l),Z=w(-(b[0][1]-k[1])/l),W=w((b[1][0]-k[0])/l),q=w(-(b[1][1]-k[1])/l),G=w((b[2][0]-k[0])/l),T=w(-(b[2][1]-k[1])/l),N=B,re=ie;B=0,ie=0,$-=N,te-=re,J-=N,ee-=re;const z=[[$,te,0,0,W-ne],[J,ee,0,0,G-ne],[0,0,$,te,q-Z],[0,0,J,ee,T-Z]],ue=G1(z);if(!ue)return;if(E.save(),E.beginPath(),Rw()||!m){E.moveTo(W,q);const _e=4,xe=ne-W,Te=Z-q;for(let Ge=0;Ge<_e;Ge++)E.lineTo(W+w((Ge+1)*xe/_e),q+w(Ge*Te/(_e-1))),Ge!=_e-1&&E.lineTo(W+w((Ge+1)*xe/_e),q+w((Ge+1)*Te/(_e-1)));E.lineTo(G,T)}else E.moveTo(W,q),E.lineTo(ne,Z),E.lineTo(G,T);E.clip(),E.transform(ue[0],ue[2],ue[1],ue[3],ne,Z),E.translate(C[0]-N,C[3]-re);let he;if(I)he=I.canvas,E.scale(D,-D);else{const _e=h[0],xe=_e.extent;he=_e.image,E.scale(ke(xe)/he.width,-ut(xe)/he.height)}E.drawImage(he,0,0),E.restore()}),I&&(ou(I),ks.push(I.canvas)),p&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,c.getTriangles().forEach(function(P,X,V){const U=P.target,b=(U[0][0]-k[0])/l,B=-(U[0][1]-k[1])/l,ie=(U[1][0]-k[0])/l,$=-(U[1][1]-k[1])/l,te=(U[2][0]-k[0])/l,J=-(U[2][1]-k[1])/l;E.beginPath(),E.moveTo(ie,$),E.lineTo(b,B),E.lineTo(te,J),E.closePath(),E.stroke()}),E.restore()),E.canvas}function _u(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Hh(r,e,t,n,s,l,a){a=a??_u();const c=1/(r-e),h=1/(t-n),g=1/(s-l);return a[0]=-2*c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*h,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*g,a[11]=0,a[12]=(r+e)*c,a[13]=(n+t)*h,a[14]=(l+s)*g,a[15]=1,a}function F_(r,e,t,n,s){return s=s??_u(),s[0]=r[0]*e,s[1]=r[1]*e,s[2]=r[2]*e,s[3]=r[3]*e,s[4]=r[4]*t,s[5]=r[5]*t,s[6]=r[6]*t,s[7]=r[7]*t,s[8]=r[8]*n,s[9]=r[9]*n,s[10]=r[10]*n,s[11]=r[11]*n,s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s}function Lw(r,e,t,n,s){s=s??_u();let l,a,c,h,g,p,m,y,x,E,w,C;return r===s?(s[12]=r[0]*e+r[4]*t+r[8]*n+r[12],s[13]=r[1]*e+r[5]*t+r[9]*n+r[13],s[14]=r[2]*e+r[6]*t+r[10]*n+r[14],s[15]=r[3]*e+r[7]*t+r[11]*n+r[15]):(l=r[0],a=r[1],c=r[2],h=r[3],g=r[4],p=r[5],m=r[6],y=r[7],x=r[8],E=r[9],w=r[10],C=r[11],s[0]=l,s[1]=a,s[2]=c,s[3]=h,s[4]=g,s[5]=p,s[6]=m,s[7]=y,s[8]=x,s[9]=E,s[10]=w,s[11]=C,s[12]=l*e+g*t+x*n+r[12],s[13]=a*e+p*t+E*n+r[13],s[14]=c*e+m*t+w*n+r[14],s[15]=h*e+y*t+C*n+r[15]),s}function kw(r,e,t,n){return n=n??_u(),n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r,n[13]=e,n[14]=t,n[15]=1,n}const Mw=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Pw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class Aw{constructor(e){this.gl_=e,this.program_=$h(e,Pw,Mw),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,n,s,l,a,c,h,g,p,m,y,x){const E=this.gl_;h===void 0&&(h=s),g===void 0&&(g=l),a===void 0&&(a=t),c===void 0&&(c=n),p===void 0&&(p=a),m===void 0&&(m=c),y===void 0&&(y=E.canvas.width),x===void 0&&(x=E.canvas.height),E.bindTexture(E.TEXTURE_2D,e),E.useProgram(this.program_),E.bindBuffer(E.ARRAY_BUFFER,this.positionBuffer),E.enableVertexAttribArray(this.positionLocation),E.vertexAttribPointer(this.positionLocation,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,this.texcoordBuffer),E.enableVertexAttribArray(this.texcoordLocation),E.vertexAttribPointer(this.texcoordLocation,2,E.FLOAT,!1,0,0);let w=Hh(0,y,0,x,-1,1);w=Lw(w,h,g,0),w=F_(w,p,m,1),E.uniformMatrix4fv(this.matrixLocation,!1,w);let C=kw(s/t,l/n,0);C=F_(C,a/t,c/n,1),E.uniformMatrix4fv(this.textureMatrixLocation,!1,C),E.uniform1i(this.textureLocation,0),E.drawArrays(E.TRIANGLES,0,this.positions.length/2)}}function O_(r,e,t){const n=r.createShader(e);if(n===null)throw new Error("Shader compilation failed");if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS)){const s=r.getShaderInfoLog(n);throw s===null?new Error("Shader info log creation failed"):new Error(s)}return n}function $h(r,e,t){const n=r.createProgram(),s=O_(r,r.VERTEX_SHADER,t),l=O_(r,r.FRAGMENT_SHADER,e);if(n===null)throw new Error("Program creation failed");if(r.attachShader(n,s),r.attachShader(n,l),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw r.getProgramInfoLog(n)===null?new Error("Program info log creation failed"):new Error;return n}const Dw=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,Fw=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,Ow=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,Nw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function zw(r,e,t,n){let s;return t.length?s=t.shift():Ld?s=new OffscreenCanvas(r||300,e||300):s=document.createElement("canvas"),r&&(s.width=r),e&&(s.height=e),s.getContext("webgl",n)}function Gw(r){const e=r.canvas;e.width=1,e.height=1,r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT)}const N_=[];function Uw(r,e,t,n,s,l,a,c,h,g,p,m,y,x){const E=Math.round(n*e),w=Math.round(n*t);r.canvas.width=E,r.canvas.height=w;let C,I;if(I=r.createTexture(),r.bindTexture(r.TEXTURE_2D,I),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,E,w,0,r.RGBA,p,null),C=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,C),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,I,0),C===null)throw new Error("Could not create framebuffer");if(I===null)throw new Error("Could not create texture");if(h.length===0)return{width:E,height:w,framebuffer:C,texture:I};const R=qt();h.forEach(function(B,ie,$){id(R,B.extent)});let D,k,P;const X=1/s;{if(D=r.createTexture(),I===null)throw new Error("Could not create texture");k=Math.round(ke(R)*X),P=Math.round(ut(R)*X);const B=r.getParameter(r.MAX_TEXTURE_SIZE),ie=Math.max(k,P),$=ie>B?B/ie:1,te=Math.round(k*$),J=Math.round(P*$);r.bindTexture(r.TEXTURE_2D,D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,te,J,0,r.RGBA,p,null);const ee=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,ee),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,D,0);const ne=new Aw(r);h.forEach(function(Z,W,q){const G=(Z.extent[0]-R[0])*X*$,T=-(Z.extent[3]-R[3])*X*$,N=ke(Z.extent)*X*$,re=ut(Z.extent)*X*$;if(r.bindFramebuffer(r.FRAMEBUFFER,ee),r.viewport(0,0,te,J),Z.clipExtent){const z=(Z.clipExtent[0]-R[0])*X*$,ue=-(Z.clipExtent[3]-R[3])*X*$,he=ke(Z.clipExtent)*X*$,_e=ut(Z.clipExtent)*X*$;r.enable(r.SCISSOR_TEST),r.scissor(y?z:Math.round(z),y?ue:Math.round(ue),y?he:Math.round(z+he)-Math.round(z),y?_e:Math.round(ue+_e)-Math.round(ue))}ne.drawImage(Z.texture,Z.width,Z.height,g,g,Z.width-2*g,Z.height-2*g,y?G:Math.round(G),y?T:Math.round(T),y?N:Math.round(G+N)-Math.round(G),y?re:Math.round(T+re)-Math.round(T),te,J),r.disable(r.SCISSOR_TEST)}),r.deleteFramebuffer(ee)}const V=yi(a),U=yi(R),b=B=>{const ie=(B[0][0]-V[0])/l*n,$=-(B[0][1]-V[1])/l*n,te=(B[1][0]-V[0])/l*n,J=-(B[1][1]-V[1])/l*n,ee=(B[2][0]-V[0])/l*n,ne=-(B[2][1]-V[1])/l*n;return{u1:te,v1:J,u0:ie,v0:$,u2:ee,v2:ne}};r.bindFramebuffer(r.FRAMEBUFFER,C),r.viewport(0,0,E,w);{const B=[],ie=[],$=$h(r,Nw,Ow);r.useProgram($);const te=r.getUniformLocation($,"u_texture");r.bindTexture(r.TEXTURE_2D,D),r.uniform1i(te,0),c.getTriangles().forEach(function(G,T,N){const re=G.source,z=G.target,{u1:ue,v1:he,u0:_e,v0:xe,u2:Te,v2:Ge}=b(z),Ct=(re[0][0]-U[0])/s/k,An=-(re[0][1]-U[1])/s/P,gn=(re[1][0]-U[0])/s/k,$n=-(re[1][1]-U[1])/s/P,Dn=(re[2][0]-U[0])/s/k,Qt=-(re[2][1]-U[1])/s/P;B.push(ue,he,_e,xe,Te,Ge),ie.push(gn,$n,Ct,An,Dn,Qt)});const J=Hh(0,E,w,0,-1,1),ee=r.getUniformLocation($,"u_matrix");r.uniformMatrix4fv(ee,!1,J);const ne=r.getAttribLocation($,"a_position"),Z=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,Z),r.bufferData(r.ARRAY_BUFFER,new Float32Array(B),r.STATIC_DRAW),r.vertexAttribPointer(ne,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ne);const W=r.getAttribLocation($,"a_texcoord"),q=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,q),r.bufferData(r.ARRAY_BUFFER,new Float32Array(ie),r.STATIC_DRAW),r.vertexAttribPointer(W,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(W),r.drawArrays(r.TRIANGLES,0,B.length/2)}if(m){const B=$h(r,Fw,Dw);r.useProgram(B);const ie=Hh(0,E,w,0,-1,1),$=r.getUniformLocation(B,"u_matrix");r.uniformMatrix4fv($,!1,ie);const te=Array.isArray(m)?m:[0,0,0,255],J=r.getUniformLocation(B,"u_val");r.uniform4fv(J,te);const ee=r.getAttribLocation(B,"a_position"),ne=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,ne),r.vertexAttribPointer(ee,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ee);const Z=c.getTriangles().reduce(function(W,q){const G=q.target,{u1:T,v1:N,u0:re,v0:z,u2:ue,v2:he}=b(G);return W.concat([T,N,re,z,re,z,ue,he,ue,he,T,N])},[]);r.bufferData(r.ARRAY_BUFFER,new Float32Array(Z),r.STATIC_DRAW),r.drawArrays(r.LINES,0,Z.length/2)}return{width:E,height:w,framebuffer:C,texture:I}}class Xw extends Zh{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,n=t.getExtent(),s=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?s?kn(n,s):n:s;const l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let c=this.sourceTileGrid_.getExtent();const h=a?kn(l,a):l;if(Xo(h)===0){this.state=oe.EMPTY;return}n&&(c?c=kn(c,n):c=n);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),p=e.targetProj,m=r0(t,p,h,g);if(!isFinite(m)||m<=0){this.state=oe.EMPTY;return}const y=e.errorThreshold!==void 0?e.errorThreshold:n0;if(this.triangulation_=new i0(t,p,h,c,m*y,g,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(m);let x=this.triangulation_.calculateSourceExtent();if(c&&(t.canWrapX()?(x[1]=Ke(x[1],c[1],c[3]),x[3]=Ke(x[3],c[1],c[3])):x=kn(x,c)),!Xo(x))this.state=oe.EMPTY;else{let E=0,w=0;t.canWrapX()&&(E=ke(n),w=Math.floor((x[0]-n[0])/E)),sd(x.slice(),t,!0).forEach(I=>{const R=this.sourceTileGrid_.getTileRangeForExtentAndZ(I,this.sourceZ_),D=e.getTileFunction;for(let k=R.minX;k<=R.maxX;k++)for(let P=R.minY;P<=R.maxY;P++){const X=D(this.sourceZ_,k,P,this.pixelRatio_);if(X){const V=w*E;this.sourceTiles_.push({tile:X,offset:V})}}++w}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(k=>{var T;const P=k.tile;if(!P||P.getState()!==oe.LOADED)return;const X=P.getSize(),V=this.gutter_;let U;const b=xw(P.getData());b?U=b:(t=!0,U=Cw(Ka(P.getData())));const B=[X[0]+2*V,X[1]+2*V],ie=U instanceof Float32Array,$=B[0]*B[1],te=ie?Float32Array:Uint8ClampedArray,J=new te(U.buffer),ee=te.BYTES_PER_ELEMENT,ne=ee*J.length/$,Z=J.byteLength/B[1],W=Math.floor(Z/ee/B[0]),q=this.sourceTileGrid_.getTileCoordExtent(P.tileCoord);q[0]+=k.offset,q[2]+=k.offset;const G=(T=this.clipExtent_)==null?void 0:T.slice();G&&(G[0]+=k.offset,G[2]+=k.offset),e.push({extent:q,clipExtent:G,data:J,dataType:te,bytesPerPixel:ne,pixelSize:B,bandCount:W})}),this.sourceTiles_.length=0,e.length===0){this.state=oe.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(n),l=typeof s=="number"?s:s[0],a=typeof s=="number"?s:s[1],c=l*this.pixelRatio_,h=a*this.pixelRatio_,g=this.targetTileGrid_.getResolution(n),p=this.sourceTileGrid_.getResolution(this.sourceZ_),m=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),y=e[0].bandCount,x=new e[0].dataType(y*c*h),E=zw(c,h,N_,{premultipliedAlpha:!1,antialias:!1});let w;const C=E.RGBA;let I;e[0].dataType==Float32Array?(I=E.FLOAT,E.getExtension("WEBGL_color_buffer_float"),E.getExtension("OES_texture_float"),E.getExtension("EXT_float_blend"),w=E.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(I=E.UNSIGNED_BYTE,w=this.interpolate);const R=4,D=Math.ceil(y/R);for(let k=D-1;k>=0;--k){const P=[];for(let te=0,J=e.length;te<J;++te){const ee=e[te],ne=ee.pixelSize,Z=ne[0],W=ne[1],q=new ee.dataType(R*Z*W),G=ee.data;let T=k*R;for(let re=0,z=q.length;re<z;re+=R)q[re]=G[T],q[re+1]=G[T+1],q[re+2]=G[T+2],q[re+3]=G[T+3],T+=y;const N=E.createTexture();E.bindTexture(E.TEXTURE_2D,N),w?(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR)):(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST)),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,C,Z,W,0,C,I,q),P.push({extent:ee.extent,clipExtent:ee.clipExtent,texture:N,width:Z,height:W})}const{framebuffer:X,width:V,height:U}=Uw(E,l,a,this.pixelRatio_,p,g,m,this.triangulation_,P,this.gutter_,I,this.renderEdges_,w),b=V,B=U*R,ie=new e[0].dataType(b*B);E.bindFramebuffer(E.FRAMEBUFFER,X),E.readPixels(0,0,V,U,E.RGBA,I,ie);let $=k*R;for(let te=0,J=ie.length;te<J;te+=R){const ee=(b-1-(te/B|0))*B+te%B;x[$]=ie[ee],x[$+1]=ie[ee+1],x[$+2]=ie[ee+2],x[$+3]=ie[ee+3],$+=y}}if(Gw(E),N_.push(E.canvas),t){const k=et(l,a),P=new ImageData(x,l);k.putImageData(P,0,0),this.reprojData_=k.canvas}else this.reprojData_=x;this.reprojSize_=[Math.round(c),Math.round(h)],this.state=oe.LOADED,this.changed()}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n!==oe.IDLE&&n!==oe.LOADING)return;e++;const s=Ie(t,Ee.CHANGE,()=>{const l=t.getState();(l==oe.LOADED||l==oe.ERROR||l==oe.EMPTY)&&(Xe(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==oe.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Xe),this.sourcesListenerKeys_=null}}class qh extends Ud{constructor(e,t,n,s,l,a,c,h,g,p,m,y){super(l,oe.IDLE,y),this.renderEdges_=m!==void 0?m:!1,this.pixelRatio_=c,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=a||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const x=s.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const C=E?kn(x,E):x;if(Xo(C)===0){this.state=oe.EMPTY;return}const I=e.getExtent();I&&(w?w=kn(w,I):w=I);const R=s.getResolution(this.wrappedTileCoord_[0]),D=r0(e,n,C,R);if(!isFinite(D)||D<=0){this.state=oe.EMPTY;return}const k=p!==void 0?p:n0;if(this.triangulation_=new i0(e,n,C,w,D*k,R),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=t.getZForResolution(D);let P=this.triangulation_.calculateSourceExtent();if(w&&(e.canWrapX()?(P[1]=Ke(P[1],w[1],w[3]),P[3]=Ke(P[3],w[1],w[3])):P=kn(P,w)),!Xo(P))this.state=oe.EMPTY;else{let X=0,V=0;e.canWrapX()&&(X=ke(I),V=Math.floor((P[0]-I[0])/X)),sd(P.slice(),e,!0).forEach(b=>{const B=t.getTileRangeForExtentAndZ(b,this.sourceZ_);for(let ie=B.minX;ie<=B.maxX;ie++)for(let $=B.minY;$<=B.maxY;$++){const te=g(this.sourceZ_,ie,$,c);if(te){const J=V*X;this.sourceTiles_.push({tile:te,offset:J})}}++V}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var s;const n=t.tile;if(n&&n.getState()==oe.LOADED){const l=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);l[0]+=t.offset,l[2]+=t.offset;const a=(s=this.clipExtent_)==null?void 0:s.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:l,clipExtent:a,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=oe.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),s=typeof n=="number"?n:n[0],l=typeof n=="number"?n:n[1],a=this.targetTileGrid_.getResolution(t),c=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Iw(s,l,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),a,h,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=oe.LOADED}this.changed()}load(){if(this.state==oe.IDLE){this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==oe.IDLE||n==oe.LOADING){e++;const s=Ie(t,Ee.CHANGE,l=>{const a=t.getState();(a==oe.LOADED||a==oe.ERROR||a==oe.EMPTY)&&(Xe(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,s){t.getState()==oe.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Xe),this.sourcesListenerKeys_=null}release(){this.canvas_&&(ou(this.canvas_.getContext("2d")),ks.push(this.canvas_),this.canvas_=null),super.release()}}function Ch(r,e,t,n){return`${r},${_w(e,t,n)}`}function Sh(r,e,t){if(!(t in r))return r[t]=new Set([e]),!0;const n=r[t],s=n.has(e);return s||n.add(e),!s}function Ww(r,e,t){const n=r[t];return n?n.delete(e):!1}function z_(r,e){const t=r.layerStatesArray[r.layerIndex];t.extent&&(e=kn(e,$i(t.extent,r.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const s=n.getTileGridForProjection(r.viewState.projection).getExtent();s&&(e=kn(e,s))}return e}class jw extends Xm{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=qt(),this.tempTileRange_=new Bd(0,0,0,0),this.tempTileCoord_=Va(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new pw(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,s){const l=this.tileCache_,c=this.getLayer().getSource(),h=Ch(c.getKey(),e,t,n);let g;if(l.containsKey(h))g=l.get(h);else{if(g=c.getTile(e,t,n,s.pixelRatio,s.viewState.projection),!g)return null;l.set(h,g)}return g}getTile(e,t,n,s){const l=this.getOrCreateTile(e,t,n,s);return l||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),s=at(t.pixelToCoordinateTransform,e.slice()),l=n.getExtent();if(l&&!Fs(l,s))return null;const a=t.viewState,c=n.getRenderSource(),h=c.getTileGridForProjection(a.projection),g=c.getTilePixelRatio(t.pixelRatio);for(let p=h.getZForResolution(a.resolution);p>=h.getMinZoom();--p){const m=h.getTileCoordForCoordAndZ(s,p),y=this.getTile(p,m[1],m[2],t);if(!y||y.getState()!==oe.LOADED)continue;const x=h.getOrigin(p),E=jt(h.getTileSize(p)),w=h.getResolution(p);let C;if(y instanceof Hm||y instanceof qh)C=y.getImage();else if(y instanceof Zh){if(C=Ka(y.getData()),!C)continue}else continue;const I=Math.floor(g*((s[0]-x[0])/w-m[1]*E[0])),R=Math.floor(g*((x[1]-s[1])/w-m[2]*E[1])),D=Math.round(g*c.getGutterForProjection(a.projection));return this.getImageData(C,I+D,R+D)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(e,t,n,s,l){const a=e.viewState,c=this.getLayer(),h=c.getRenderSource(),g=h.getTileGridForProjection(a.projection),p=Fe(h);p in e.wantedTiles||(e.wantedTiles[p]={});const m=e.wantedTiles[p],y=c.getMapInternal(),x=Math.max(n-l,g.getMinZoom(),g.getZForResolution(Math.min(c.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(c.getMinZoom(),0)):g.getResolution(0)),h.zDirection));for(let E=n;E>=x;--E){const w=g.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),C=g.getResolution(E);for(let I=w.minX;I<=w.maxX;++I)for(let R=w.minY;R<=w.maxY;++R){const D=this.getTile(E,I,R,e);if(!D||!Sh(s,D,E))continue;const P=D.getKey();if(m[P]=!0,D.getState()===oe.IDLE&&!e.tileQueue.isKeyQueued(P)){const X=Va(E,I,R,this.tempTileCoord_);e.tileQueue.enqueue([D,p,g.getTileCoordCenter(X),C])}}}}findStaleTile_(e,t){const n=this.tileCache_,s=e[0],l=e[1],a=e[2],c=this.getStaleKeys();for(let h=0;h<c.length;++h){const g=Ch(c[h],s,l,a);if(n.containsKey(g)){const p=n.get(g);if(p.getState()===oe.LOADED)return p.endTransition(Fe(this)),Sh(t,p,s),!0}}return!1}findAltTiles_(e,t,n,s){const l=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!l)return!1;let a=!0;const c=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let p=l.minX;p<=l.maxX;++p)for(let m=l.minY;m<=l.maxY;++m){const y=Ch(g,n,p,m);let x=!1;if(c.containsKey(y)){const E=c.get(y);E.getState()===oe.LOADED&&(Sh(s,E,n),x=!0)}x||(a=!1)}return a}renderFrame(e,t){let n=!0;this.renderComplete=!0;const s=e.layerStatesArray[e.layerIndex],l=e.viewState,a=l.projection,c=l.resolution,h=l.center,g=e.pixelRatio,p=this.getLayer(),m=p.getSource(),y=m.getRevision(),x=m.getTileGridForProjection(a),E=x.getZForResolution(c,m.zDirection),w=x.getResolution(E),C=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==C&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=C):this.renderedSourceKey_=C;let I=e.extent;const R=m.getTilePixelRatio(g);this.prepareContainer(e,t);const D=this.context.canvas.width,k=this.context.canvas.height,P=s.extent&&$i(s.extent);P&&(I=kn(I,$i(s.extent)));const X=w*D/2/R,V=w*k/2/R,U=[h[0]-X,h[1]-V,h[0]+X,h[1]+V],b={};this.renderedTiles.length=0;const B=p.getPreload();if(e.nextExtent){const G=x.getZForResolution(l.nextResolution,m.zDirection),T=z_(e,e.nextExtent);this.enqueueTiles(e,T,G,b,B)}const ie=z_(e,I);if(this.enqueueTiles(e,ie,E,b,0),B>0&&setTimeout(()=>{this.enqueueTiles(e,ie,E-1,b,B-1)},0),!(E in b))return this.container;const $=Fe(this),te=e.time;for(const G of b[E]){const T=G.getState();if((G instanceof qh||G instanceof Xw)&&T===oe.EMPTY)continue;const N=G.tileCoord;if(T===oe.LOADED&&G.getAlpha($,te)===1){G.endTransition($);continue}if(T!==oe.IDLE&&(n=!1),T!==oe.ERROR&&(this.renderComplete=!1),this.findStaleTile_(N,b)){Ww(b,G,E),e.animate=!0;continue}if(this.findAltTiles_(x,N,E+1,b))continue;const ue=x.getMinZoom();for(let he=E-1;he>=ue&&!this.findAltTiles_(x,N,he,b);--he);}const J=w/c*g/R,ee=this.getRenderContext(e);_i(this.tempTransform,D/2,k/2,J,J,0,-D/2,-k/2),s.extent&&this.clipUnrotated(ee,e,P),m.getInterpolate()||(ee.imageSmoothingEnabled=!1),this.preRender(ee,e);const ne=Object.keys(b).map(Number);ne.sort(Ji);let Z;const W=[],q=[];for(let G=ne.length-1;G>=0;--G){const T=ne[G],N=m.getTilePixelSize(T,g,a),z=x.getResolution(T)/w,ue=N[0]*z*J,he=N[1]*z*J,_e=x.getTileCoordForCoordAndZ(yi(U),T),xe=x.getTileCoordExtent(_e),Te=at(this.tempTransform,[R*(xe[0]-U[0])/w,R*(U[3]-xe[3])/w]),Ge=R*m.getGutterForProjection(a);for(const Ct of b[T]){if(Ct.getState()!==oe.LOADED)continue;const An=Ct.tileCoord,gn=_e[1]-An[1],$n=Math.round(Te[0]-(gn-1)*ue),Dn=_e[2]-An[2],Qt=Math.round(Te[1]-(Dn-1)*he),gt=Math.round(Te[0]-gn*ue),Yt=Math.round(Te[1]-Dn*he),Fn=$n-gt,Jt=Qt-Yt,en=ne.length===1;let pn=!1;Z=[gt,Yt,gt+Fn,Yt,gt+Fn,Yt+Jt,gt,Yt+Jt];for(let qn=0,Qn=W.length;qn<Qn;++qn)if(!en&&T<q[qn]){const He=W[qn];Mt([gt,Yt,gt+Fn,Yt+Jt],[He[0],He[3],He[4],He[7]])&&(pn||(ee.save(),pn=!0),ee.beginPath(),ee.moveTo(Z[0],Z[1]),ee.lineTo(Z[2],Z[3]),ee.lineTo(Z[4],Z[5]),ee.lineTo(Z[6],Z[7]),ee.moveTo(He[6],He[7]),ee.lineTo(He[4],He[5]),ee.lineTo(He[2],He[3]),ee.lineTo(He[0],He[1]),ee.clip())}W.push(Z),q.push(T),this.drawTile(Ct,e,gt,Yt,Fn,Jt,Ge,en),pn&&ee.restore(),this.renderedTiles.unshift(Ct),this.updateUsedTiles(e.usedTiles,m,Ct)}}if(this.renderedRevision=y,this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!Uo(this.renderedExtent_,U),this.renderedExtent_=U,this.renderedPixelRatio=g,this.postRender(this.context,e),s.extent&&ee.restore(),ee.imageSmoothingEnabled=!0,this.renderComplete){const G=(T,N)=>{const re=Fe(m),z=N.wantedTiles[re],ue=z?Object.keys(z).length:0;this.updateCacheSize(ue),this.tileCache_.expireCache()};e.postRenderFunctions.push(G)}return!this.renderComplete&&!n&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,s,l,a,c,h){let g;if(e instanceof Zh){if(g=Ka(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const p=this.getRenderContext(t),m=Fe(this),y=t.layerStatesArray[t.layerIndex],x=y.opacity*(h?e.getAlpha(m,t.time):1),E=x!==p.globalAlpha;E&&(p.save(),p.globalAlpha=x),p.drawImage(g,c,c,g.width-2*c,g.height-2*c,n,s,l,a),E&&p.restore(),x!==y.opacity?t.animate=!0:h&&e.endTransition(m)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const s=Fe(t);s in e||(e[s]={}),e[s][n.getKey()]=!0}}class bw extends vw{constructor(e){super(e)}createRenderer(){return new jw(this,{cacheSize:this.getCacheSize()})}}const Th={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},_s=[0,0,0],Ki=5;class s0{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ae(_1(this.resolutions_,(s,l)=>l-s),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let s=0,l=this.resolutions_.length-1;s<l;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ae(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=yi(n)),Ae(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ae(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Ad,Ae(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((s,l)=>{const a=new Bd(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const c=this.getTileRangeForExtentAndZ(n,l);a.minX=Math.max(c.minX,a.minX),a.maxX=Math.min(c.maxX,a.maxX),a.minY=Math.max(c.minY,a.minY),a.maxY=Math.min(c.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const s=this.getTileRangeForExtentAndZ(e,t);for(let l=s.minX,a=s.maxX;l<=a;++l)for(let c=s.minY,h=s.maxY;c<=h;++c)n([t,l,c])}forEachTileCoordParentTileRange(e,t,n,s){let l,a,c,h=null,g=e[0]-1;for(this.zoomFactor_===2?(a=e[1],c=e[2]):h=this.getTileCoordExtent(e,s);g>=this.minZoom;){if(a!==void 0&&c!==void 0?(a=Math.floor(a/2),c=Math.floor(c/2),l=gs(a,a,c,c,n)):l=this.getTileRangeForExtentAndZ(h,g,n),t(g,l))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,a=e[2]*2;return gs(l,l+1,a,a+1,t)}const s=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],l=e[1],a=e[2];if(t===s)return gs(l,a,l,a,n);if(this.zoomFactor_){const h=Math.pow(this.zoomFactor_,t-s),g=Math.floor(l*h),p=Math.floor(a*h);if(t<s)return gs(g,g,p,p,n);const m=Math.floor(h*(l+1))-1,y=Math.floor(h*(a+1))-1;return gs(g,m,p,y,n)}const c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,_s);const s=_s[1],l=_s[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,_s);const a=_s[1],c=_s[2];return gs(s,a,l,c,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=jt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*n,t[1]-(e[2]+.5)*s[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),s=this.getResolution(e[0]),l=jt(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*l[0]*s,c=n[1]-(e[2]+1)*l[1]*s,h=a+l[0]*s,g=c+l[1]*s;return mi(a,c,h,g,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,s,l){const a=this.getZForResolution(n),c=n/this.getResolution(a),h=this.getOrigin(a),g=jt(this.getTileSize(a),this.tmpSize_);let p=c*(e-h[0])/n/g[0],m=c*(h[1]-t)/n/g[1];return s?(p=ya(p,Ki)-1,m=ya(m,Ki)-1):(p=ma(p,Ki),m=ma(m,Ki)),Va(a,p,m,l)}getTileCoordForXYAndZ_(e,t,n,s,l){const a=this.getOrigin(n),c=this.getResolution(n),h=jt(this.getTileSize(n),this.tmpSize_);let g=(e-a[0])/c/h[0],p=(a[1]-t)/c/h[1];return s?(g=ya(g,Ki)-1,p=ya(p,Ki)-1):(g=ma(g,Ki),p=ma(p,Ki)),Va(n,g,p,l)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=Jh(this.resolutions_,e,t||0);return Ke(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return cm(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let s=this.minZoom;s<t;++s)n[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=n}}function o0(r){let e=r.getDefaultTileGrid();return e||(e=Kw(r),r.setDefaultTileGrid(e)),e}function Bw(r,e,t){const n=e[0],s=r.getTileCoordCenter(e),l=Yd(t);if(!Fs(l,s)){const a=ke(l),c=Math.ceil((l[0]-s[0])/a);return s[0]+=a*c,r.getTileCoordForCoordAndZ(s,n)}return e}function Yw(r,e,t,n){n=n!==void 0?n:"top-left";const s=l0(r,e,t);return new s0({extent:r,origin:T1(r,n),resolutions:s,tileSize:t})}function Vw(r){const e=r,t=e.extent||Bt("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:l0(t,e.maxZoom,e.tileSize,e.maxResolution)};return new s0(n)}function l0(r,e,t,n){e=e!==void 0?e:JE,t=jt(t!==void 0?t:Ad);const s=ut(r),l=ke(r);n=n>0?n:Math.max(l/t[0],s/t[1]);const a=e+1,c=new Array(a);for(let h=0;h<a;++h)c[h]=n/Math.pow(2,h);return c}function Kw(r,e,t,n){const s=Yd(r);return Yw(s,e,t,n)}function Yd(r){r=Bt(r);let e=r.getExtent();if(!e){const t=180*od.degrees/r.getMetersPerUnit();e=mi(-t,-t,t,t)}return e}class Zw extends Km{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&jt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Fe(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,s,l){return Pe()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:o0(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const s=this.getTileGridForProjection(n),l=this.getTilePixelRatio(t),a=jt(s.getTileSize(e),this.tmpSize);return l==1?a:jE(a,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const n=t!==void 0?t:this.getProjection(),s=t!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=Bw(s,e,n)),Ew(e,s)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Hw extends Zn{constructor(e,t){super(e),this.tile=t}}const $w=/\{z\}/g,qw=/\{x\}/g,Qw=/\{y\}/g,Jw=/\{-y\}/g;function eC(r,e,t,n,s){return r.replace($w,e.toString()).replace(qw,t.toString()).replace(Qw,n.toString()).replace(Jw,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-n).toString()})}function tC(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const n=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let l;for(l=n;l<=s;++l)e.push(r.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const n=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=n;s++)e.push(r.replace(t[0],s.toString()));return e}return e.push(r),e}function nC(r,e){return function(t,n,s){if(!t)return;let l;const a=t[0];if(e){const c=e.getFullTileRange(a);c&&(l=c.getHeight()-1)}return eC(r,a,t[1],t[2],l)}}function iC(r,e){const t=r.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=nC(r[s],e);return rC(n)}function rC(r){return r.length===1?r[0]:function(e,t,n){if(!e)return;const s=mw(e),l=Is(s,r.length);return r[l](e,t,n)}}class Vd extends Zw{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Vd.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Fe(t),s=t.getState();let l;s==oe.LOADING?(this.tileLoadingKeys_[n]=!0,l=Th.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],l=s==oe.ERROR?Th.TILELOADERROR:s==oe.LOADED?Th.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new Hw(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=tC(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(iC(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class sC extends Vd{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:oC,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Hm,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!sh(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||sh(t,e)))return this.tileGrid;const n=Fe(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=o0(e)),this.tileGridForProjection[n]}createTile_(e,t,n,s,l,a){const c=[e,t,n],h=this.getTileCoordForTileUrlFunction(c,l),g=h?this.tileUrlFunction(h,s,l):void 0,p=new this.tileClass(c,g!==void 0?oe.IDLE:oe.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=a,p.addEventListener(Ee.CHANGE,this.handleTileChange.bind(this)),p}getTile(e,t,n,s,l){const a=this.getProjection();if(!a||!l||sh(a,l))return this.getTileInternal(e,t,n,s,a||l);const c=[e,t,n],h=this.getKey(),g=this.getTileGridForProjection(a),p=this.getTileGridForProjection(l),m=this.getTileCoordForTileUrlFunction(c,l),y=new qh(a,g,l,p,c,m,this.getTilePixelRatio(s),this.getGutter(),(x,E,w,C)=>this.getTileInternal(x,E,w,C,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=h,y}getTileInternal(e,t,n,s,l){const a=this.getKey();return this.createTile_(e,t,n,s,l,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=Bt(e);if(n){const s=Fe(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}}function oC(r,e){r.getImage().src=e}class lC extends sC{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:Vw({extent:Yd(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const aC='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class uC extends lC{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[aC];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}const Ra={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Ia extends Zn{constructor(e,t){super(e),this.feature=t}}function cC(r,e){const t=[];for(let n=0;n<e.length;++n){const l=e[n].getGeometry();a0(r,l,t)}return t}function La(r,e){return fi(r[0],r[1],e[0],e[1])}function Ss(r,e){const t=r.length;return e<0?r[e+t]:e>=t?r[e-t]:r[e]}function ka(r,e,t){let n,s;e<t?(n=e,s=t):(n=t,s=e);const l=Math.ceil(n),a=Math.floor(s);if(l>a){const h=Ts(r,n),g=Ts(r,s);return La(h,g)}let c=0;if(n<l){const h=Ts(r,n),g=Ss(r,l);c+=La(h,g)}if(a<s){const h=Ss(r,a),g=Ts(r,s);c+=La(h,g)}for(let h=l;h<a-1;++h){const g=Ss(r,h),p=Ss(r,h+1);c+=La(g,p)}return c}function a0(r,e,t){if(e instanceof fn){Ma(r,e.getCoordinates(),!1,t);return}if(e instanceof qo){const n=e.getCoordinates();for(let s=0,l=n.length;s<l;++s)Ma(r,n[s],!1,t);return}if(e instanceof Ei){const n=e.getCoordinates();for(let s=0,l=n.length;s<l;++s)Ma(r,n[s],!0,t);return}if(e instanceof Qo){const n=e.getCoordinates();for(let s=0,l=n.length;s<l;++s){const a=n[s];for(let c=0,h=a.length;c<h;++c)Ma(r,a[c],!0,t)}return}if(e instanceof Ba){const n=e.getGeometries();for(let s=0;s<n.length;++s)a0(r,n[s],t);return}}const Rh={index:-1,endIndex:NaN};function hC(r,e,t,n){const s=r[0],l=r[1];let a=1/0,c=-1,h=NaN;for(let m=0;m<e.targets.length;++m){const y=e.targets[m],x=y.coordinates;let E=1/0,w;for(let C=0;C<x.length-1;++C){const I=x[C],R=x[C+1],D=u0(s,l,I,R);D.squaredDistance<E&&(E=D.squaredDistance,w=C+D.along)}E<a&&(a=E,y.ring&&e.targetIndex===m&&(y.endIndex>y.startIndex?w<y.startIndex&&(w+=x.length):y.endIndex<y.startIndex&&w>y.startIndex&&(w-=x.length)),h=w,c=m)}const g=e.targets[c];let p=g.ring;if(e.targetIndex===c&&p){const m=Ts(g.coordinates,h),y=t.getPixelFromCoordinate(m);Y_(y,e.startPx)>n&&(p=!1)}if(p){const m=g.coordinates,y=m.length,x=g.startIndex,E=h;if(x<E){const w=ka(m,x,E);ka(m,x,E-y)<w&&(h-=y)}else{const w=ka(m,x,E);ka(m,x,E+y)<w&&(h+=y)}}return Rh.index=c,Rh.endIndex=h,Rh}function Ma(r,e,t,n){const s=r[0],l=r[1];for(let a=0,c=e.length-1;a<c;++a){const h=e[a],g=e[a+1],p=u0(s,l,h,g);if(p.squaredDistance===0){const m=a+p.along;n.push({coordinates:e,ring:t,startIndex:m,endIndex:m});return}}}const Ih={along:0,squaredDistance:0};function u0(r,e,t,n){const s=t[0],l=t[1],a=n[0],c=n[1],h=a-s,g=c-l;let p=0,m=s,y=l;return(h!==0||g!==0)&&(p=Ke(((r-s)*h+(e-l)*g)/(h*h+g*g),0,1),m+=h*p,y+=g*p),Ih.along=p,Ih.squaredDistance=eu(fi(r,e,m,y),10),Ih}function Ts(r,e){const t=r.length;let n=Math.floor(e);const s=e-n;n>=t?n-=t:n<0&&(n+=t);let l=n+1;l>=t&&(l-=t);const a=r[n],c=a[0],h=a[1],g=r[l],p=g[0]-c,m=g[1]-h;return[c+p*s,h+m*s]}class dC extends js{constructor(e){const t=e;t.stopDown||(t.stopDown=Us),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=gC(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Ps,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let n=e.geometryFunction;if(!n){const s=this.mode_;if(s==="Circle")n=(l,a,c)=>{const h=a||new gu([NaN,NaN]),g=Rn(l[0]),p=B_(g,Rn(l[l.length-1]));return h.setCenterAndRadius(g,Math.sqrt(p),this.geometryLayout_),h};else{let l;s==="Point"?l=nr:s==="LineString"?l=fn:s==="Polygon"&&(l=Ei),n=(a,c,h)=>(c?s==="Polygon"?a[0].length?c.setCoordinates([a[0].concat([a[0][0]])],this.geometryLayout_):c.setCoordinates([],this.geometryLayout_):c.setCoordinates(a,this.geometryLayout_):c=new l(a,this.geometryLayout_),c)}}this.geometryFunction_=n,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Ym({source:new Zm({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:fC(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:bd,this.freehandCondition_,e.freehand?this.freehandCondition_=Kh:this.freehandCondition_=e.freehandCondition?e.freehandCondition:Qm,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(Yh.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=Kh:t=e:t=Jx,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===Ee.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Oe.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Oe.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Oe.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===Oe.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===Oe.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Oe.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Oe.DBLCLICK&&(n=!1),super.handleEvent(e)&&n}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new hi(Oe.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),n=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),s=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),l=Lh([n,s]),a=this.traceSource_.getFeaturesInExtent(l);if(a.length===0)return;const c=cC(e.coordinate,a);c.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:c,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex,s=e.startIndex<=t;n===s?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const s=Math.ceil(e);let l=Math.floor(t);l===t&&(l-=1),n=l-s+1}else{const s=Math.floor(e);let l=Math.ceil(t);l===t&&(l+=1),n=s-l+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(e,t,n){if(t===n)return;const s=[];if(t<n){const l=Math.ceil(t);let a=Math.floor(n);a===n&&(a-=1);for(let c=l;c<=a;++c)s.push(Ss(e.coordinates,c))}else{const l=Math.floor(t);let a=Math.ceil(n);a===n&&(a+=1);for(let c=l;c>=a;--c)s.push(Ss(e.coordinates,c))}s.length&&this.appendCoordinates(s)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Y_(t.startPx,e.pixel)<this.snapTolerance_)return;const n=hC(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==n.index){if(t.targetIndex!==-1){const h=t.targets[t.targetIndex];this.removeTracedCoordinates_(h.startIndex,h.endIndex)}const c=t.targets[n.index];this.addTracedCoordinates_(c,c.startIndex,n.endIndex)}else{const c=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(c,n.endIndex)}t.targetIndex=n.index;const s=t.targets[t.targetIndex];s.endIndex=n.endIndex;const l=Ts(s.coordinates,s.endIndex),a=this.getMap().getPixelFromCoordinate(l);e.coordinate=l,e.pixel=[Math.round(a[0]),Math.round(a[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const n=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const s=!this.finishCoordinate_;s&&this.startDrawing_(e.coordinate),!s&&this.freehand_?this.finishDrawing():!this.freehand_&&(!s||this.mode_==="Point")&&(this.atFinish_(e.pixel,n)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,n=e.pixel,s=t[0]-n[0],l=t[1]-n[1],a=s*s+l*l;if(this.shouldHandle_=this.freehand_?a>this.squaredClickTolerance_:a<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let n=!1;if(this.sketchFeature_){let s=!1,l=[this.finishCoordinate_];const a=this.mode_;if(a==="Point")n=!0;else if(a==="Circle")n=this.sketchCoords_.length===2;else if(a==="LineString")s=!t&&this.sketchCoords_.length>this.minPoints_;else if(a==="Polygon"){const c=this.sketchCoords_;s=c[0].length>this.minPoints_,l=[c[0][0],c[0][c[0].length-2]],t?l=[c[0][0]]:l=[c[0][0],c[0][c[0].length-2]]}if(s){const c=this.getMap();for(let h=0,g=l.length;h<g;h++){const p=l[h],m=c.getPixelFromCoordinate(p),y=e[0]-m[0],x=e[1]-m[1],E=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(y*y+x*x)<=E,n){this.finishCoordinate_=p;break}}}}return n}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Ir(new nr(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Ir);const t=e.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),n.changed()):(n=new fn(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(e){const t=this.getMap().getView().getProjection(),n=Na(this.geometryLayout_);for(;e.length<n;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ir(new fn(this.sketchLineCoords_)));const s=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Ir,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new Ia(Ra.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),n=this.sketchFeature_.getGeometry(),s=t.getView().getProjection(),l=Na(this.geometryLayout_);let a,c;for(;e.length<l;)e.push(0);this.mode_==="Point"?c=this.sketchCoords_:this.mode_==="Polygon"?(a=this.sketchCoords_[0],c=a[a.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(a=this.sketchCoords_,c=a[a.length-1]),c[0]=e[0],c[1]=e[1],this.geometryFunction_(this.sketchCoords_,n,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let s,l;const a=this.mode_;return a==="LineString"||a==="Circle"?(this.finishCoordinate_=e.slice(),l=this.sketchCoords_,l.length>=this.maxPoints_&&(this.freehand_?l.pop():s=!0),l.push(e.slice()),this.geometryFunction_(l,t,n)):a==="Polygon"&&(l=this.sketchCoords_[0],l.length>=this.maxPoints_&&(this.freehand_?l.pop():s=!0),l.push(e.slice()),s&&(this.finishCoordinate_=l[0]),this.geometryFunction_(this.sketchCoords_,t,n)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),s?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),s=this.mode_;for(let l=0;l<e;++l){let a;if(s==="LineString"||s==="Circle"){if(a=this.sketchCoords_,a.splice(-2,1),a.length>=2){this.finishCoordinate_=a[a.length-2].slice();const c=this.finishCoordinate_.slice();a[a.length-1]=c,this.createOrUpdateSketchPoint_(c)}this.geometryFunction_(a,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(s==="Polygon"){a=this.sketchCoords_[0],a.splice(-2,1);const c=this.sketchLine_.getGeometry();if(a.length>=2){const h=a[a.length-2].slice();a[a.length-1]=h,this.createOrUpdateSketchPoint_(h)}c.setCoordinates(a),this.geometryFunction_(this.sketchCoords_,t,n)}if(a.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const n=e.getGeometry(),s=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,n,s)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,n,s),t=n.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new pu([t])):this.type_==="MultiLineString"?e.setGeometry(new qo([t])):this.type_==="MultiPolygon"&&e.setGeometry(new Qo([t])),this.dispatchEvent(new Ia(Ra.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new Ia(Ra.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(e[0]);let s;if(t==="LineString"||t==="Circle")s=this.sketchCoords_;else if(t==="Polygon")s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&s.shift(),s.pop();for(let a=0;a<e.length;a++)this.addToDrawing_(e[a]);const l=e[e.length-1];this.sketchFeature_=this.addToDrawing_(l),this.modifyDrawing_(l)}extend(e){const n=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=n.getCoordinates();const s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.sketchPoint_=new Ir(new nr(s)),this.updateSketchFeatures_(),this.dispatchEvent(new Ia(Ra.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function fC(){const r=qE();return function(e,t){return r[e.getGeometry().getType()]}}function gC(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}const pC=({waypoints:r})=>{if(!r||r.length===0)return ve.jsx("p",{children:"No waypoints available."});const e=t=>t.toFixed(6);return ve.jsx("div",{className:"overflow-x-auto",children:ve.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-300",children:[ve.jsx("thead",{className:"bg-gray-50 rounded-md",children:ve.jsxs("tr",{children:[ve.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[ve.jsx("input",{type:"checkbox"})," "]}),ve.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"WP"}),ve.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coordinates"}),ve.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distance (m)"}),ve.jsx("th",{scope:"col",className:"relative px-6 py-3",children:ve.jsx("span",{className:"sr-only",children:"Options"})})]})}),ve.jsx("tbody",{className:"bg-white divide-y divide-gray-200 rounded-md",children:r.map((t,n)=>ve.jsxs("tr",{children:[ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ve.jsx("input",{type:"checkbox"})}),ve.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[n.toString().padStart(2,"0")," "]}),ve.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e(t.point[0]),", ",e(t.point[1])]}),ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.distanceToNext?t.distanceToNext.toFixed(1):"--"}),ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:ve.jsxs("button",{className:"text-gray-500 hover:text-gray-700",children:[" ",ve.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})})]})})]},n))})]})})},_C=({setModalVisibility:r,waypoints:e})=>{const[t,n]=Wn.useState("Mission Creation"),[s,l]=Wn.useState("Waypoint Navigation"),[a,c]=Wn.useState("Click on the map to mark points of the route and then press 'enter' to complete the route."),[h,g]=Wn.useState(["Generate Data"]),p=()=>{r("hidden")};return ve.jsxs("div",{className:"rounded-md bg-white m-3",children:[ve.jsxs("div",{className:"card-title flex justify-between  shadow-md px-5 py-5",children:[ve.jsx("div",{className:"title-text my-auto font-bold text-2xl ",children:t}),ve.jsx("div",{className:"close-button my-auto text-2xl text-gray-400 hover:cursor-pointer hover:text-gray-800 hover:scale-110 hover:duration-150 duration-100",onClick:p,children:"X"})]}),ve.jsxs("div",{className:"card-content flex flex-col shadow-md px-5 py-5",children:[ve.jsxs("div",{className:"content text-xl font-semibold mb-3",children:[s,ve.jsx(pC,{waypoints:e})]}),ve.jsx("div",{className:"card-instruction bg-gray-300 text-gray-700 text-sm p-3 rounded-md",children:a})]}),ve.jsx("div",{className:"card-button flex justify-end shadow-lg px-5 py-5",children:ve.jsx("div",{className:"button bg-blue-600 py-3 px-5 font-semibold text-white text-base cursor-pointer rounded-md hover:bg-blue-800 hover:scale-110 hover:duration-150 duration-100 ",children:h[0]})})]})},mC=()=>{const[r,e]=Wn.useState(),t=Wn.useRef(),[n,s]=Wn.useState([]),[l,a]=Wn.useState(" ");return Wn.useEffect(()=>{const c=new bw({source:new uC}),h=new Zm,g=E=>{const w=E.getGeometry(),C=[new bt({stroke:new Kn({color:"blue",width:2})})];return w.forEachSegment((I,R)=>{const D=R[0]-I[0],k=R[1]-I[1],P=Math.atan2(k,D),X=69e3,V=Math.PI/6,U=new fn([R,[R[0]-X*Math.cos(P-V),R[1]-X*Math.sin(P-V)]]);C.push(new bt({geometry:U,stroke:new Kn({color:"blue",width:1})}));const b=new fn([R,[R[0]-X*Math.cos(P+V),R[1]-X*Math.sin(P+V)]]);C.push(new bt({geometry:b,stroke:new Kn({color:"blue",width:1})}))}),C},p=new Ym({source:h,style:g}),m=new fw({target:t.current,layers:[c,p],view:new jn({center:[0,0],zoom:5})}),y=new dC({source:h,type:"LineString"});m.addInteraction(y),y.on("drawend",E=>{const w=E.feature.getGeometry(),C=[],I=[];w.forEachSegment((R,D)=>{C.push(R);const k=Z_(new fn([R,D]));I.push(k)}),s(C.map((R,D)=>({point:R,distanceToNext:I[D]||null})))});const x=E=>{E.key==="Enter"&&y.finishDrawing()};return document.addEventListener("keydown",x),e(m),console.log(n),()=>{m.setTarget(null),document.removeEventListener("keydown",x)}},[]),ve.jsxs(ve.Fragment,{children:[ve.jsx("div",{className:`popup z-10 absolute ${l} `,children:ve.jsx(_C,{setModalVisibility:a,waypoints:n})}),ve.jsx("div",{ref:t,className:"h-[90vh] w-[100vw]"})]})};function yC(){return ve.jsx(ve.Fragment,{children:ve.jsx(mC,{})})}d1.createRoot(document.getElementById("root")).render(ve.jsx(Wn.StrictMode,{children:ve.jsx(yC,{})}));
